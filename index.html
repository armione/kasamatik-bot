<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kasamatik - Gemini & Supabase Destekli Bahis Takibi</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#292c30"/>
    <link rel="apple-touch-icon" href="/assets/logo_192.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
      window.si = window.si || function () { (window.si.q = window.si.q || []).push(arguments); };
    </script>
    <script src="/_vercel/speed-insights/script.js"></script>

    <link rel="stylesheet" href="src/css/style.css">
</head>
<body class="text-white">

    <div id="loading-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-80 flex items-center justify-center z-[9999]">
        <div class="loader"></div>
    </div>

    <div id="auth-container">
        <div class="glass-card rounded-2xl p-8 w-full max-w-sm">
            <div class="text-center mb-8">
                <img src="assets/logo.png" alt="Kasamatik Logo" class="mx-auto h-16 w-auto mb-4">
                <p class="text-gray-400">Akıllı Bahis Takibi</p>
            </div>
            <form id="auth-form" class="space-y-6">
                <div>
                    <label for="email" class="block text-gray-300 text-sm font-medium mb-2">E-posta</label>
                    <input type="email" id="email" required class="input-glass w-full p-3 rounded-lg text-gray-800" placeholder="ornek@mail.com">
                </div>
                <div>
                    <label for="password" class="block text-gray-300 text-sm font-medium mb-2">Şifre</label>
                    <input type="password" id="password" required class="input-glass w-full p-3 rounded-lg text-gray-800" placeholder="••••••••">
                </div>
                <div class="flex items-center justify-between gap-4 pt-2">
                    <button type="button" id="login-btn" class="gradient-button w-full py-3 rounded-lg">
                        <span class="btn-text">Giriş Yap</span>
                        <span class="btn-loader hidden"></span>
                    </button>
                    <button type="button" id="signup-btn" class="w-full py-3 rounded-lg bg-gray-600 hover:bg-gray-700">
                        <span class="btn-text">Kayıt Ol</span>
                        <span class="btn-loader hidden"></span>
                    </button>
                </div>
                 <div class="pt-2">
                    <button type="button" id="pwa-install-btn-login" class="pwa-install-button hidden w-full py-3 rounded-lg text-white">
                        ⬇️ Uygulamayı Yükle
                    </button>
                </div>
                <div class="text-center mt-4">
                    <a href="#" id="forgot-password-link" class="text-sm text-gray-400 hover:text-primary-blue">Şifremi Unuttum</a>
                </div>
            </form>

            <div id="signup-success-message" class="hidden text-center">
                <div class="text-6xl mb-4">✅</div>
                <h2 class="text-xl font-bold text-white mb-2">Kayıt Başarılı!</h2>
                <p class="text-gray-300">Giriş yapabilmek için lütfen <strong id="user-email-confirm" class="text-white">e-posta adresinize</strong> gönderdiğimiz doğrulama linkine tıklayın.</p>
            </div>
        </div>
    </div>

    <div id="pwa-install-modal" class="fixed bottom-4 right-4 bg-gray-800 text-white p-5 rounded-xl shadow-2xl max-w-sm z-[1002] hidden animate-slide-in-up">
        <div class="flex items-start space-x-4">
            <img src="assets/logo_192.png" alt="Kasamatik Logo" class="w-16 h-16 rounded-lg">
            <div class="flex-1">
                <h3 class="font-bold text-lg">Kasamatik'i Yükleyin!</h3>
                <p class="text-sm text-gray-300 mt-1">Fırsatları kaçırmamak ve daha hızlı erişim için uygulamayı ana ekranınıza ekleyin.</p>
                <div class="mt-4 flex space-x-3">
                    <button id="pwa-install-btn-modal" class="gradient-button px-4 py-2 rounded-lg text-sm font-semibold">Yükle</button>
                    <button id="pwa-install-dismiss-btn" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-sm">Sonra</button>
                </div>
            </div>
        </div>
    </div>


    <div id="password-reset-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-50 p-4">
        <div class="glass-card rounded-2xl p-8 w-full max-w-sm">
            <h2 class="font-montserrat font-bold text-2xl gradient-text mb-6 text-center">Şifre Sıfırla</h2>
            <p class="text-gray-400 text-center mb-6 text-sm">Hesabınıza ait e-posta adresini girin, size sıfırlama linki gönderelim.</p>
            <form id="password-reset-form" class="space-y-6">
                <div>
                    <label for="reset-email" class="block text-gray-300 text-sm font-medium mb-2">E-posta</label>
                    <input type="email" id="reset-email" required class="input-glass w-full p-3 rounded-lg text-gray-800" placeholder="ornek@mail.com">
                </div>
                <div class="flex items-center justify-between gap-4 pt-2">
                    <button type="button" id="cancel-reset-btn" class="w-full py-3 rounded-lg bg-gray-600 hover:bg-gray-700">İptal</button>
                    <button type="submit" id="send-reset-btn" class="gradient-button w-full py-3 rounded-lg">
                        <span class="btn-text">Gönder</span>
                        <span class="btn-loader hidden"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="ad-popup-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-[1001] p-4">
        <div class="glass-card rounded-2xl p-4 w-full max-w-md relative">
            <button id="close-ad-popup-btn" class="absolute -top-3 -right-3 w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center text-lg font-bold z-10">&times;</button>
            <a id="ad-popup-link" href="#" target="_blank" rel="noopener noreferrer" class="block">
                <img id="ad-popup-image" src="" alt="Reklam" class="rounded-xl w-full">
            </a>
        </div>
    </div>

    <div id="app-container" style="display: none;">
        <button id="mobile-menu-toggle" class="mobile-menu-toggle">
            <span class="text-xl">☰</span>
        </button>

        <div class="sidebar" id="sidebar">
            <div class="p-6 border-b border-white border-opacity-10 flex-shrink-0">
                <div class="flex items-center space-x-3">
                    <img src="assets/logo.png" alt="Kasamatik Logo" class="h-10 w-auto">
                    <div class="sidebar-text">
                        <p class="text-xs text-gray-400" id="user-email-display"></p>
                    </div>
                </div>
            </div>

            <nav class="mt-6 flex-grow overflow-y-auto">
                <div class="sidebar-item active" data-section="dashboard">
                    <span class="sidebar-icon">🏠</span>
                    <span class="sidebar-text">Ana Panel</span>
                </div>
                <div class="sidebar-item" data-section="special-odds-page">
                    <span class="sidebar-icon">✨</span>
                    <span class="sidebar-text">Fırsatlar</span>
                </div>
                <div class="sidebar-item" data-section="new-bet">
                    <span class="sidebar-icon">➕</span>
                    <span class="sidebar-text">Yeni Kayıt</span>
                </div>
                <div class="sidebar-item" data-section="history">
                    <span class="sidebar-icon">📋</span>
                    <span class="sidebar-text">Bahis Geçmişi</span>
                </div>
                <div class="sidebar-item" data-section="cash-history">
                    <span class="sidebar-icon">💰</span>
                    <span class="sidebar-text">Kasa Geçmişi</span>
                </div>
                <div class="sidebar-item" data-section="statistics">
                    <span class="sidebar-icon">📊</span>
                    <span class="sidebar-text">İstatistikler</span>
                </div>
                <div class="sidebar-item" data-section="guide">
                    <span class="sidebar-icon">📖</span>
                    <span class="sidebar-text">Rehber</span>
                </div>
                <div class="sidebar-item" data-section="sponsors_page">
                    <span class="sidebar-icon">🏆</span>
                    <span class="sidebar-text">Sponsorlar</span>
                </div>
                <div class="sidebar-item" data-section="settings">
                    <span class="sidebar-icon">⚙️</span>
                    <span class="sidebar-text">Ayarlar</span>
                </div>
            </nav>

            <div class="p-6 flex-shrink-0">
                 <button id="logout-btn" class="w-full sidebar-item justify-center mb-2 bg-red-800/80 hover:bg-red-700/80">
                    <span class="sidebar-icon">🚪</span>
                    <span class="sidebar-text">Çıkış Yap</span>
                </button>
                <button id="sidebar-toggle" class="w-full sidebar-item justify-center">
                    <span class="sidebar-icon">↔️</span>
                    <span class="sidebar-text">Daralt</span>
                </button>
                <div class="text-center mt-2">
                    <p class="text-xs text-gray-500 sidebar-text">v2.20</p> <!-- Sürüm güncellendi -->
                </div>
            </div>
        </div>

        <div class="main-content" id="main-content">
            <div id="notifications" class="fixed top-4 right-4 z-50 space-y-2"></div>

            <div id="dashboard" class="page-section active">
                <h2 class="text-2xl font-montserrat font-bold gradient-text mb-2">Genel Bakış</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 class="text-gray-300 font-medium text-sm mb-2">💰 Toplam Kasa</h3>
                        <p class="text-2xl font-montserrat font-bold text-white" id="total-bankroll">0 ₺</p>
                        <div class="text-xs text-gray-400 mt-1">Tüm işlemler sonrası mevcut bakiye</div>
                    </div>

                    <div class="stat-card">
                        <h3 class="text-gray-300 font-medium text-sm mb-2">💹 Net Kar/Zarar (Bahislerden)</h3>
                        <p class="text-2xl font-montserrat font-bold text-white" id="net-profit-loss">0 ₺</p>
                        <div class="text-xs text-gray-400 mt-1">Sadece bahislerden gelen net sonuç</div>
                    </div>

                    <div class="stat-card">
                        <h3 class="text-gray-300 font-medium text-sm mb-2">💸 Toplam Yatırım (Bahislere)</h3>
                        <p class="text-2xl font-montserrat font-bold text-teal-300" id="total-investment">0 ₺</p>
                        <div class="text-xs text-gray-400 mt-1">Bahislere yatırılan toplam miktar</div>
                    </div>

                    <div class="stat-card">
                        <h3 class="text-gray-300 font-medium text-sm mb-2">🎲 Toplam Bahis Sayısı</h3>
                        <p class="text-2xl font-montserrat font-bold text-white" id="total-bets">0</p>
                        <div class="text-xs text-gray-400 mt-1">Kasa işlemleri hariç</div>
                    </div>
                </div>

                <div class="glass-card rounded-2xl p-6 mb-6">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4">
                        <h2 class="text-2xl font-montserrat font-bold gradient-text mb-3 sm:mb-0">Performans Özeti</h2>
                        <div id="performance-period-buttons" class="flex items-center space-x-2 bg-gray-900/50 rounded-lg p-1">
                            <button data-action="set-dashboard-period" data-period="1" class="period-btn active">Bugün</button>
                            <button data-action="set-dashboard-period" data-period="7" class="period-btn">Son 7 Gün</button>
                            <button data-action="set-dashboard-period" data-period="30" class="period-btn">Son 30 Gün</button>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="stat-card">
                            <h3 class="text-gray-300 font-medium text-sm mb-2">Oynanan Bahis Tutarı</h3>
                            <p class="text-2xl font-montserrat font-bold text-blue-300" id="summary-total-played">0 ₺</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-gray-300 font-medium text-sm mb-2">Net Sonuç</h3>
                            <p class="text-2xl font-montserrat font-bold" id="summary-net-result">0 ₺</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-lg font-montserrat font-bold gradient-text mb-4">⚡ Hızlı İşlemler</h3>
                        <div class="space-y-3">
                            <button id="quick-add-btn" class="gradient-button w-full py-3 rounded-lg text-white font-medium">
                                🚀 Hızlı Bahis Ekle
                            </button>
                            <button id="cash-transaction-btn" class="gradient-button w-full py-3 rounded-lg text-white font-medium">
                                💸 Para Yatır / Çek
                            </button>
                        </div>
                    </div>

                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-lg font-montserrat font-bold gradient-text mb-4">🚀 Hızlı Başlangıç</h3>
                        <div class="space-y-3 text-sm">
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">1️⃣</span>
                                <p class="text-gray-300">"💸 Para Yatır / Çek" ile kasanı oluştur.</p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">2️⃣</span>
                                <p class="text-gray-300">"➕ Yeni Kayıt" ile ilk bahsini ekle.</p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">3️⃣</span>
                                <p class="text-gray-300">"📊 İstatistikler" ile performansını izle.</p>
                            </div>
                             <div class="flex items-center space-x-3">
                                <span class="text-2xl">4️⃣</span>
                                <p class="text-gray-300">"⚙️ Ayarlar" menüsünden platformlarını ekle.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="dashboard-ad-banner" class="mb-6"></div>

                <div class="glass-card rounded-2xl p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-montserrat font-bold gradient-text">📋 Son Bahisler</h3>
                        <!-- Buton düzeltildi: data-action eklendi -->
                        <button id="show-history-btn" data-action="navigate-section" data-section="history" class="text-blue-400 hover:text-blue-300 text-sm">
                            Tümünü Gör →
                        </button>
                    </div>
                    <div id="recent-bets" class="space-y-3">
                    </div>
                </div>
            </div>

             <div id="special-odds-page" class="page-section">
                 <div class="mb-8">
                    <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 space-y-4 md:space-y-0">
                        <div>
                            <h2 class="text-3xl font-montserrat font-bold gradient-text mb-2">✨ Özel Oran Fırsatları</h2>
                            <p class="text-gray-400 text-sm">Yönetim tarafından yayınlanan, kaçırılmayacak fırsatlar</p>
                        </div>
                    </div>

                    <!-- Gelişmiş Filtreleme Barı -->
                    <div class="glass-card rounded-2xl p-4 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label for="special-odds-status-filter" class="block text-gray-300 text-sm font-medium mb-2">Durum</label>
                                <select id="special-odds-status-filter" class="input-glass w-full px-4 py-2.5 rounded-lg text-gray-800">
                                    <option value="all">Tüm Durumlar</option>
                                    <option value="pending">Bekleniyor</option>
                                    <option value="won">Kazandı</option>
                                    <option value="lost">Kaybetti</option>
                                    <option value="refunded">İade Edildi</option>
                                </select>
                            </div>
                            <div>
                                <label for="special-odds-platform-filter" class="block text-gray-300 text-sm font-medium mb-2">Platform</label>
                                <select id="special-odds-platform-filter" class="input-glass w-full px-4 py-2.5 rounded-lg text-gray-800">
                                    <option value="all">Tüm Platformlar</option>
                                    <!-- Platformlar JS ile dinamik olarak eklenecek -->
                                </select>
                            </div>
                            <div>
                                <label for="special-odds-sort-filter" class="block text-gray-300 text-sm font-medium mb-2">Sırala</label>
                                <select id="special-odds-sort-filter" class="input-glass w-full px-4 py-2.5 rounded-lg text-gray-800">
                                    <option value="newest">En Yeni</option>
                                    <option value="highest_odd">En Yüksek Oran</option>
                                    <option value="lowest_odd">En Düşük Oran</option>
                                    <option value="most_popular">En Popüler</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="text-center text-xs text-gray-500 mb-6 italic">
                        Not: Sonuçlanan fırsatlar, 24 saat sonra bu listeden otomatik olarak kaldırılır.
                    </div>
                    <div id="special-odds-list-container" class="space-y-4">
                        <!-- Fırsat kartları buraya eklenecek -->
                    </div>
                </div>
            </div>

            <div id="new-bet" class="page-section">
                <div class="form-card">
                    <h2 class="text-2xl font-montserrat font-bold gradient-text mb-6">
                        ➕ Yeni Bahis Kaydı
                    </h2>

                    <form id="bet-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Platform</label>
                                <div class="flex space-x-2">
                                    <select id="platform" required class="input-glass flex-1 p-3 rounded-lg text-gray-800">
                                        <option value="">Platform Seçin</option>
                                        <option value="all" disabled>Platform Seçin</option> <!-- "all" seçeneğini devre dışı bırak -->
                                    </select>
                                    <button type="button" id="platform-manager-btn" class="gradient-button px-4 py-3 rounded-lg text-white">
                                        ⚙️
                                    </button>
                                </div>
                            </div>

                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Bahis Türü</label>
                                <select id="bet-type" required class="input-glass w-full p-3 rounded-lg text-gray-800">
                                    <option value="Spor Bahis" selected>Spor Bahis</option>
                                    <option value="Canlı Bahis">Canlı Bahis</option>
                                </select>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Bahis Açıklaması</label>
                                <input type="text" id="description" placeholder="Örn: Galatasaray - Fenerbahçe (1)"
                                       class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-gray-300 text-sm font-medium mb-2">Bahis Miktarı (₺)</label>
                                    <input type="number" id="bet-amount" required min="0.01" step="0.01" placeholder="100" <!-- min değeri 0.01 yapıldı -->
                                           class="input-glass w-full p-3 rounded-lg text-gray-800">
                                </div>

                                <div>
                                    <label class="block text-gray-300 text-sm font-medium mb-2">Oran</label>
                                    <input type="number" id="odds" required min="1" step="0.01" placeholder="2.50"
                                           class="input-glass w-full p-3 rounded-lg text-gray-800">
                                </div>

                                <div>
                                    <label class="block text-gray-300 text-sm font-medium mb-2">Tarih</label>
                                    <input type="date" id="bet-date" required <!-- required eklendi -->
                                           class="input-glass w-full p-3 rounded-lg text-gray-800">
                                </div>
                            </div>
                        </div>

                        <div class="image-upload-area rounded-lg p-6 text-center mb-6 border-2 border-dashed border-gray-600" id="image-upload-area">
                            <div id="upload-area" class="space-y-3 flex flex-col items-center">
                                <div class="text-4xl">📸</div>
                                <p class="font-bold text-white">Önce Kuponunu Yükle, Zaman Kazan!</p>
                                <p class="text-gray-300">Bahis kuponu resmini buraya sürükleyin veya Ctrl+V ile yapıştırın</p>
                                <input type="file" id="image-input" accept="image/*" class="hidden">
                                <div class="flex flex-wrap justify-center gap-3"> <!-- Butonları yan yana almak için flex -->
                                    <button type="button" id="image-select-btn" class="gradient-button px-6 py-3 rounded-lg text-white">
                                        📁 Dosya Seç
                                    </button>
                                    <!-- GÖREV 1.4: Panodan Yapıştır Butonu Eklendi -->
                                    <button type="button" id="paste-image-btn" class="gradient-button px-6 py-3 rounded-lg text-white">
                                        📋 Panodan Yapıştır
                                    </button>
                                </div>
                            </div>
                            <div id="image-preview" class="hidden mt-4">
                                <img id="preview-img" class="max-w-full max-h-48 mx-auto rounded-lg">
                                <div class="mt-3 flex justify-center items-center gap-x-4">
                                    <button type="button" id="remove-image-btn" class="px-4 py-2 bg-red-600 text-white rounded-lg">
                                        🗑️ Resmi Kaldır
                                    </button>
                                    <button type="button" id="gemini-analyze-btn" class="gradient-button px-4 py-2 rounded-lg text-white flex items-center gap-x-2" disabled>
                                        <span id="gemini-button-icon">✨</span>
                                        <span id="gemini-button-text">Kuponu Oku</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end space-x-4 pt-6">
                            <button type="button" id="reset-form-btn" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                                Temizle
                            </button>
                            <button type="submit" class="gradient-button px-8 py-3 rounded-lg text-white font-medium" id="add-bet-btn">
                                <span class="btn-text">Bahis Ekle</span>
                                <span class="btn-loader hidden"></span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="history" class="page-section">
                 <div class="mb-8">
                    <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 space-y-4 md:space-y-0">
                        <div>
                            <h2 class="text-3xl font-montserrat font-bold gradient-text mb-2">📋 Bahis Geçmişi</h2>
                            <p class="text-gray-400 text-sm">Tüm bahis kayıtlarınızı görüntüleyin ve yönetin</p>
                        </div>
                        <div>
                            <button id="clear-all-btn" class="px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium">
                                🗑️ Tüm Verileri Temizle
                            </button>
                        </div>
                    </div>

                    <div class="glass-card rounded-2xl p-6 mb-6">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-2">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-gray-300 text-sm font-medium mb-2">Hızlı Tarih</label>
                                        <div id="history-period-buttons" class="flex items-center space-x-1 bg-gray-900/50 rounded-lg p-1">
                                            <button data-action="set-history-period" data-period="1" class="period-btn">Bugün</button>
                                            <button data-action="set-history-period" data-period="7" class="period-btn">7 Gün</button>
                                            <button data-action="set-history-period" data-period="30" class="period-btn">30 Gün</button>
                                            <button data-action="set-history-period" data-period="all" class="period-btn active">Tümü</button>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-gray-300 text-sm font-medium mb-2">Platform</label>
                                        <select id="platform-filter" class="input-glass w-full px-4 py-2.5 rounded-lg text-gray-800">
                                            <option value="all">Tüm Platformlar</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-gray-300 text-sm font-medium mb-2">Durum</label>
                                        <select id="status-filter" class="input-glass w-full px-4 py-2.5 rounded-lg text-gray-800">
                                            <option value="all">Tüm Durumlar</option>
                                            <option value="pending">Bekleyen</option>
                                            <option value="won">Kazanan</option>
                                            <option value="lost">Kaybeden</option>
                                            <option value="refunded">İade Edilen</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="flex flex-col">
                                <label class="block text-gray-300 text-sm font-medium mb-2">Açıklama Ara</label>
                                <div class="flex-grow flex">
                                    <input type="text" id="search-filter" class="input-glass w-full px-4 py-2.5 rounded-lg text-gray-800" placeholder="Maç, bahis türü vb. ara...">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="stats-grid mb-6">
                        <div class="stat-card">
                            <h3 class="text-gray-300 font-medium text-sm mb-2">Bahis Sayısı</h3>
                            <p class="text-2xl font-montserrat font-bold" id="filtered-bets-count">0</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-gray-300 font-medium text-sm mb-2">Toplam Yatırım</h3>
                            <p class="text-2xl font-montserrat font-bold text-blue-300" id="filtered-total-investment">0 ₺</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-gray-300 font-medium text-sm mb-2">Net Kar/Zarar</h3>
                            <p class="text-2xl font-montserrat font-bold" id="filtered-net-profit">0 ₺</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-gray-300 font-medium text-sm mb-2">Kazanma Oranı</h3>
                            <p class="text-2xl font-montserrat font-bold" id="filtered-win-rate">0%</p>
                        </div>
                    </div>

                    <div id="bet-history">
                    </div>

                    <div id="pagination-container" class="pagination">
                    </div>
                </div>
            </div>

            <div id="cash-history" class="page-section">
                <div class="mb-8">
                    <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 space-y-4 md:space-y-0">
                        <div>
                            <h2 class="text-3xl font-montserrat font-bold gradient-text mb-2">💰 Kasa Geçmişi</h2>
                            <p class="text-gray-400 text-sm">Tüm para yatırma ve çekme işlemleriniz</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                        <div class="glass-card rounded-xl p-4 text-center">
                            <div class="text-2xl mb-1 text-green-400" id="cash-history-deposit">0 ₺</div>
                            <div class="text-xs text-gray-400">Toplam Yatırım</div>
                        </div>
                        <div class="glass-card rounded-xl p-4 text-center">
                            <div class="text-2xl mb-1 text-red-400" id="cash-history-withdrawal">0 ₺</div>
                            <div class="text-xs text-gray-400">Toplam Çekim</div>
                        </div>
                        <div class="glass-card rounded-xl p-4 text-center">
                            <div class="text-2xl mb-1" id="cash-history-net">0 ₺</div>
                            <div class="text-xs text-gray-400">Net Bakiye</div>
                        </div>
                         <div class="glass-card rounded-xl p-4 text-center">
                            <div class="text-2xl mb-1" id="cash-history-count">0</div>
                            <div class="text-xs text-gray-400">Toplam İşlem</div>
                        </div>
                    </div>

                    <div id="cash-history-list">
                    </div>

                    <div id="cash-pagination-container" class="pagination">
                    </div>
                </div>
            </div>

            <div id="statistics" class="page-section">
                <div class="mb-8">
                    <h2 class="text-3xl font-montserrat font-bold gradient-text mb-6">📊 İstatistikler</h2>

                     <div class="glass-card rounded-xl p-4 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Tarih Aralığı</label>
                                <input type="text" id="stats-date-range-filter" class="input-glass w-full px-4 py-2 rounded-lg text-gray-800" placeholder="Tarih aralığı seçin">
                            </div>
                             <button id="stats-reset-filters-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium">
                                🔄 Sıfırla
                            </button>
                        </div>
                    </div>

                    <div class="stats-grid mb-8">
                        <div class="stat-card">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center text-xl">
                                        🎯
                                    </div>
                                    <div>
                                        <h3 class="text-gray-300 font-medium text-sm">Toplam Bahis</h3>
                                        <p class="text-2xl font-montserrat font-bold text-white" id="stats-total-bets">0</p>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-400">Kasa işlemleri hariç toplam bahis sayısı</div>
                            <div class="mt-2 text-xs text-blue-300" id="stats-bet-breakdown">Spor: 0 | Canlı: 0</div>
                        </div>

                        <div class="stat-card">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center text-xl">
                                        ✅
                                    </div>
                                    <div>
                                        <h3 class="text-gray-300 font-medium text-sm">Kazanma Oranı</h3>
                                        <p class="text-2xl font-montserrat font-bold text-green-400" id="stats-win-rate">0%</p>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-400">Sonuçlanan bahislerdeki başarı oranı</div>
                            <div class="mt-2 text-xs text-green-300" id="stats-win-breakdown">Kazanan: 0 | Kaybeden: 0</div>
                        </div>

                        <div class="stat-card">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center text-xl">
                                        📊
                                    </div>
                                    <div>
                                        <h3 class="text-gray-300 font-medium text-sm">Ortalama Oran</h3>
                                        <p class="text-2xl font-montserrat font-bold text-yellow-400" id="stats-avg-odds">0.00</p>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-400">Spor bahislerinin ortalama oranı</div>
                            <div class="mt-2 text-xs text-yellow-300" id="stats-odds-range">En düşük: 0.00 | En yüksek: 0.00</div>
                        </div>

                        <div class="stat-card">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-purple-400 to-pink-500 flex items-center justify-center text-xl">
                                        💹
                                    </div>
                                    <div>
                                        <h3 class="text-gray-300 font-medium text-sm">ROI</h3>
                                        <p class="text-2xl font-montserrat font-bold" id="stats-roi">0%</p>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-400">Yatırım getirisi (Net kar / Toplam yatırım)</div>
                            <div class="mt-2 text-xs" id="stats-roi-breakdown">Yatırım: 0₺ | Net kar: 0₺</div>
                        </div>

                        <div class="stat-card">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-indigo-400 to-blue-500 flex items-center justify-center text-xl">
                                        📈
                                    </div>
                                    <div>
                                        <h3 class="text-gray-300 font-medium text-sm">Ortalama Bahis</h3>
                                        <p class="text-2xl font-montserrat font-bold text-blue-400" id="stats-avg-bet">0₺</p>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-400">Bahis başına ortalama yatırım miktarı</div>
                            <div class="mt-2 text-xs text-blue-300" id="stats-bet-range">En düşük: 0₺ | En yüksek: 0₺</div>
                        </div>

                        <div class="stat-card">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-teal-400 to-cyan-500 flex items-center justify-center text-xl">
                                        🏆
                                    </div>
                                    <div>
                                        <h3 class="text-gray-300 font-medium text-sm">En İyi Platform</h3>
                                        <p class="text-lg font-montserrat font-bold text-teal-400" id="stats-best-platform">-</p>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-400">En çok kar getiren platform</div>
                            <div class="mt-2 text-xs text-teal-300" id="stats-platform-profit">Kar: 0₺</div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="glass-card rounded-2xl p-6">
                            <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">📈 Kar/Zarar Trendi</h3>
                            <div style="height: 300px;">
                                <canvas id="profitChart"></canvas>
                            </div>
                        </div>

                        <div class="glass-card rounded-2xl p-6">
                            <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">🏢 Platform Dağılımı</h3>
                            <div style="height: 300px;">
                                <canvas id="platformChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="guide" class="page-section">
                <div class="mb-8">
                    <h2 class="text-3xl font-montserrat font-bold gradient-text mb-6">📖 Kullanım Rehberi ve Kurulum</h2>

                    <div class="space-y-6">
                        <div class="glass-card rounded-2xl p-6">
                            <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">📱 Kasamatik'i Ana Ekranınıza Ekleyin!</h3>
                            <p class="text-gray-300 mb-6">Kasamatik'i bir uygulama gibi kullanarak fırsatlara anında erişin. Tarayıcınıza göre aşağıdaki adımları izleyebilirsiniz:</p>

                            <div class="my-6">
                                <button type="button" id="pwa-install-btn-guide" class="pwa-install-button hidden w-full gradient-button py-4 rounded-lg text-lg font-semibold">
                                    ⬇️ Tek Tıkla Yükle
                                </button>
                            </div>

                            <div class="space-y-4">
                                <!-- iOS / Safari -->
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">iPhone / iPad (Safari)</h4>
                                    <ol class="list-decimal list-inside space-y-2 text-gray-400">
                                        <li>Safari tarayıcısında Kasamatik'i açın.</li>
                                        <li>Ekranın altındaki <span class="font-bold text-blue-400">Paylaş</span> simgesine dokunun (yukarı ok olan kutu).</li>
                                        <li>Açılan menüde aşağı kaydırın ve <span class="font-bold text-white">"Ana Ekrana Ekle"</span> seçeneğine dokunun.</li>
                                        <li>Sağ üst köşedeki <span class="font-bold text-blue-400">"Ekle"</span> butonuna basın. Kasamatik artık ana ekranınızda!</li>
                                    </ol>
                                </div>

                                <!-- Android / Chrome -->
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Android (Chrome)</h4>
                                     <ol class="list-decimal list-inside space-y-2 text-gray-400">
                                        <li>Chrome tarayıcısında Kasamatik'i açın.</li>
                                        <li>Sağ üst köşedeki <span class="font-bold text-white">üç nokta (⋮)</span> menüsüne dokunun.</li>
                                        <li><span class="font-bold text-white">"Uygulamayı Yükle"</span> veya <span class="font-bold text-white">"Ana ekrana ekle"</span> seçeneğine dokunun.</li>
                                        <li>Kurulumu onaylayın. Kasamatik artık uygulamalarınız arasında!</li>
                                    </ol>
                                </div>

                                <!-- Desktop / Chrome / Edge -->
                                <div>
                                    <h4 class="font-bold text-white text-lg mb-2">Masaüstü (Chrome, Edge)</h4>
                                    <ol class="list-decimal list-inside space-y-2 text-gray-400">
                                       <li>Tarayıcınızda Kasamatik'i açın.</li>
                                       <li>Adres çubuğunun sağ tarafında çıkan <span class="font-bold text-white">indirme (monitör ve ok)</span> simgesine tıklayın.</li>
                                       <li><span class="font-bold text-blue-400">"Yükle"</span> butonuna basın.</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <div class="glass-card rounded-2xl p-6">
                             <div class="flex items-center space-x-3 mb-4">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center text-xl">
                                    🆕
                                </div>
                                <div>
                                    <h3 class="text-xl font-montserrat font-bold gradient-text">Yeni Güncelleme v2.0</h3>
                                    <p class="text-gray-400 text-sm">Supabase Entegrasyonu ve Kullanıcı Hesapları</p>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-start space-x-3">
                                    <span class="text-green-400 text-lg">☁️</span>
                                    <div>
                                        <h4 class="text-white font-medium">Bulut Veritabanı</h4>
                                        <p class="text-gray-400 text-sm">Tüm verileriniz artık güvenli Supabase veritabanında saklanıyor.</p>
                                    </div>
                                </div>
                                 <div class="flex items-start space-x-3">
                                    <span class="text-blue-400 text-lg">👤</span>
                                    <div>
                                        <h4 class="text-white font-medium">Kullanıcı Hesapları</h4>
                                        <p class="text-gray-400 text-sm">Artık kayıt olup giriş yapabilir, verilerinize her yerden ulaşabilirsiniz.</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3">
                                    <span class="text-purple-400 text-lg">🔐</span>
                                    <div>
                                        <h4 class="text-white font-medium">Güvenlik</h4>
                                        <p class="text-gray-400 text-sm">Her kullanıcı sadece kendi verilerini görebilir ve yönetebilir.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="sponsors_page" class="page-section">
                <h2 class="text-3xl font-montserrat font-bold gradient-text mb-6">🏆 Sponsorlarımız</h2>
                <p class="text-gray-400 mb-8">Projeye destek veren değerli sponsorlarımız.</p>
                <div id="sponsors-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Sponsorlar buraya render edilecek -->
                </div>
            </div>

            <div id="settings" class="page-section">
                <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">🔑 Hesap Yönetimi</h3>
                        <form id="account-settings-form" class="space-y-4">
                            <div>
                                <label for="new-password" class="block text-gray-300 text-sm font-medium mb-2">Yeni Şifre</label>
                                <input type="password" id="new-password" placeholder="••••••••" class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>
                            <div>
                                <label for="confirm-password" class="block text-gray-300 text-sm font-medium mb-2">Yeni Şifreyi Onayla</label>
                                <input type="password" id="confirm-password" placeholder="••••••••" class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>
                            <div class="pt-2">
                                <button type="submit" id="update-password-btn" class="gradient-button w-full py-3 rounded-lg text-white">
                                    <span class="btn-text">Şifreyi Güncelle</span>
                                    <span class="btn-loader hidden"></span>
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">🏢 Platform Yönetimi</h3>
                        <div class="space-y-4">
                            <div class="flex space-x-2">
                                <input type="text" id="new-platform-name" placeholder="Platform adı"
                                       class="input-glass flex-1 p-3 rounded-lg text-gray-800">
                                <button id="add-platform-btn" class="gradient-button px-4 py-3 rounded-lg text-white">
                                    ➕
                                </button>
                            </div>
                            <div id="custom-platforms-list" class="space-y-2 max-h-48 overflow-y-auto">
                                <!-- Özel platformlar buraya render edilecek -->
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">📊 Veri Yönetimi</h3>
                        <div class="space-y-3">
                            <button id="import-btn" class="gradient-button w-full py-3 rounded-lg text-white">
                                📥 İçe Aktar
                            </button>
                            <button id="export-btn" class="gradient-button w-full py-3 rounded-lg text-white">
                                📤 Dışa Aktar
                            </button>
                            <button id="clear-all-settings-btn" class="w-full py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                                🗑️ Tüm Verileri Temizle
                            </button>
                        </div>
                    </div>

                    <!-- ADMIN PANELS CONTAINER -->
                    <div id="admin-panels-container" class="hidden xl:col-span-3 space-y-6">
                         <div id="special-odds-panel" class="glass-card rounded-2xl p-6">
                            <h3 class="text-xl font-montserrat font-bold gradient-text mb-6">📢 Özel Oran Yönetim Paneli (Admin)</h3>

                            <!-- Fırsat Yayınlama Formu -->
                            <form id="special-odd-form" class="space-y-4 mb-8 p-4 border border-gray-700 rounded-xl">
                                <h4 class="text-lg font-semibold text-gray-300 mb-3">Yeni Fırsat Yayınla</h4>

                                <div class="image-upload-area rounded-lg p-4 text-center border-dashed border-gray-600" id="admin-image-upload-area">
                                    <p class="text-sm text-gray-400 mb-2">Özel oran ekran görüntüsünü yükle:</p>
                                    <div id="admin-upload-area" class="space-y-2">
                                        <input type="file" id="admin-image-input" accept="image/*" class="hidden">
                                        <div class="flex flex-wrap justify-center gap-3"> <!-- Butonları yan yana almak için flex -->
                                            <button type="button" id="admin-image-select-btn" class="gradient-button px-4 py-2 rounded-lg text-white text-sm">📁 Dosya Seç</button>
                                            <button type="button" id="admin-paste-image-btn" class="gradient-button px-4 py-2 rounded-lg text-white text-sm">📋 Panodan Yapıştır</button>
                                        </div>
                                    </div>
                                    <div id="admin-image-preview" class="hidden mt-2">
                                        <img id="admin-preview-img" class="max-w-full max-h-32 mx-auto rounded-lg">
                                        <button type="button" id="admin-remove-image-btn" class="mt-2 px-2 py-1 bg-red-600 text-white rounded text-xs">🗑️ Kaldır</button>
                                    </div>
                                </div>
                                <button type="button" id="admin-gemini-analyze-btn" class="w-full gradient-button py-2 rounded-lg text-white flex items-center justify-center gap-x-2" disabled>
                                    <span id="admin-gemini-button-icon">✨</span>
                                    <span id="admin-gemini-button-text">Kuponu Oku</span>
                                </button>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-gray-400 text-xs font-medium mb-1">Açıklama</label>
                                        <textarea id="special-odd-description" required class="input-glass w-full p-2 rounded-lg text-gray-800" rows="3"></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-gray-400 text-xs font-medium mb-1">Oran</label>
                                        <input type="number" id="special-odd-odds" required step="0.01" min="1" class="input-glass w-full p-2 rounded-lg text-gray-800"> <!-- min="1" eklendi -->
                                    </div>
                                     <div>
                                        <label class="block text-gray-400 text-xs font-medium mb-1">Platform</label>
                                        <input type="text" id="special-odd-platform" required class="input-glass w-full p-2 rounded-lg text-gray-800" placeholder="Örn: Holiganbet">
                                    </div>
                                    <div>
                                        <label class="block text-gray-400 text-xs font-medium mb-1">Maks. Bahis (₺)</label>
                                        <input type="number" id="special-odd-max-bet" step="0.01" min="0" class="input-glass w-full p-2 rounded-lg text-gray-800" placeholder="Opsiyonel"> <!-- min="0" eklendi -->
                                    </div>
                                </div>
                                 <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-700">
                                    <div>
                                        <label class="block text-gray-400 text-xs font-medium mb-1">Ana Link Metni (Opsiyonel)</label>
                                        <input type="text" id="special-odd-primary-link-text" class="input-glass w-full p-2 rounded-lg text-gray-800" placeholder="Örn: FESTWIN GİRİŞ">
                                    </div>
                                    <div>
                                        <label class="block text-gray-400 text-xs font-medium mb-1">Ana Link URL (Opsiyonel)</label>
                                        <input type="url" id="special-odd-primary-link-url" class="input-glass w-full p-2 rounded-lg text-gray-800" placeholder="https://...">
                                    </div>
                                     <div>
                                        <label class="block text-gray-400 text-xs font-medium mb-1">İkincil Link Metni (Opsiyonel)</label>
                                        <input type="text" id="special-odd-secondary-link-text" class="input-glass w-full p-2 rounded-lg text-gray-800" placeholder="Örn: X-BONUS | ÖZEL ORAN">
                                    </div>
                                    <div>
                                        <label class="block text-gray-400 text-xs font-medium mb-1">İkincil Link URL (Opsiyonel)</label>
                                        <input type="url" id="special-odd-secondary-link-url" class="input-glass w-full p-2 rounded-lg text-gray-800" placeholder="https://...">
                                    </div>
                                </div>
                                <button type="submit" class="gradient-button w-full py-3 rounded-lg">
                                    <span class="btn-text">Fırsatı Yayınla</span>
                                    <span class="btn-loader hidden"></span>
                                </button>
                            </form>

                            <!-- Aktif Fırsatlar Listesi -->
                            <div>
                                <h4 class="text-lg font-semibold text-gray-300 mb-3">Aktif Fırsatlar</h4>
                                <div id="active-special-odds-list" class="space-y-3 max-h-96 overflow-y-auto">
                                    <!-- Fırsatlar buraya dinamik olarak eklenecek -->
                                </div>
                            </div>
                        </div>

                        <div id="sponsor-management-panel" class="glass-card rounded-2xl p-6">
                            <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">🏆 Sponsor Yönetimi (Admin)</h3>
                            <form id="sponsor-form" class="space-y-4 mb-6">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <input type="text" id="sponsor-name" placeholder="Sponsor Adı" required class="input-glass p-3 rounded-lg text-gray-800">
                                    <input type="url" id="sponsor-logo-url" placeholder="Logo URL" required class="input-glass p-3 rounded-lg text-gray-800">
                                    <input type="url" id="sponsor-target-url" placeholder="Hedef URL" required class="input-glass p-3 rounded-lg text-gray-800">
                                </div>
                                <button type="submit" class="gradient-button w-full py-3 rounded-lg">
                                    Sponsor Ekle
                                </button>
                            </form>
                            <h4 class="text-lg font-semibold text-gray-300 mb-3">Mevcut Sponsorlar</h4>
                            <div id="sponsors-list" class="space-y-2 max-h-48 overflow-y-auto">
                                <!-- Sponsorlar buraya render edilecek -->
                            </div>
                        </div>

                        <div id="ad-management-panel" class="glass-card rounded-2xl p-6">
                            <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">📢 Reklam Yönetimi (Admin)</h3>
                            <form id="ad-form" class="space-y-4 mb-6">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <input type="url" id="ad-image-url" placeholder="Reklam Resim URL" required class="input-glass p-3 rounded-lg text-gray-800">
                                    <input type="url" id="ad-target-url" placeholder="Hedef URL" required class="input-glass p-3 rounded-lg text-gray-800">
                                    <select id="ad-location" required class="input-glass p-3 rounded-lg text-gray-800">
                                        <option value="">Konum Seçin</option>
                                        <option value="login_popup">Giriş Pop-up</option>
                                        <option value="dashboard_banner">Ana Panel Banner</option>
                                    </select>
                                </div>
                                <button type="submit" class="gradient-button w-full py-3 rounded-lg">
                                    Reklam Ekle
                                </button>
                            </form>
                            <h4 class="text-lg font-semibold text-gray-300 mb-3">Mevcut Reklamlar</h4>
                            <div id="ads-list" class="space-y-2 max-h-48 overflow-y-auto">
                                <!-- Reklamlar buraya render edilecek -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="floating-action" id="floating-add-btn">
            ➕
        </div>

        <div id="platform-manager-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
            <div class="glass-card rounded-2xl p-6 w-full max-w-md">
                <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Platform Yönetimi</h3>

                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Yeni Platform Ekle</label>
                        <div class="flex space-x-2">
                            <input type="text" id="new-platform-name-modal" placeholder="Platform adı"
                                   class="input-glass flex-1 p-3 rounded-lg text-gray-800">
                            <button id="add-platform-modal-btn" class="gradient-button px-4 py-3 rounded-lg text-white">
                                ➕
                            </button>
                        </div>
                    </div>

                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Özel Platformlar</label>
                        <div id="custom-platforms-list-modal" class="space-y-2 max-h-32 overflow-y-auto">
                            <!-- Özel platformlar buraya render edilecek -->
                        </div>
                    </div>
                </div>

                <div class="flex justify-end space-x-3 mt-6">
                    <button id="close-platform-manager-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                        Kapat
                    </button>
                </div>
            </div>
        </div>

        <div id="cash-transaction-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
            <div class="glass-card rounded-2xl p-6 w-full max-w-md">
                <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">💸 Kasa İşlemi</h3>
                <div class="space-y-4">
                     <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Miktar (₺)</label>
                        <input type="number" id="cash-amount" required min="0.01" step="0.01" placeholder="1000" <!-- min değeri 0.01 yapıldı -->
                               class="input-glass w-full p-3 rounded-lg text-gray-800">
                    </div>
                    <!-- GÖREV 3.3: Açıklama Input Alanı -->
                     <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Açıklama (Opsiyonel)</label>
                        <input type="text" id="cash-description" placeholder="Örn: Papara Transferi"
                               class="input-glass w-full p-3 rounded-lg text-gray-800">
                    </div>
                    <div class="flex justify-end space-x-3 pt-2">
                        <button type="button" id="cash-transaction-close-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                            İptal
                        </button>
                        <button type="button" id="cash-withdrawal-btn" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                            Para Çek
                        </button>
                        <button type="button" id="cash-deposit-btn" class="gradient-button px-4 py-2 rounded-lg text-white">
                            Para Yatır
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="quick-add-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
            <div class="glass-card rounded-2xl p-6 w-full max-w-md">
                <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Hızlı Bahis Ekle</h3>

                <form id="quick-add-form" class="space-y-4">
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Platform</label>
                        <select id="quick-platform" required class="input-glass w-full p-3 rounded-lg text-gray-800">
                             <option value="">Platform Seçin</option>
                             <option value="all" disabled>Platform Seçin</option> <!-- "all" seçeneğini devre dışı bırak -->
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Miktar (₺)</label>
                            <input type="number" id="quick-amount" required min="0.01" step="0.01" placeholder="100" <!-- min değeri 0.01 yapıldı -->
                                   class="input-glass w-full p-3 rounded-lg text-gray-800">
                        </div>

                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Oran</label>
                            <input type="number" id="quick-odds" required min="1" step="0.01" placeholder="2.50"
                                   class="input-glass w-full p-3 rounded-lg text-gray-800">
                        </div>
                    </div>

                    <div class="image-upload-area rounded-lg p-4 text-center" id="quick-image-upload-area">
                        <div id="quick-upload-area" class="space-y-2">
                            <div class="text-2xl">📸</div>
                            <p class="text-gray-300 text-sm">Kupon resmi sürükleyin veya Ctrl+V ile yapıştırın</p>
                            <input type="file" id="quick-image-input" accept="image/*" class="hidden">
                             <div class="flex flex-wrap justify-center gap-3"> <!-- Butonları yan yana almak için flex -->
                                <button type="button" id="quick-image-select-btn" class="gradient-button px-3 py-2 rounded-lg text-white text-sm">
                                    📁 Seç
                                </button>
                                <button type="button" id="quick-paste-image-btn" class="gradient-button px-3 py-2 rounded-lg text-white text-sm">
                                    📋 Yapıştır
                                </button>
                            </div>
                        </div>
                        <div id="quick-image-preview" class="hidden mt-3">
                            <img id="quick-preview-img" class="max-w-full max-h-32 mx-auto rounded-lg">
                            <button type="button" id="quick-remove-image-btn" class="mt-2 px-2 py-1 bg-red-600 text-white rounded text-xs">
                                🗑️ Kaldır
                            </button>
                        </div>
                    </div>

                    <div class="flex justify-end space-x-3">
                        <button type="button" id="close-quick-add-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                            İptal
                        </button>
                        <button type="submit" class="gradient-button px-4 py-2 rounded-lg text-white">
                            Ekle
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div id="special-odd-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-40 p-4">
            <div class="glass-card rounded-2xl p-6 w-full max-w-md">
                <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Fırsatı Oyna</h3>
                <div id="special-odd-modal-content" class="space-y-4">
                    <!-- Pop-up içeriği buraya dinamik olarak eklenecek -->
                </div>
            </div>
        </div>

        <div id="import-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
            <div class="glass-card rounded-2xl p-6 w-full max-w-md">
                <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Veri İçe Aktarma</h3>

                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">JSON Dosyası Seç</label>
                        <input type="file" id="import-file" accept=".json" class="input-glass w-full p-3 rounded-lg text-gray-800">
                    </div>

                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Veya JSON Metni Yapıştır</label>
                        <textarea id="import-text" placeholder="JSON verisini buraya yapıştırın..."
                                  class="input-glass w-full p-3 rounded-lg text-gray-800 h-32 resize-none"></textarea>
                    </div>

                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">İçe Aktarma Modu</label>
                        <select id="import-mode" class="input-glass w-full p-3 rounded-lg text-gray-800">
                            <option value="merge">Birleştir (mevcut veriler korunur)</option>
                            <option value="replace">Değiştir (mevcut veriler silinir)</option>
                        </select>
                    </div>
                </div>

                <div class="flex justify-end space-x-3 mt-6">
                    <button id="close-import-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                        İptal
                    </button>
                    <button id="import-data-btn" class="gradient-button px-4 py-2 rounded-lg text-white">
                        İçe Aktar
                    </button>
                </div>
            </div>
        </div>

        <!-- ESKİ Düzenleme Modalı (Sadece Etiket ve Sonuç Düzeltme için) -->
        <div id="edit-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
            <div class="glass-card rounded-2xl p-6 w-full max-w-md">
                <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Bahis Düzenle</h3>

                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Durum (Düzeltme)</label>
                        <select id="edit-status" class="input-glass w-full p-3 rounded-lg text-gray-800">
                            <!-- Durumlar dinamik olarak eklenecek, sadece sonuçlanmışlar? Belki hepsi olmalı -->
                            <option value="pending">Bekleyen</option>
                            <option value="won">Kazandı</option>
                            <option value="lost">Kaybetti</option>
                            <option value="refunded">İade Edildi</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Etiket</label>
                        <input type="text" id="edit-tag" placeholder="Kupona bir etiket ekle..."
                               class="input-glass w-full p-3 rounded-lg text-gray-800">
                    </div>

                    <div id="edit-win-amount-section" style="display: none;">
                        <label class="block text-gray-300 text-sm font-medium mb-2">Toplam Kazanç (₺) (Düzeltme)</label>
                        <input type="number" id="edit-win-amount" min="0.01" step="0.01" placeholder="Örn: 1500"
                               class="input-glass w-full p-3 rounded-lg text-gray-800">
                    </div>
                </div>

                <div class="flex justify-end space-x-3 mt-6">
                    <button id="close-edit-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                        İptal
                    </button>
                    <button id="save-edit-btn" class="gradient-button px-4 py-2 rounded-lg text-white">
                        Değişiklikleri Kaydet
                    </button>
                </div>
            </div>
        </div>

        <!-- YENİ Basit Sonuçlandırma Modalı -->
        <div id="resolve-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
            <div class="glass-card rounded-2xl p-6 w-full max-w-sm"> <!-- Daha küçük -->
                <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Bahis Sonuçlandır</h3>

                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Sonuç</label>
                        <select id="resolve-status" class="input-glass w-full p-3 rounded-lg text-gray-800">
                            <option value="won">Kazandı</option>
                            <option value="lost">Kaybetti</option>
                            <option value="refunded">İade Edildi</option>
                        </select>
                    </div>

                    <div id="resolve-win-amount-section" style="display: none;"> <!-- Başlangıçta gizli -->
                        <label class="block text-gray-300 text-sm font-medium mb-2">Toplam Kazanç (₺)</label>
                        <input type="number" id="resolve-win-amount" min="0.01" step="0.01" placeholder="Örn: 1500"
                               class="input-glass w-full p-3 rounded-lg text-gray-800">
                    </div>
                </div>

                <div class="flex justify-end space-x-3 mt-6">
                    <button id="close-resolve-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                        İptal
                    </button>
                    <button id="save-resolve-btn" class="gradient-button px-4 py-2 rounded-lg text-white">
                        Sonuçlandır
                    </button>
                </div>
            </div>
        </div>


        <div id="image-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-50 p-4">
            <div class="max-w-4xl max-h-full">
                <img id="modal-image" class="max-w-full max-h-full rounded-lg">
            </div>
        </div>
    </div>

    <script type="module" src="src/js/main.js" defer></script>
</body>
</html>

