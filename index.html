<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kasamatik - Bahis Takip & Kasa Y√∂netimi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #8db3f0;
            --success-green: #10b981;
            --danger-red: #ef4444;
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            --sidebar-width: 280px;
            --sidebar-collapsed: 70px;
        }
        
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        .font-montserrat {
            font-family: 'Montserrat', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #292c30 0%, #000000 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
            border-color: rgba(139, 179, 240, 0.3);
        }
        
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(25px);
            border-right: 1px solid var(--glass-border);
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .sidebar.collapsed {
            width: var(--sidebar-collapsed);
        }
        
        .sidebar.collapsed .sidebar-item {
            justify-content: center;
            padding: 16px 8px;
            margin: 8px 4px;
        }
        
        .sidebar.collapsed .sidebar-icon {
            margin-right: 0;
            font-size: 22px;
        }
        
        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            margin: 8px 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .sidebar-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .sidebar-item.active {
            background: linear-gradient(135deg, var(--primary-blue), #6366f1);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 179, 240, 0.4);
        }
        
        .sidebar-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
            margin-right: 12px;
        }
        
        .sidebar-text {
            font-weight: 500;
            transition: opacity 0.3s ease;
        }
        
        .sidebar.collapsed .sidebar-text {
            opacity: 0;
            width: 0;
            margin: 0;
        }
        
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 24px;
            transition: margin-left 0.3s ease;
            min-height: 100vh;
        }
        
        .main-content.expanded {
            margin-left: var(--sidebar-collapsed);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-blue), #6366f1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .stat-card:hover::before {
            opacity: 1;
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #ffffff 0%, var(--primary-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gradient-button {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #6366f1 100%);
            box-shadow: 0 4px 15px rgba(139, 179, 240, 0.4);
            transition: all 0.3s ease;
            border: none;
            color: white;
            font-weight: 500;
        }
        
        .gradient-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 179, 240, 0.6);
        }
        
        .input-glass {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            border-radius: 8px;
        }
        
        .input-glass:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(139, 179, 240, 0.3);
            outline: none;
        }
        
        .form-card {
            grid-column: span 2;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 32px;
        }
        
        .history-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 24px;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .bet-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }
        
        .bet-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(4px);
        }
        
        .status-won {
            background: linear-gradient(135deg, var(--success-green), #059669);
            color: white;
        }
        
        .status-lost {
            background: linear-gradient(135deg, var(--danger-red), #dc2626);
            color: white;
        }
        
        .status-pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 12px;
            color: white;
            cursor: pointer;
        }
        
        .floating-action {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), #6366f1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            cursor: pointer;
            box-shadow: 0 8px 32px rgba(139, 179, 240, 0.4);
            transition: all 0.3s ease;
            z-index: 999;
        }
        
        .floating-action:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 40px rgba(139, 179, 240, 0.6);
        }
        
        .page-section {
            display: none;
        }
        
        .page-section.active {
            display: block;
        }
        
        .image-upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            border-radius: 12px;
        }
        
        .image-upload-area.dragover {
            border-color: var(--primary-blue);
            background: rgba(139, 179, 240, 0.1);
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                width: 280px;
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .main-content.expanded {
                margin-left: 0;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 16px;
            }
            
            .form-card {
                grid-column: span 1;
                padding: 20px;
            }
            
            .floating-action {
                bottom: 20px;
                right: 20px;
                width: 56px;
                height: 56px;
                font-size: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 16px;
            }
        }
        
        .notification {
            animation: slideInRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin-top: 32px;
            flex-wrap: wrap;
        }
        
        .pagination-btn {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            color: rgba(255, 255, 255, 0.7);
            padding: 12px 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            min-width: 44px;
            text-align: center;
        }
        
        .pagination-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            transform: translateY(-1px);
        }
        
        .pagination-btn.active {
            background: linear-gradient(135deg, var(--primary-blue), #6366f1);
            color: white;
            border-color: var(--primary-blue);
            box-shadow: 0 4px 15px rgba(139, 179, 240, 0.4);
        }
        
        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .pagination-btn:disabled:hover {
            background: var(--glass-bg);
            color: rgba(255, 255, 255, 0.7);
            transform: none;
        }
        
        .bet-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .bet-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .bet-card.won::before {
            background: linear-gradient(90deg, var(--success-green), #059669);
            opacity: 1;
        }
        
        .bet-card.lost::before {
            background: linear-gradient(90deg, var(--danger-red), #dc2626);
            opacity: 1;
        }
        
        .bet-card.pending::before {
            background: linear-gradient(90deg, #f59e0b, #d97706);
            opacity: 1;
        }
        
        .bet-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
            border-color: rgba(139, 179, 240, 0.3);
        }
        
        .slot-fields {
            display: none;
        }
        
        .sport-fields {
            display: block;
        }
    </style>
</head>
<body class="text-white">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobile-toggle">
        <span class="text-xl">‚ò∞</span>
    </button>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="p-6 border-b border-white border-opacity-10">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-xl">
                    üéØ
                </div>
                <div class="sidebar-text">
                    <h2 class="font-montserrat font-bold text-lg gradient-text">Kasamatik</h2>
                    <p class="text-xs text-gray-400">Akƒ±llƒ± Bahis Takibi</p>
                </div>
            </div>
        </div>
        
        <nav class="mt-6">
            <div class="sidebar-item active" data-section="dashboard">
                <span class="sidebar-icon">üè†</span>
                <span class="sidebar-text">Ana Panel</span>
            </div>
            <div class="sidebar-item" data-section="new-bet">
                <span class="sidebar-icon">‚ûï</span>
                <span class="sidebar-text">Yeni Kayƒ±t</span>
            </div>
            <div class="sidebar-item" data-section="history">
                <span class="sidebar-icon">üìã</span>
                <span class="sidebar-text">Ge√ßmi≈ü</span>
            </div>
            <div class="sidebar-item" data-section="statistics">
                <span class="sidebar-icon">üìä</span>
                <span class="sidebar-text">ƒ∞statistikler</span>
            </div>
            <div class="sidebar-item" data-section="settings">
                <span class="sidebar-icon">‚öôÔ∏è</span>
                <span class="sidebar-text">Ayarlar</span>
            </div>
        </nav>
        
        <div class="absolute bottom-6 left-6 right-6">
            <button id="sidebar-toggle" class="w-full sidebar-item justify-center">
                <span class="sidebar-icon">‚ÜîÔ∏è</span>
                <span class="sidebar-text">Daralt</span>
            </button>
            <div class="text-center mt-2">
                <p class="text-xs text-gray-500 sidebar-text">v1.4</p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="main-content">
        <!-- Notification Area -->
        <div id="notifications" class="fixed top-4 right-4 z-50 space-y-2"></div>

        <!-- Dashboard Section -->
        <div id="dashboard" class="page-section active">
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center text-xl">
                                üí∞
                            </div>
                            <div>
                                <h3 class="text-gray-300 font-medium text-sm">Toplam Kasa</h3>
                                <p class="text-2xl font-montserrat font-bold text-white" id="total-bankroll">0 ‚Ç∫</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-xs text-gray-400">Mevcut bakiye</div>
                </div>

                <div class="stat-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center text-xl">
                                üìà
                            </div>
                            <div>
                                <h3 class="text-gray-300 font-medium text-sm">Toplam Kar</h3>
                                <p class="text-2xl font-montserrat font-bold text-green-400" id="total-profit">0 ‚Ç∫</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-xs text-gray-400">Kazanƒ±lan miktar</div>
                </div>

                <div class="stat-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-r from-red-400 to-red-600 flex items-center justify-center text-xl">
                                üìâ
                            </div>
                            <div>
                                <h3 class="text-gray-300 font-medium text-sm">Toplam Zarar</h3>
                                <p class="text-2xl font-montserrat font-bold text-red-400" id="total-loss">0 ‚Ç∫</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-xs text-gray-400">Kaybedilen miktar</div>
                </div>

                <div class="stat-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center text-xl">
                                üé≤
                            </div>
                            <div>
                                <h3 class="text-gray-300 font-medium text-sm">Toplam Bahis</h3>
                                <p class="text-2xl font-montserrat font-bold text-white" id="total-bets">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-xs text-gray-400">Bahis sayƒ±sƒ±</div>
                </div>
            </div>

            <!-- Quick Actions Grid -->
            <div class="dashboard-grid">
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-lg font-montserrat font-bold gradient-text mb-4">‚ö° Hƒ±zlƒ± ƒ∞≈ülemler</h3>
                    <div class="space-y-3">
                        <button id="quick-add-btn" class="gradient-button w-full py-3 rounded-lg text-white font-medium">
                            üöÄ Hƒ±zlƒ± Bahis Ekle
                        </button>
                        <div class="flex space-x-2">
                            <input type="number" id="bankroll-update" placeholder="Miktar (‚Ç∫)" step="0.01"
                                   class="input-glass flex-1 p-3 rounded-lg text-gray-800">
                            <button id="bankroll-update-btn" class="gradient-button px-4 py-3 rounded-lg text-white">
                                üí∞
                            </button>
                        </div>
                    </div>
                </div>

                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-lg font-montserrat font-bold gradient-text mb-4">üìä √ñzet ƒ∞statistik</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300 text-sm">Kazanma Oranƒ±:</span>
                            <span class="text-green-400 font-bold" id="win-rate">0%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300 text-sm">Bekleyen Bahis:</span>
                            <span class="text-yellow-400 font-bold" id="pending-bets">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300 text-sm">Bu Ay Kar/Zarar:</span>
                            <span class="text-blue-400 font-bold" id="monthly-profit">0 ‚Ç∫</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Bets -->
            <div class="glass-card rounded-2xl p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-montserrat font-bold gradient-text">üìã Son Bahisler</h3>
                    <button id="show-history-btn" class="text-blue-400 hover:text-blue-300 text-sm">
                        T√ºm√ºn√º G√∂r ‚Üí
                    </button>
                </div>
                <div id="recent-bets" class="space-y-3">
                    <!-- Recent bets will be rendered here -->
                </div>
            </div>
        </div>

        <!-- New Bet Section -->
        <div id="new-bet" class="page-section">
            <div class="form-card">
                <h2 class="text-2xl font-montserrat font-bold gradient-text mb-6">
                    ‚ûï Yeni Bahis Kaydƒ±
                </h2>
                
                <form id="bet-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Platform</label>
                            <div class="flex space-x-2">
                                <select id="platform" required class="input-glass flex-1 p-3 rounded-lg text-gray-800">
                                    <option value="">Platform Se√ßin</option>
                                </select>
                                <button type="button" id="platform-manager-btn" class="gradient-button px-4 py-3 rounded-lg text-white">
                                    ‚öôÔ∏è
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Bahis T√ºr√º</label>
                            <select id="bet-type" required class="input-glass w-full p-3 rounded-lg text-gray-800">
                                <option value="">T√ºr Se√ßin</option>
                                <option value="Spor Bahis">Spor Bahis</option>
                                <option value="Canlƒ± Bahis">Canlƒ± Bahis</option>
                                <option value="Casino">Casino</option>
                                <option value="Slot">Slot</option>
                            </select>
                        </div>
                    </div>

                    <!-- Sport Betting Fields -->
                    <div id="sport-fields" class="sport-fields space-y-6">
                        <div>
                            <label class="block text-gray-300 text-sm font-medium mb-2">Bahis A√ßƒ±klamasƒ±</label>
                            <input type="text" id="description" placeholder="√ñrn: Galatasaray - Fenerbah√ße (1)" 
                                   class="input-glass w-full p-3 rounded-lg text-gray-800">
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Bahis Miktarƒ± (‚Ç∫)</label>
                                <input type="number" id="bet-amount" min="0" step="0.01" placeholder="100"
                                       class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>
                            
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Oran</label>
                                <input type="number" id="odds" min="1" step="0.01" placeholder="2.50"
                                       class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>
                            
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Tarih</label>
                                <input type="date" id="bet-date" 
                                       class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>
                        </div>
                    </div>

                    <!-- Slot Betting Fields -->
                    <div id="slot-fields" class="slot-fields space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Slot T√ºr√º</label>
                                <select id="slot-type" class="input-glass w-full p-3 rounded-lg text-gray-800">
                                    <option value="Normal Slot">Normal Slot</option>
                                    <option value="Freespin">Freespin</option>
                                    <option value="Happy Hour">Happy Hour</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Slot Oyunu</label>
                                <input type="text" id="slot-game" placeholder="√ñrn: Sweet Bonanza" 
                                       class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Spin Sayƒ±sƒ±</label>
                                <input type="number" id="spin-count" min="1" placeholder="100"
                                       class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>
                            
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Spin Ba≈üƒ±na Bahis (‚Ç∫)</label>
                                <input type="number" id="spin-bet" min="0" step="0.01" placeholder="1.00"
                                       class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>
                            
                            <div>
                                <label class="block text-gray-300 text-sm font-medium mb-2">Tarih</label>
                                <input type="date" id="slot-date" 
                                       class="input-glass w-full p-3 rounded-lg text-gray-800">
                            </div>
                        </div>

                        <div id="freespin-details" class="hidden">
                            <label class="block text-gray-300 text-sm font-medium mb-2">Freespin Detayƒ±</label>
                            <input type="text" id="freespin-detail" placeholder="√ñrn: 100 freespin x20 √ßarpan" 
                                   class="input-glass w-full p-3 rounded-lg text-gray-800">
                        </div>

                        <div id="happy-hour-details" class="hidden">
                            <label class="block text-gray-300 text-sm font-medium mb-2">Happy Hour Bonus Detayƒ±</label>
                            <input type="text" id="happy-hour-detail" placeholder="√ñrn: %50 bonus + 50 freespin" 
                                   class="input-glass w-full p-3 rounded-lg text-gray-800">
                        </div>
                    </div>

                    <!-- Image Upload Area -->
                    <div class="image-upload-area rounded-lg p-6 text-center" id="image-upload-area">
                        <div id="upload-area" class="space-y-3">
                            <div class="text-4xl">üì∏</div>
                            <p class="text-gray-300">Bahis kuponu resmini buraya s√ºr√ºkleyin veya Ctrl+V ile yapƒ±≈ütƒ±rƒ±n</p>
                            <input type="file" id="image-input" accept="image/*" class="hidden">
                            <button type="button" id="image-select-btn" class="gradient-button px-6 py-3 rounded-lg text-white">
                                üìÅ Dosya Se√ß
                            </button>
                        </div>
                        <div id="image-preview" class="hidden mt-4">
                            <img id="preview-img" class="max-w-full max-h-48 mx-auto rounded-lg">
                            <button type="button" id="remove-image-btn" class="mt-3 px-4 py-2 bg-red-600 text-white rounded-lg">
                                üóëÔ∏è Resmi Kaldƒ±r
                            </button>
                        </div>
                    </div>

                    <div class="flex justify-end space-x-4 pt-6">
                        <button type="button" id="reset-form-btn" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                            Temizle
                        </button>
                        <button type="submit" class="gradient-button px-8 py-3 rounded-lg text-white font-medium">
                            Bahis Ekle
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- History Section -->
        <div id="history" class="page-section">
            <div class="mb-8">
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 space-y-4 md:space-y-0">
                    <div>
                        <h2 class="text-3xl font-montserrat font-bold gradient-text mb-2">üìã Bahis Ge√ßmi≈üi</h2>
                        <p class="text-gray-400 text-sm">T√ºm bahis kayƒ±tlarƒ±nƒ±zƒ± g√∂r√ºnt√ºleyin ve y√∂netin</p>
                    </div>
                    <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-3">
                        <select id="status-filter" class="input-glass px-4 py-3 rounded-lg text-gray-800">
                            <option value="all">üîç T√ºm√º</option>
                            <option value="pending">‚è≥ Bekleyen</option>
                            <option value="won">‚úÖ Kazanan</option>
                            <option value="lost">‚ùå Kaybeden</option>
                        </select>
                        <button id="clear-all-btn" class="px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium">
                            üóëÔ∏è T√ºm Verileri Temizle
                        </button>
                    </div>
                </div>
                
                <!-- Stats Summary for History -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="glass-card rounded-xl p-4 text-center">
                        <div class="text-2xl mb-1" id="history-total-bets">0</div>
                        <div class="text-xs text-gray-400">Toplam Bahis</div>
                    </div>
                    <div class="glass-card rounded-xl p-4 text-center">
                        <div class="text-2xl mb-1 text-green-400" id="history-won-bets">0</div>
                        <div class="text-xs text-gray-400">Kazanan</div>
                    </div>
                    <div class="glass-card rounded-xl p-4 text-center">
                        <div class="text-2xl mb-1 text-red-400" id="history-lost-bets">0</div>
                        <div class="text-xs text-gray-400">Kaybeden</div>
                    </div>
                    <div class="glass-card rounded-xl p-4 text-center">
                        <div class="text-2xl mb-1 text-yellow-400" id="history-pending-bets">0</div>
                        <div class="text-xs text-gray-400">Bekleyen</div>
                    </div>
                </div>
                
                <div id="bet-history">
                    <!-- Bet history cards will be rendered here -->
                </div>
                
                <!-- Pagination -->
                <div id="pagination-container" class="pagination">
                    <!-- Pagination buttons will be rendered here -->
                </div>
            </div>
        </div>

        <!-- Statistics Section -->
        <div id="statistics" class="page-section">
            <div class="mb-8">
                <h2 class="text-3xl font-montserrat font-bold gradient-text mb-6">üìä ƒ∞statistikler</h2>
                
                <!-- Stats Grid -->
                <div class="stats-grid mb-8">
                    <div class="stat-card">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center text-xl">
                                    üéØ
                                </div>
                                <div>
                                    <h3 class="text-gray-300 font-medium text-sm">Toplam Bahis</h3>
                                    <p class="text-2xl font-montserrat font-bold text-white" id="stats-total-bets">0</p>
                                </div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-400">Toplam bahis sayƒ±sƒ±</div>
                    </div>

                    <div class="stat-card">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center text-xl">
                                    ‚úÖ
                                </div>
                                <div>
                                    <h3 class="text-gray-300 font-medium text-sm">Kazanma Oranƒ±</h3>
                                    <p class="text-2xl font-montserrat font-bold text-green-400" id="stats-win-rate">0%</p>
                                </div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-400">Ba≈üarƒ± y√ºzdesi</div>
                    </div>

                    <div class="stat-card">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center text-xl">
                                    üìä
                                </div>
                                <div>
                                    <h3 class="text-gray-300 font-medium text-sm">Ortalama Oran</h3>
                                    <p class="text-2xl font-montserrat font-bold text-yellow-400" id="stats-avg-odds">0.00</p>
                                </div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-400">Ortalama bahis oranƒ±</div>
                    </div>

                    <div class="stat-card">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-purple-400 to-pink-500 flex items-center justify-center text-xl">
                                    üíπ
                                </div>
                                <div>
                                    <h3 class="text-gray-300 font-medium text-sm">ROI</h3>
                                    <p class="text-2xl font-montserrat font-bold" id="stats-roi">0%</p>
                                </div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-400">Yatƒ±rƒ±m getirisi</div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="dashboard-grid">
                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">üìà Kar/Zarar Trendi</h3>
                        <div style="height: 300px;">
                            <canvas id="profitChart"></canvas>
                        </div>
                    </div>

                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">üè¢ Platform Daƒüƒ±lƒ±mƒ±</h3>
                        <div style="height: 300px;">
                            <canvas id="platformChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings" class="page-section">
            <div class="dashboard-grid">
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">üè¢ Platform Y√∂netimi</h3>
                    <div class="space-y-4">
                        <div class="flex space-x-2">
                            <input type="text" id="new-platform-name" placeholder="Platform adƒ±" 
                                   class="input-glass flex-1 p-3 rounded-lg text-gray-800">
                            <button id="add-platform-btn" class="gradient-button px-4 py-3 rounded-lg text-white">
                                ‚ûï
                            </button>
                        </div>
                        <div id="custom-platforms-list" class="space-y-2 max-h-48 overflow-y-auto">
                            <!-- Custom platforms will be listed here -->
                        </div>
                    </div>
                </div>

                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">üìä Veri Y√∂netimi</h3>
                    <div class="space-y-3">
                        <button id="import-btn" class="gradient-button w-full py-3 rounded-lg text-white">
                            üì• ƒ∞√ße Aktar
                        </button>
                        <button id="export-btn" class="gradient-button w-full py-3 rounded-lg text-white">
                            üì§ Dƒ±≈üa Aktar
                        </button>
                        <button id="clear-all-settings-btn" class="w-full py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                            üóëÔ∏è T√ºm Verileri Temizle
                        </button>
                    </div>
                </div>

                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">üí∞ Kasa Y√∂netimi</h3>
                    <div class="space-y-3">
                        <button id="reset-bankroll-btn" class="w-full py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors">
                            üîÑ Kasayƒ± Sƒ±fƒ±rla
                        </button>
                        <p class="text-xs text-gray-400">Bu i≈ülem mevcut bakiyeyi sƒ±fƒ±rlar ve geri alƒ±namaz.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="floating-action" id="floating-add-btn">
        ‚ûï
    </div>

    <!-- Modals -->
    <!-- Platform Manager Modal -->
    <div id="platform-manager-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
        <div class="glass-card rounded-2xl p-6 w-full max-w-md">
            <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Platform Y√∂netimi</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-gray-300 text-sm font-medium mb-2">Yeni Platform Ekle</label>
                    <div class="flex space-x-2">
                        <input type="text" id="new-platform-name-modal" placeholder="Platform adƒ±" 
                               class="input-glass flex-1 p-3 rounded-lg text-gray-800">
                        <button id="add-platform-modal-btn" class="gradient-button px-4 py-3 rounded-lg text-white">
                            ‚ûï
                        </button>
                    </div>
                </div>
                
                <div>
                    <label class="block text-gray-300 text-sm font-medium mb-2">√ñzel Platformlar</label>
                    <div id="custom-platforms-list-modal" class="space-y-2 max-h-32 overflow-y-auto">
                        <!-- Custom platforms will be listed here -->
                    </div>
                </div>
            </div>

            <div class="flex justify-end space-x-3 mt-6">
                <button id="close-platform-manager-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                    Kapat
                </button>
            </div>
        </div>
    </div>

    <!-- Quick Add Modal -->
    <div id="quick-add-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
        <div class="glass-card rounded-2xl p-6 w-full max-w-md">
            <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Hƒ±zlƒ± Bahis Ekle</h3>
            
            <form id="quick-add-form" class="space-y-4">
                <div>
                    <label class="block text-gray-300 text-sm font-medium mb-2">Platform</label>
                    <select id="quick-platform" required class="input-glass w-full p-3 rounded-lg text-gray-800">
                        <option value="">Platform Se√ßin</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Miktar (‚Ç∫)</label>
                        <input type="number" id="quick-amount" required min="0" step="0.01" placeholder="100"
                               class="input-glass w-full p-3 rounded-lg text-gray-800">
                    </div>
                    
                    <div>
                        <label class="block text-gray-300 text-sm font-medium mb-2">Oran</label>
                        <input type="number" id="quick-odds" required min="1" step="0.01" placeholder="2.50"
                               class="input-glass w-full p-3 rounded-lg text-gray-800">
                    </div>
                </div>

                <div class="image-upload-area rounded-lg p-4 text-center" id="quick-image-upload-area">
                    <div id="quick-upload-area" class="space-y-2">
                        <div class="text-2xl">üì∏</div>
                        <p class="text-gray-300 text-sm">Kupon resmi s√ºr√ºkleyin veya Ctrl+V ile yapƒ±≈ütƒ±rƒ±n</p>
                        <input type="file" id="quick-image-input" accept="image/*" class="hidden">
                        <button type="button" id="quick-image-select-btn" class="gradient-button px-3 py-2 rounded-lg text-white text-sm">
                            üìÅ Se√ß
                        </button>
                    </div>
                    <div id="quick-image-preview" class="hidden mt-3">
                        <img id="quick-preview-img" class="max-w-full max-h-32 mx-auto rounded-lg">
                        <button type="button" id="quick-remove-image-btn" class="mt-2 px-2 py-1 bg-red-600 text-white rounded text-xs">
                            üóëÔ∏è Kaldƒ±r
                        </button>
                    </div>
                </div>

                <div class="flex justify-end space-x-3">
                    <button type="button" id="close-quick-add-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                        ƒ∞ptal
                    </button>
                    <button type="submit" class="gradient-button px-4 py-2 rounded-lg text-white">
                        Ekle
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="import-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
        <div class="glass-card rounded-2xl p-6 w-full max-w-md">
            <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Veri ƒ∞√ße Aktarma</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-gray-300 text-sm font-medium mb-2">JSON Dosyasƒ± Se√ß</label>
                    <input type="file" id="import-file" accept=".json" class="input-glass w-full p-3 rounded-lg text-gray-800">
                </div>
                
                <div>
                    <label class="block text-gray-300 text-sm font-medium mb-2">Veya JSON Metni Yapƒ±≈ütƒ±r</label>
                    <textarea id="import-text" placeholder="JSON verisini buraya yapƒ±≈ütƒ±rƒ±n..." 
                              class="input-glass w-full p-3 rounded-lg text-gray-800 h-32 resize-none"></textarea>
                </div>
                
                <div>
                    <label class="block text-gray-300 text-sm font-medium mb-2">ƒ∞√ße Aktarma Modu</label>
                    <select id="import-mode" class="input-glass w-full p-3 rounded-lg text-gray-800">
                        <option value="merge">Birle≈ütir (mevcut veriler korunur)</option>
                        <option value="replace">Deƒüi≈ütir (mevcut veriler silinir)</option>
                    </select>
                </div>
            </div>

            <div class="flex justify-end space-x-3 mt-6">
                <button id="close-import-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                    ƒ∞ptal
                </button>
                <button id="import-data-btn" class="gradient-button px-4 py-2 rounded-lg text-white">
                    ƒ∞√ße Aktar
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
        <div class="glass-card rounded-2xl p-6 w-full max-w-md">
            <h3 class="text-xl font-montserrat font-bold gradient-text mb-4">Bahis G√ºncelle</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-gray-300 text-sm font-medium mb-2">Durum</label>
                    <select id="edit-status" class="input-glass w-full p-3 rounded-lg text-gray-800">
                        <option value="pending">Bekleyen</option>
                        <option value="won">Kazandƒ±</option>
                        <option value="lost">Kaybetti</option>
                    </select>
                </div>
                
                <div id="win-amount-section" class="hidden">
                    <label class="block text-gray-300 text-sm font-medium mb-2">Kazan√ß Miktarƒ± (‚Ç∫)</label>
                    <input type="number" id="edit-win-amount" min="0" step="0.01" 
                           class="input-glass w-full p-3 rounded-lg text-gray-800">
                </div>
            </div>

            <div class="flex justify-end space-x-3 mt-6">
                <button id="close-edit-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                    ƒ∞ptal
                </button>
                <button id="save-edit-btn" class="gradient-button px-4 py-2 rounded-lg text-white">
                    Kaydet
                </button>
            </div>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="image-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-50 p-4">
        <div class="max-w-4xl max-h-full">
            <img id="modal-image" class="max-w-full max-h-full rounded-lg">
        </div>
    </div>

    <script>
        // Global variables
        let bets = [];
        let customPlatforms = [];
        let editingBetId = null;
        let currentImageData = null;
        let quickImageData = null;
        let profitChart, platformChart;
        let currentSection = 'dashboard';
        let currentPage = 1;
        const itemsPerPage = 10;

        const defaultPlatforms = [
            "Artemisbet", "Asyabahis", "Baywin", "Betgit", "Betorspin", "Betsin", "Betsmove", "Bets10",
            "Bibubet", "Bilyoner", "Capitolbet", "Cepbahis", "Dumanbet", "Gora", "Holigan", "ƒ∞majbet",
            "ƒ∞stanbulbahis", "Jojobet", "Kavbet", "Kingroyal", "Kralbet", "Ligobet", "Lunabet", "Madridbet",
            "Makrobet", "Maltcasino", "Mariobet", "Matbet", "Matixbet", "Maxwin", "Megabahis", "Meritking",
            "Mersobahis", "Millibahis", "Misli", "Nakitbahis", "Nesine", "Odeonbet", "Olabahis", "Onwin",
            "Padisahbet", "Parobet", "Pinbahis", "Pusulabet", "Risebet", "Sekabet", "Sonbahis", "Starz",
            "Superbet", "Superbahis", "S√ºperbahis", "Tarafbet", "Trendbet", "Tuttur", "Yedibahis", "Zirvebet", "Zlot"
        ];

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setupEventListeners();
            initializeUI();
        });

        function loadData() {
            try {
                bets = JSON.parse(localStorage.getItem('futuristic-bets')) || [];
                customPlatforms = JSON.parse(localStorage.getItem('custom-platforms')) || [];
            } catch (error) {
                console.error('Veri y√ºkleme hatasƒ±:', error);
                bets = [];
                customPlatforms = [];
            }
        }

        function saveData() {
            try {
                localStorage.setItem('futuristic-bets', JSON.stringify(bets));
                localStorage.setItem('custom-platforms', JSON.stringify(customPlatforms));
            } catch (error) {
                console.error('Veri kaydetme hatasƒ±:', error);
                showNotification('Veriler kaydedilemedi!', 'error');
            }
        }

        function setupEventListeners() {
            // Sidebar navigation
            document.querySelectorAll('.sidebar-item[data-section]').forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    showSection(section);
                });
            });

            // Sidebar toggle
            document.getElementById('sidebar-toggle')?.addEventListener('click', toggleSidebar);
            document.getElementById('mobile-toggle')?.addEventListener('click', toggleMobileSidebar);

            // Quick add buttons
            document.getElementById('quick-add-btn')?.addEventListener('click', openQuickAddModal);
            document.getElementById('floating-add-btn')?.addEventListener('click', openQuickAddModal);

            // Bankroll management
            document.getElementById('bankroll-update-btn')?.addEventListener('click', updateBankroll);

            // Navigation
            document.getElementById('show-history-btn')?.addEventListener('click', () => showSection('history'));

            // Platform management
            document.getElementById('platform-manager-btn')?.addEventListener('click', openPlatformManager);
            document.getElementById('add-platform-btn')?.addEventListener('click', addCustomPlatform);

            // Form handling
            document.getElementById('bet-type')?.addEventListener('change', toggleBetTypeFields);
            document.getElementById('slot-type')?.addEventListener('change', toggleSlotDetails);
            document.getElementById('bet-form')?.addEventListener('submit', handleBetFormSubmit);
            document.getElementById('reset-form-btn')?.addEventListener('click', resetForm);

            // History
            document.getElementById('status-filter')?.addEventListener('change', () => {
                currentPage = 1;
                renderHistory();
            });
            document.getElementById('clear-all-btn')?.addEventListener('click', clearAllData);

            // Settings
            document.getElementById('import-btn')?.addEventListener('click', openImportModal);
            document.getElementById('export-btn')?.addEventListener('click', exportData);
            document.getElementById('clear-all-settings-btn')?.addEventListener('click', clearAllData);
            document.getElementById('reset-bankroll-btn')?.addEventListener('click', resetBankroll);

            // Modal event listeners
            setupModalEventListeners();

            // Image upload
            setupImageUpload();

            // Keyboard shortcuts
            setupKeyboardShortcuts();
        }

        function setupModalEventListeners() {
            // Platform manager modal
            document.getElementById('close-platform-manager-btn')?.addEventListener('click', closePlatformManager);
            document.getElementById('add-platform-modal-btn')?.addEventListener('click', addCustomPlatformFromModal);

            // Quick add modal
            document.getElementById('close-quick-add-btn')?.addEventListener('click', closeQuickAddModal);
            document.getElementById('quick-add-form')?.addEventListener('submit', handleQuickAddSubmit);

            // Import modal
            document.getElementById('close-import-btn')?.addEventListener('click', closeImportModal);
            document.getElementById('import-data-btn')?.addEventListener('click', importData);

            // Edit modal
            document.getElementById('close-edit-btn')?.addEventListener('click', closeEditModal);
            document.getElementById('save-edit-btn')?.addEventListener('click', saveEdit);
            document.getElementById('edit-status')?.addEventListener('change', toggleWinAmountSection);

            // Image modal
            document.getElementById('image-modal')?.addEventListener('click', closeImageModal);
        }

        function setupKeyboardShortcuts() {
            document.getElementById('new-platform-name')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addCustomPlatform();
            });

            document.getElementById('new-platform-name-modal')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addCustomPlatformFromModal();
            });

            document.getElementById('bankroll-update')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') updateBankroll();
            });

            document.addEventListener('paste', handleGlobalPaste);
        }

        function setupImageUpload() {
            // Main form image upload
            const imageInput = document.getElementById('image-input');
            const imageSelectBtn = document.getElementById('image-select-btn');
            const removeImageBtn = document.getElementById('remove-image-btn');
            const uploadArea = document.getElementById('image-upload-area');

            imageSelectBtn?.addEventListener('click', () => imageInput?.click());
            imageInput?.addEventListener('change', function(e) {
                if (e.target.files[0]) handleImageFile(e.target.files[0]);
            });
            removeImageBtn?.addEventListener('click', removeImage);

            uploadArea?.addEventListener('dragover', handleDragOver);
            uploadArea?.addEventListener('dragleave', handleDragLeave);
            uploadArea?.addEventListener('drop', handleDrop);

            // Quick add image upload
            const quickImageInput = document.getElementById('quick-image-input');
            const quickImageSelectBtn = document.getElementById('quick-image-select-btn');
            const quickRemoveImageBtn = document.getElementById('quick-remove-image-btn');
            const quickUploadArea = document.getElementById('quick-image-upload-area');

            quickImageSelectBtn?.addEventListener('click', () => quickImageInput?.click());
            quickImageInput?.addEventListener('change', function(e) {
                if (e.target.files[0]) handleQuickImageFile(e.target.files[0]);
            });
            quickRemoveImageBtn?.addEventListener('click', removeQuickImage);

            quickUploadArea?.addEventListener('dragover', handleQuickDragOver);
            quickUploadArea?.addEventListener('dragleave', handleQuickDragLeave);
            quickUploadArea?.addEventListener('drop', handleQuickDrop);
        }

        function initializeUI() {
            setDefaultDates();
            populatePlatformOptions();
            renderCustomPlatforms();
            updateStats();
            renderHistory();
            renderRecentBets();
        }

        // Notification system
        function showNotification(message, type = 'info', duration = 3000) {
            const notification = document.createElement('div');
            const colors = {
                success: 'from-green-500 to-emerald-600',
                error: 'from-red-500 to-red-600',
                warning: 'from-yellow-500 to-orange-600',
                info: 'from-blue-500 to-blue-600'
            };
            
            notification.className = `notification bg-gradient-to-r ${colors[type]} text-white px-6 py-4 rounded-xl shadow-lg max-w-sm glass-card`;
            notification.innerHTML = `
                <div class="flex items-center justify-between">
                    <span class="font-medium">${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-3 text-white hover:text-gray-200 text-xl">
                        √ó
                    </button>
                </div>
            `;
            
            const notificationsContainer = document.getElementById('notifications');
            notificationsContainer?.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, duration);
        }

        // Section management
        function showSection(sectionName) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            const targetSection = document.getElementById(sectionName);
            targetSection?.classList.add('active');
            
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeItem = document.querySelector(`[data-section="${sectionName}"]`);
            activeItem?.classList.add('active');
            
            currentSection = sectionName;
            
            const sidebar = document.getElementById('sidebar');
            sidebar?.classList.remove('mobile-open');
            
            if (sectionName === 'statistics') {
                setTimeout(() => {
                    updateCharts();
                    updateStatisticsOverview();
                }, 100);
            }
        }

        // Sidebar functionality
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');
            
            sidebar?.classList.toggle('collapsed');
            mainContent?.classList.toggle('expanded');
        }

        function toggleMobileSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar?.classList.toggle('mobile-open');
        }

        // Platform management
        function populatePlatformOptions() {
            const allPlatforms = [...defaultPlatforms, ...customPlatforms].sort();
            const platformSelect = document.getElementById('platform');
            const quickPlatformSelect = document.getElementById('quick-platform');
            
            if (platformSelect) {
                platformSelect.innerHTML = '<option value="">Platform Se√ßin</option>';
                allPlatforms.forEach(platform => {
                    const option = document.createElement('option');
                    option.value = platform;
                    option.textContent = platform;
                    platformSelect.appendChild(option);
                });
            }
            
            if (quickPlatformSelect) {
                quickPlatformSelect.innerHTML = '<option value="">Platform Se√ßin</option>';
                allPlatforms.forEach(platform => {
                    const option = document.createElement('option');
                    option.value = platform;
                    option.textContent = platform;
                    quickPlatformSelect.appendChild(option);
                });
            }
        }

        function addCustomPlatform() {
            const input = document.getElementById('new-platform-name');
            if (!input) return;
            
            const name = input.value.trim();
            if (name && !customPlatforms.includes(name) && !defaultPlatforms.includes(name)) {
                customPlatforms.push(name);
                saveData();
                input.value = '';
                renderCustomPlatforms();
                populatePlatformOptions();
                showNotification(`‚úÖ ${name} platformu eklendi!`, 'success');
            }
        }

        function addCustomPlatformFromModal() {
            const input = document.getElementById('new-platform-name-modal');
            if (!input) return;
            
            const name = input.value.trim();
            if (name && !customPlatforms.includes(name) && !defaultPlatforms.includes(name)) {
                customPlatforms.push(name);
                saveData();
                input.value = '';
                renderCustomPlatforms();
                renderCustomPlatformsModal();
                populatePlatformOptions();
                showNotification(`‚úÖ ${name} platformu eklendi!`, 'success');
            }
        }

        function removeCustomPlatform(platform) {
            customPlatforms = customPlatforms.filter(p => p !== platform);
            saveData();
            renderCustomPlatforms();
            renderCustomPlatformsModal();
            populatePlatformOptions();
            showNotification(`üóëÔ∏è ${platform} platformu silindi`, 'error');
        }

        function renderCustomPlatforms() {
            const container = document.getElementById('custom-platforms-list');
            if (!container) return;
            
            if (customPlatforms.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-sm">Hen√ºz √∂zel platform eklenmemi≈ü</p>';
                return;
            }
            
            container.innerHTML = customPlatforms.map(platform => `
                <div class="flex justify-between items-center bg-gray-700 bg-opacity-50 p-3 rounded-lg">
                    <span class="text-white text-sm">${platform}</span>
                    <button onclick="removeCustomPlatform('${platform}')" class="text-red-400 hover:text-red-300 text-sm px-2 py-1 rounded">
                        üóëÔ∏è
                    </button>
                </div>
            `).join('');
        }

        function renderCustomPlatformsModal() {
            const container = document.getElementById('custom-platforms-list-modal');
            if (!container) return;
            
            if (customPlatforms.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-sm">Hen√ºz √∂zel platform eklenmemi≈ü</p>';
                return;
            }
            
            container.innerHTML = customPlatforms.map(platform => `
                <div class="flex justify-between items-center bg-gray-700 bg-opacity-50 p-2 rounded">
                    <span class="text-white text-sm">${platform}</span>
                    <button onclick="removeCustomPlatform('${platform}')" class="text-red-400 hover:text-red-300 text-sm">
                        üóëÔ∏è
                    </button>
                </div>
            `).join('');
        }

        // Modal management
        function openPlatformManager() {
            const modal = document.getElementById('platform-manager-modal');
            modal?.classList.remove('hidden');
            modal?.classList.add('flex');
            renderCustomPlatformsModal();
        }

        function closePlatformManager() {
            const modal = document.getElementById('platform-manager-modal');
            modal?.classList.add('hidden');
            modal?.classList.remove('flex');
        }

        function openQuickAddModal() {
            const modal = document.getElementById('quick-add-modal');
            modal?.classList.remove('hidden');
            modal?.classList.add('flex');
        }

        function closeQuickAddModal() {
            const modal = document.getElementById('quick-add-modal');
            modal?.classList.add('hidden');
            modal?.classList.remove('flex');
            
            const form = document.getElementById('quick-add-form');
            form?.reset();
            removeQuickImage();
        }

        function openImportModal() {
            const modal = document.getElementById('import-modal');
            modal?.classList.remove('hidden');
            modal?.classList.add('flex');
        }

        function closeImportModal() {
            const modal = document.getElementById('import-modal');
            modal?.classList.add('hidden');
            modal?.classList.remove('flex');
            
            const fileInput = document.getElementById('import-file');
            const textInput = document.getElementById('import-text');
            if (fileInput) fileInput.value = '';
            if (textInput) textInput.value = '';
        }

        function openEditModal(id) {
            editingBetId = id;
            const bet = bets.find(b => b.id === id);
            if (!bet) return;

            const statusSelect = document.getElementById('edit-status');
            const winAmountInput = document.getElementById('edit-win-amount');
            
            if (statusSelect) statusSelect.value = bet.status;
            if (winAmountInput) winAmountInput.value = bet.winAmount;
            
            toggleWinAmountSection();
            
            const modal = document.getElementById('edit-modal');
            modal?.classList.remove('hidden');
            modal?.classList.add('flex');
        }

        function closeEditModal() {
            const modal = document.getElementById('edit-modal');
            modal?.classList.add('hidden');
            modal?.classList.remove('flex');
            editingBetId = null;
        }

        function showImageModal(imageSrc) {
            const modalImage = document.getElementById('modal-image');
            const modal = document.getElementById('image-modal');
            
            if (modalImage && modal) {
                modalImage.src = imageSrc;
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            }
        }

        function closeImageModal() {
            const modal = document.getElementById('image-modal');
            modal?.classList.add('hidden');
            modal?.classList.remove('flex');
        }

        // Form handling
        function setDefaultDates() {
            const today = new Date().toISOString().split('T')[0];
            const betDate = document.getElementById('bet-date');
            const slotDate = document.getElementById('slot-date');
            
            if (betDate) betDate.value = today;
            if (slotDate) slotDate.value = today;
        }

        function toggleBetTypeFields() {
            const betType = document.getElementById('bet-type');
            const sportFields = document.getElementById('sport-fields');
            const slotFields = document.getElementById('slot-fields');
            
            if (!betType || !sportFields || !slotFields) return;
            
            if (betType.value === 'Slot') {
                sportFields.style.display = 'none';
                slotFields.style.display = 'block';
                
                document.getElementById('slot-game').required = true;
                document.getElementById('spin-count').required = true;
                document.getElementById('spin-bet').required = true;
                document.getElementById('slot-date').required = true;
                
                document.getElementById('description').required = false;
                document.getElementById('bet-amount').required = false;
                document.getElementById('odds').required = false;
                document.getElementById('bet-date').required = false;
            } else {
                sportFields.style.display = 'block';
                slotFields.style.display = 'none';
                
                document.getElementById('description').required = true;
                document.getElementById('bet-amount').required = true;
                document.getElementById('odds').required = true;
                document.getElementById('bet-date').required = true;
                
                document.getElementById('slot-game').required = false;
                document.getElementById('spin-count').required = false;
                document.getElementById('spin-bet').required = false;
                document.getElementById('slot-date').required = false;
            }
        }

        function toggleSlotDetails() {
            const slotType = document.getElementById('slot-type');
            const freespinDetails = document.getElementById('freespin-details');
            const happyHourDetails = document.getElementById('happy-hour-details');
            
            if (!slotType || !freespinDetails || !happyHourDetails) return;
            
            freespinDetails.classList.add('hidden');
            happyHourDetails.classList.add('hidden');
            
            if (slotType.value === 'Freespin') {
                freespinDetails.classList.remove('hidden');
            } else if (slotType.value === 'Happy Hour') {
                happyHourDetails.classList.remove('hidden');
            }
        }

        function toggleWinAmountSection() {
            const status = document.getElementById('edit-status');
            const winAmountSection = document.getElementById('win-amount-section');
            
            if (!status || !winAmountSection) return;
            
            if (status.value === 'won') {
                winAmountSection.classList.remove('hidden');
            } else {
                winAmountSection.classList.add('hidden');
            }
        }

        function handleBetFormSubmit(e) {
            e.preventDefault();
            
            const betType = document.getElementById('bet-type').value;
            let formData;
            
            if (betType === 'Slot') {
                const spinCount = parseInt(document.getElementById('spin-count').value);
                const spinBet = parseFloat(document.getElementById('spin-bet').value);
                const totalAmount = spinCount * spinBet;
                
                formData = {
                    id: Date.now(),
                    platform: document.getElementById('platform').value,
                    betType: betType,
                    description: `${document.getElementById('slot-game').value} - ${document.getElementById('slot-type').value}`,
                    betAmount: totalAmount,
                    odds: 1,
                    date: new Date(document.getElementById('slot-date').value).toLocaleDateString('tr-TR'),
                    status: 'pending',
                    winAmount: 0,
                    profitLoss: 0,
                    image: currentImageData,
                    slotDetails: {
                        slotType: document.getElementById('slot-type').value,
                        slotGame: document.getElementById('slot-game').value,
                        spinCount: spinCount,
                        spinBet: spinBet,
                        freespinDetail: document.getElementById('freespin-detail').value,
                        happyHourDetail: document.getElementById('happy-hour-detail').value
                    }
                };
            } else {
                formData = {
                    id: Date.now(),
                    platform: document.getElementById('platform').value,
                    betType: betType,
                    description: document.getElementById('description').value,
                    betAmount: parseFloat(document.getElementById('bet-amount').value),
                    odds: parseFloat(document.getElementById('odds').value),
                    date: new Date(document.getElementById('bet-date').value).toLocaleDateString('tr-TR'),
                    status: 'pending',
                    winAmount: 0,
                    profitLoss: 0,
                    image: currentImageData
                };
            }

            bets.push(formData);
            saveData();
            updateStats();
            renderHistory();
            renderRecentBets();
            resetForm();
            
            showNotification('üéØ Yeni bahis ba≈üarƒ±yla eklendi!', 'success');
        }

        function handleQuickAddSubmit(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                platform: document.getElementById('quick-platform').value,
                betType: 'Spor Bahis',
                description: 'Hƒ±zlƒ± bahis',
                betAmount: parseFloat(document.getElementById('quick-amount').value),
                odds: parseFloat(document.getElementById('quick-odds').value),
                date: new Date().toLocaleDateString('tr-TR'),
                status: 'pending',
                winAmount: 0,
                profitLoss: 0,
                image: quickImageData
            };

            bets.push(formData);
            saveData();
            updateStats();
            renderHistory();
            renderRecentBets();
            closeQuickAddModal();
            
            showNotification('üöÄ Hƒ±zlƒ± bahis eklendi!', 'success');
        }

        function resetForm() {
            const form = document.getElementById('bet-form');
            form?.reset();
            setDefaultDates();
            removeImage();
            toggleBetTypeFields();
        }

        // Image handling
        function handleGlobalPaste(e) {
            const items = e.clipboardData.items;
            for (let item of items) {
                if (item.type.indexOf('image') !== -1) {
                    const file = item.getAsFile();
                    
                    const quickModal = document.getElementById('quick-add-modal');
                    if (quickModal && !quickModal.classList.contains('hidden')) {
                        handleQuickImageFile(file);
                    } else if (currentSection === 'new-bet') {
                        handleImageFile(file);
                    }
                    break;
                }
            }
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            if (e.dataTransfer.files[0]) {
                handleImageFile(e.dataTransfer.files[0]);
            }
        }

        function handleImageFile(file) {
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentImageData = e.target.result;
                    const previewImg = document.getElementById('preview-img');
                    const uploadArea = document.getElementById('upload-area');
                    const imagePreview = document.getElementById('image-preview');
                    
                    if (previewImg) previewImg.src = currentImageData;
                    uploadArea?.classList.add('hidden');
                    imagePreview?.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }

        function removeImage() {
            currentImageData = null;
            const uploadArea = document.getElementById('upload-area');
            const imagePreview = document.getElementById('image-preview');
            const imageInput = document.getElementById('image-input');
            
            uploadArea?.classList.remove('hidden');
            imagePreview?.classList.add('hidden');
            if (imageInput) imageInput.value = '';
        }

        function handleQuickDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleQuickDragLeave(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
        }

        function handleQuickDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            if (e.dataTransfer.files[0]) {
                handleQuickImageFile(e.dataTransfer.files[0]);
            }
        }

        function handleQuickImageFile(file) {
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    quickImageData = e.target.result;
                    const previewImg = document.getElementById('quick-preview-img');
                    const uploadArea = document.getElementById('quick-upload-area');
                    const imagePreview = document.getElementById('quick-image-preview');
                    
                    if (previewImg) previewImg.src = quickImageData;
                    uploadArea?.classList.add('hidden');
                    imagePreview?.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }

        function removeQuickImage() {
            quickImageData = null;
            const uploadArea = document.getElementById('quick-upload-area');
            const imagePreview = document.getElementById('quick-image-preview');
            const imageInput = document.getElementById('quick-image-input');
            
            uploadArea?.classList.remove('hidden');
            imagePreview?.classList.add('hidden');
            if (imageInput) imageInput.value = '';
        }

        // Bankroll management
        function updateBankroll() {
            const input = document.getElementById('bankroll-update');
            if (!input) return;
            
            const amount = parseFloat(input.value);
            if (isNaN(amount) || amount === 0) return;
            
            const formData = {
                id: Date.now(),
                platform: 'Kasa G√ºncelleme',
                betType: 'Kasa ƒ∞≈ülemi',
                description: amount > 0 ? 'Para Ekleme' : 'Para √áƒ±karma',
                betAmount: 0,
                odds: 1,
                date: new Date().toLocaleDateString('tr-TR'),
                status: 'won',
                winAmount: amount,
                profitLoss: amount,
                image: null
            };

            bets.push(formData);
            saveData();
            updateStats();
            renderHistory();
            renderRecentBets();
            input.value = '';
            
            showNotification(`üí∞ Kasa ${amount > 0 ? 'artƒ±rƒ±ldƒ±' : 'azaltƒ±ldƒ±'}: ${amount.toFixed(2)} ‚Ç∫`, 'success');
        }

        function resetBankroll() {
            if (confirm('Kasayƒ± sƒ±fƒ±rlamak istediƒüinizden emin misiniz?\n\nBu i≈ülem mevcut bakiyeyi 0 yapacak ve geri alƒ±namaz!')) {
                const currentBankroll = bets.reduce((sum, bet) => sum + bet.profitLoss, 0);
                
                if (currentBankroll !== 0) {
                    const formData = {
                        id: Date.now(),
                        platform: 'Kasa Sƒ±fƒ±rlama',
                        betType: 'Kasa ƒ∞≈ülemi',
                        description: 'Kasa Sƒ±fƒ±rlama',
                        betAmount: 0,
                        odds: 1,
                        date: new Date().toLocaleDateString('tr-TR'),
                        status: 'won',
                        winAmount: -currentBankroll,
                        profitLoss: -currentBankroll,
                        image: null
                    };

                    bets.push(formData);
                    saveData();
                    updateStats();
                    renderHistory();
                    renderRecentBets();
                    
                    showNotification('üîÑ Kasa sƒ±fƒ±rlandƒ±!', 'warning');
                } else {
                    showNotification('‚ÑπÔ∏è Kasa zaten sƒ±fƒ±r durumda', 'info');
                }
            }
        }

        // Global functions for button clicks
        window.markAsWon = function(id) {
            const bet = bets.find(b => b.id === id);
            if (!bet) return;
            
            const expectedWin = bet.betAmount * bet.odds;
            bet.status = 'won';
            bet.winAmount = expectedWin;
            bet.profitLoss = expectedWin - bet.betAmount;
            
            saveData();
            updateStats();
            renderHistory();
            renderRecentBets();
            
            showNotification(`üéâ Tebrikler! +${bet.profitLoss.toFixed(2)} ‚Ç∫ kazandƒ±nƒ±z!`, 'success');
        };

        window.markAsLost = function(id) {
            const bet = bets.find(b => b.id === id);
            if (!bet) return;
            
            bet.status = 'lost';
            bet.winAmount = 0;
            bet.profitLoss = -bet.betAmount;
            
            saveData();
            updateStats();
            renderHistory();
            renderRecentBets();
            
            showNotification(`üòî Bahis kaybedildi: ${bet.profitLoss.toFixed(2)} ‚Ç∫`, 'error');
        };

        window.deleteBet = function(id) {
            if (confirm('Bu bahisi silmek istediƒüinizden emin misiniz?')) {
                bets = bets.filter(bet => bet.id !== id);
                saveData();
                updateStats();
                renderHistory();
                renderRecentBets();
                showNotification('üóëÔ∏è Bahis silindi', 'error');
            }
        };

        window.openEditModal = openEditModal;
        window.showImageModal = showImageModal;
        window.removeCustomPlatform = removeCustomPlatform;

        function saveEdit() {
            const bet = bets.find(b => b.id === editingBetId);
            if (!bet) return;

            const statusSelect = document.getElementById('edit-status');
            const winAmountInput = document.getElementById('edit-win-amount');
            
            if (!statusSelect) return;
            
            const status = statusSelect.value;
            const winAmount = parseFloat(winAmountInput?.value || 0);

            bet.status = status;
            bet.winAmount = winAmount;

            if (status === 'won') {
                bet.profitLoss = winAmount - bet.betAmount;
            } else if (status === 'lost') {
                bet.profitLoss = -bet.betAmount;
            } else {
                bet.profitLoss = 0;
            }

            saveData();
            updateStats();
            renderHistory();
            renderRecentBets();
            closeEditModal();
            
            if (status === 'won') {
                showNotification(`üéâ Tebrikler! +${bet.profitLoss.toFixed(2)} ‚Ç∫ kazandƒ±nƒ±z!`, 'success');
            } else if (status === 'lost') {
                showNotification(`üòî Bahis kaybedildi: ${bet.profitLoss.toFixed(2)} ‚Ç∫`, 'error');
            }
        }

        // Data management
        function clearAllData() {
            if (confirm('T√úM VERƒ∞LERƒ∞ Sƒ∞LMEK ƒ∞STEDƒ∞ƒûƒ∞Nƒ∞ZDEN EMƒ∞N Mƒ∞Sƒ∞Nƒ∞Z?\n\nBu i≈ülem geri alƒ±namaz!')) {
                if (confirm('Son kez soruyorum: T√ºm bahis ge√ßmi≈üi ve kasa bilgileri silinecek. Devam edilsin mi?')) {
                    bets = [];
                    localStorage.removeItem('futuristic-bets');
                    updateStats();
                    renderHistory();
                    renderRecentBets();
                    
                    showNotification('üóëÔ∏è T√ºm veriler silindi!', 'error');
                }
            }
        }

        function exportData() {
            const data = {
                bets: bets,
                customPlatforms: customPlatforms,
                exportDate: new Date().toISOString(),
                version: '65'
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `kasamatik-backup-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            showNotification('üì§ Veriler ba≈üarƒ±yla dƒ±≈üa aktarƒ±ldƒ±!', 'success');
        }

        function importData() {
            const fileInput = document.getElementById('import-file');
            const textInput = document.getElementById('import-text');
            const modeSelect = document.getElementById('import-mode');
            
            if (!modeSelect) return;
            
            const mode = modeSelect.value;
            
            if (fileInput && fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    processImportData(e.target.result, mode);
                };
                reader.readAsText(fileInput.files[0]);
            } else if (textInput && textInput.value.trim()) {
                processImportData(textInput.value.trim(), mode);
            } else {
                showNotification('‚ùå L√ºtfen bir dosya se√ßin veya JSON metni yapƒ±≈ütƒ±rƒ±n', 'error');
            }
        }

        function processImportData(jsonString, mode) {
            try {
                const data = JSON.parse(jsonString);
                
                if (data.bets && Array.isArray(data.bets)) {
                    if (mode === 'replace') {
                        bets = data.bets;
                    } else {
                        const existingIds = new Set(bets.map(bet => bet.id));
                        const newBets = data.bets.filter(bet => !existingIds.has(bet.id));
                        bets = [...bets, ...newBets];
                    }
                    
                    saveData();
                    updateStats();
                    renderHistory();
                    renderRecentBets();
                    closeImportModal();
                    
                    showNotification(`üì• ${data.bets.length} bahis ba≈üarƒ±yla i√ße aktarƒ±ldƒ±!`, 'success');
                } else {
                    showNotification('‚ùå Ge√ßersiz JSON formatƒ±', 'error');
                }
            } catch (error) {
                showNotification('‚ùå JSON parse hatasƒ±: ' + error.message, 'error');
            }
        }

        // Statistics and rendering
        function updateStats() {
            const totalBets = bets.length;
            const totalProfit = bets.reduce((sum, bet) => sum + (bet.profitLoss > 0 ? bet.profitLoss : 0), 0);
            const totalLoss = Math.abs(bets.reduce((sum, bet) => sum + (bet.profitLoss < 0 ? bet.profitLoss : 0), 0));
            const totalBankroll = bets.reduce((sum, bet) => sum + bet.profitLoss, 0);

            const totalBetsEl = document.getElementById('total-bets');
            const totalProfitEl = document.getElementById('total-profit');
            const totalLossEl = document.getElementById('total-loss');
            const totalBankrollEl = document.getElementById('total-bankroll');

            if (totalBetsEl) totalBetsEl.textContent = totalBets;
            if (totalProfitEl) totalProfitEl.textContent = `+${totalProfit.toFixed(2)} ‚Ç∫`;
            if (totalLossEl) totalLossEl.textContent = `-${totalLoss.toFixed(2)} ‚Ç∫`;
            if (totalBankrollEl) {
                totalBankrollEl.textContent = `${totalBankroll >= 0 ? '+' : ''}${totalBankroll.toFixed(2)} ‚Ç∫`;
                totalBankrollEl.className = `text-2xl font-montserrat font-bold ${totalBankroll >= 0 ? 'text-green-400' : 'text-red-400'}`;
            }

            // Update additional statistics
            const finishedBets = bets.filter(bet => bet.status !== 'pending' && bet.betType !== 'Kasa ƒ∞≈ülemi');
            const wonBets = finishedBets.filter(bet => bet.status === 'won');
            const winRate = finishedBets.length > 0 ? (wonBets.length / finishedBets.length * 100) : 0;
            
            const pendingBetsCount = bets.filter(bet => bet.status === 'pending' && bet.betType !== 'Kasa ƒ∞≈ülemi').length;
            
            // Calculate this month's profit/loss
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthlyProfit = bets
                .filter(bet => {
                    const betDate = new Date(bet.date.split('.').reverse().join('-'));
                    return betDate.getMonth() === currentMonth && betDate.getFullYear() === currentYear;
                })
                .reduce((sum, bet) => sum + bet.profitLoss, 0);

            const winRateEl = document.getElementById('win-rate');
            const pendingBetsEl = document.getElementById('pending-bets');
            const monthlyProfitEl = document.getElementById('monthly-profit');

            if (winRateEl) winRateEl.textContent = `${winRate.toFixed(1)}%`;
            if (pendingBetsEl) pendingBetsEl.textContent = pendingBetsCount;
            if (monthlyProfitEl) {
                monthlyProfitEl.textContent = `${monthlyProfit >= 0 ? '+' : ''}${monthlyProfit.toFixed(2)} ‚Ç∫`;
                monthlyProfitEl.className = monthlyProfit >= 0 ? 'text-green-400 font-bold' : 'text-red-400 font-bold';
            }
        }

        function updateStatisticsOverview() {
            const totalBets = bets.filter(bet => bet.betType !== 'Kasa ƒ∞≈ülemi').length;
            const finishedBets = bets.filter(bet => bet.status !== 'pending' && bet.betType !== 'Kasa ƒ∞≈ülemi');
            const wonBets = finishedBets.filter(bet => bet.status === 'won');
            const winRate = finishedBets.length > 0 ? (wonBets.length / finishedBets.length * 100) : 0;
            
            const sportBets = bets.filter(bet => bet.betType !== 'Kasa ƒ∞≈ülemi' && bet.betType !== 'Slot');
            const avgOdds = sportBets.length > 0 ? (sportBets.reduce((sum, bet) => sum + bet.odds, 0) / sportBets.length) : 0;
            
            const totalBankroll = bets.reduce((sum, bet) => sum + bet.profitLoss, 0);
            const totalInvested = bets.filter(bet => bet.betType !== 'Kasa ƒ∞≈ülemi').reduce((sum, bet) => sum + bet.betAmount, 0);
            const roi = totalInvested > 0 ? (totalBankroll / totalInvested * 100) : 0;

            const statsTotalBetsEl = document.getElementById('stats-total-bets');
            const statsWinRateEl = document.getElementById('stats-win-rate');
            const statsAvgOddsEl = document.getElementById('stats-avg-odds');
            const statsRoiEl = document.getElementById('stats-roi');

            if (statsTotalBetsEl) statsTotalBetsEl.textContent = totalBets;
            if (statsWinRateEl) statsWinRateEl.textContent = `${winRate.toFixed(1)}%`;
            if (statsAvgOddsEl) statsAvgOddsEl.textContent = avgOdds.toFixed(2);
            if (statsRoiEl) {
                statsRoiEl.textContent = `${roi >= 0 ? '+' : ''}${roi.toFixed(1)}%`;
                statsRoiEl.className = roi >= 0 ? 'text-2xl font-montserrat font-bold text-green-400' : 'text-2xl font-montserrat font-bold text-red-400';
            }
        }

        function updateCharts() {
            updateProfitChart();
            updatePlatformChart();
        }

        function updateProfitChart() {
            const ctx = document.getElementById('profitChart');
            if (!ctx) return;

            if (profitChart) {
                profitChart.destroy();
            }

            const sortedBets = bets
                .filter(bet => bet.betType !== 'Kasa ƒ∞≈ülemi')
                .sort((a, b) => new Date(a.date.split('.').reverse().join('-')) - new Date(b.date.split('.').reverse().join('-')));

            let runningProfit = 0;
            const data = sortedBets.map(bet => {
                runningProfit += bet.profitLoss;
                return {
                    x: bet.date,
                    y: runningProfit
                };
            });

            profitChart = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Kar/Zarar Trendi',
                        data: data,
                        borderColor: '#8db3f0',
                        backgroundColor: 'rgba(141, 179, 240, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: 'white'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        y: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                callback: function(value) {
                                    return value.toFixed(2) + ' ‚Ç∫';
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        function updatePlatformChart() {
            const ctx = document.getElementById('platformChart');
            if (!ctx) return;

            if (platformChart) {
                platformChart.destroy();
            }

            const platformStats = {};
            bets.forEach(bet => {
                if (bet.betType !== 'Kasa ƒ∞≈ülemi') {
                    if (!platformStats[bet.platform]) {
                        platformStats[bet.platform] = 0;
                    }
                    platformStats[bet.platform]++;
                }
            });

            const labels = Object.keys(platformStats);
            const data = Object.values(platformStats);

            if (labels.length === 0) {
                return;
            }

            platformChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: [
                            '#8db3f0', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6',
                            '#06b6d4', '#84cc16', '#f97316', '#ec4899', '#6366f1'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'white',
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
        }

        function renderRecentBets() {
            const container = document.getElementById('recent-bets');
            if (!container) return;
            
            const recentBets = bets
                .sort((a, b) => new Date(b.date.split('.').reverse().join('-')) - new Date(a.date.split('.').reverse().join('-')))
                .slice(0, 5);
            
            if (recentBets.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-400">
                        <div class="text-3xl mb-2">üìù</div>
                        <p>Hen√ºz bahis bulunmuyor</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = recentBets.map(bet => {
                const statusClass = {
                    pending: 'status-pending',
                    won: 'status-won',
                    lost: 'status-lost'
                };
                
                const statusText = {
                    pending: '‚è≥',
                    won: '‚úÖ',
                    lost: '‚ùå'
                };

                const profitColor = bet.profitLoss > 0 ? 'text-green-400' : bet.profitLoss < 0 ? 'text-red-400' : 'text-gray-400';

                return `
                    <div class="bet-item">
                        <div class="flex justify-between items-center">
                            <div class="flex-1">
                                <div class="flex items-center space-x-2 mb-1">
                                    <span class="font-medium text-white text-sm">${bet.platform}</span>
                                    <span class="px-2 py-1 rounded-full text-xs ${statusClass[bet.status]}">${statusText[bet.status]}</span>
                                </div>
                                <p class="text-gray-300 text-xs truncate">${bet.description}</p>
                                <div class="text-xs text-gray-400 mt-1">${bet.date}</div>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-white text-sm">${bet.betAmount.toFixed(2)} ‚Ç∫</div>
                                ${bet.status !== 'pending' ? `<div class="font-bold ${profitColor} text-sm">${bet.profitLoss >= 0 ? '+' : ''}${bet.profitLoss.toFixed(2)} ‚Ç∫</div>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateHistoryStats(filteredBets) {
            const totalBets = filteredBets.length;
            const wonBets = filteredBets.filter(bet => bet.status === 'won').length;
            const lostBets = filteredBets.filter(bet => bet.status === 'lost').length;
            const pendingBets = filteredBets.filter(bet => bet.status === 'pending').length;

            const historyTotalBetsEl = document.getElementById('history-total-bets');
            const historyWonBetsEl = document.getElementById('history-won-bets');
            const historyLostBetsEl = document.getElementById('history-lost-bets');
            const historyPendingBetsEl = document.getElementById('history-pending-bets');

            if (historyTotalBetsEl) historyTotalBetsEl.textContent = totalBets;
            if (historyWonBetsEl) historyWonBetsEl.textContent = wonBets;
            if (historyLostBetsEl) historyLostBetsEl.textContent = lostBets;
            if (historyPendingBetsEl) historyPendingBetsEl.textContent = pendingBets;
        }

        function renderHistory() {
            const statusFilter = document.getElementById('status-filter');
            if (!statusFilter) return;
            
            let filteredBets = bets;
            
            if (statusFilter.value !== 'all') {
                filteredBets = filteredBets.filter(bet => bet.status === statusFilter.value);
            }

            updateHistoryStats(filteredBets);

            const historyContainer = document.getElementById('bet-history');
            if (!historyContainer) return;
            
            if (filteredBets.length === 0) {
                historyContainer.innerHTML = `
                    <div class="text-center py-16 text-gray-400">
                        <div class="text-6xl mb-4">üìù</div>
                        <p class="text-xl mb-2">Hen√ºz bahis bulunmuyor</p>
                        <p class="text-sm">ƒ∞lk bahisinizi eklemek i√ßin "Yeni Kayƒ±t" sekmesini kullanƒ±n</p>
                    </div>
                `;
                const paginationContainer = document.getElementById('pagination-container');
                if (paginationContainer) {
                    paginationContainer.innerHTML = '';
                }
                return;
            }

            // Sort bets by date (newest first)
            const sortedBets = filteredBets.sort((a, b) => 
                new Date(b.date.split('.').reverse().join('-')) - new Date(a.date.split('.').reverse().join('-'))
            );

            // Calculate pagination
            const totalPages = Math.ceil(sortedBets.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedBets = sortedBets.slice(startIndex, endIndex);

            // Render bet cards
            historyContainer.innerHTML = paginatedBets.map(bet => {
                const statusClass = {
                    pending: 'pending',
                    won: 'won',
                    lost: 'lost'
                };
                
                const statusText = {
                    pending: '‚è≥ Bekleyen',
                    won: '‚úÖ Kazandƒ±',
                    lost: '‚ùå Kaybetti'
                };

                const statusBadgeClass = {
                    pending: 'status-pending',
                    won: 'status-won',
                    lost: 'status-lost'
                };

                const profitColor = bet.profitLoss > 0 ? 'text-green-400' : bet.profitLoss < 0 ? 'text-red-400' : 'text-gray-400';

                let actionButtons = '';
                if (bet.status === 'pending') {
                    actionButtons = `
                        <button onclick="markAsWon(${bet.id})" class="flex-1 px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center justify-center space-x-2">
                            <span>‚úÖ</span>
                            <span>Kazandƒ±</span>
                        </button>
                        <button onclick="markAsLost(${bet.id})" class="flex-1 px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium flex items-center justify-center space-x-2">
                            <span>‚ùå</span>
                            <span>Kaybetti</span>
                        </button>
                    `;
                } else {
                    actionButtons = `
                        <button onclick="openEditModal(${bet.id})" class="flex-1 px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center space-x-2">
                            <span>‚úèÔ∏è</span>
                            <span>D√ºzenle</span>
                        </button>
                    `;
                }

                const betTypeIcon = {
                    'Spor Bahis': '‚öΩ',
                    'Canlƒ± Bahis': 'üî¥',
                    'Casino': 'üé∞',
                    'Slot': 'üé≤',
                    'Kasa ƒ∞≈ülemi': 'üí∞'
                };

                return `
                    <div class="bet-card ${statusClass[bet.status]}">
                        <div class="flex flex-col space-y-4">
                            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-3 sm:space-y-0">
                                <div class="flex items-center space-x-3">
                                    <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-2xl shadow-lg">
                                        ${betTypeIcon[bet.betType] || 'üéØ'}
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-bold text-white text-lg leading-tight">${bet.platform}</h3>
                                        <p class="text-gray-400 text-sm">${bet.betType}</p>
                                    </div>
                                </div>
                                <span class="px-4 py-2 rounded-full text-sm font-medium ${statusBadgeClass[bet.status]} self-start sm:self-auto whitespace-nowrap">
                                    ${statusText[bet.status]}
                                </span>
                            </div>
                            
                            <div class="bg-gray-800 bg-opacity-30 rounded-lg p-3">
                                <p class="text-gray-200 text-base leading-relaxed">${bet.description}</p>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-gray-700 bg-opacity-40 rounded-lg p-3 text-center">
                                    <div class="text-2xl mb-1">üìÖ</div>
                                    <div class="text-xs text-gray-400 mb-1">Tarih</div>
                                    <div class="text-white font-semibold text-sm">${bet.date}</div>
                                </div>
                                <div class="bg-gray-700 bg-opacity-40 rounded-lg p-3 text-center">
                                    <div class="text-2xl mb-1">üí∞</div>
                                    <div class="text-xs text-gray-400 mb-1">Bahis Miktarƒ±</div>
                                    <div class="text-white font-semibold text-sm">${bet.betAmount.toFixed(2)} ‚Ç∫</div>
                                </div>
                                ${bet.betType !== 'Slot' && bet.betType !== 'Kasa ƒ∞≈ülemi' ? `
                                    <div class="bg-gray-700 bg-opacity-40 rounded-lg p-3 text-center">
                                        <div class="text-2xl mb-1">üìä</div>
                                        <div class="text-xs text-gray-400 mb-1">Oran</div>
                                        <div class="text-white font-semibold text-sm">${bet.odds}</div>
                                    </div>
                                ` : ''}
                                ${bet.status !== 'pending' ? `
                                    <div class="bg-gray-700 bg-opacity-40 rounded-lg p-3 text-center">
                                        <div class="text-2xl mb-1">${bet.profitLoss >= 0 ? 'üìà' : 'üìâ'}</div>
                                        <div class="text-xs text-gray-400 mb-1">Kar/Zarar</div>
                                        <div class="font-semibold text-sm ${profitColor}">${bet.profitLoss >= 0 ? '+' : ''}${bet.profitLoss.toFixed(2)} ‚Ç∫</div>
                                    </div>
                                ` : ''}
                            </div>
                            
                            ${bet.image ? `
                                <div class="bg-gray-700 bg-opacity-40 rounded-lg p-3">
                                    <div class="text-xs text-gray-400 mb-2">Kupon Resmi</div>
                                    <img src="${bet.image}" alt="Bahis kuponu" class="w-full max-h-32 object-contain rounded cursor-pointer" onclick="showImageModal('${bet.image}')">
                                </div>
                            ` : ''}
                            
                            <div class="flex space-x-2 pt-2">
                                ${actionButtons}
                                <button onclick="deleteBet(${bet.id})" class="px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium flex items-center justify-center">
                                    <span>üóëÔ∏è</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Render pagination
            renderPagination(totalPages);
        }

        function renderPagination(totalPages) {
            const paginationContainer = document.getElementById('pagination-container');
            if (!paginationContainer || totalPages <= 1) {
                if (paginationContainer) paginationContainer.innerHTML = '';
                return;
            }

            let paginationHTML = '';

            // Previous button
            paginationHTML += `
                <button class="pagination-btn ${currentPage === 1 ? 'opacity-50 cursor-not-allowed' : ''}" 
                        onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
                    ‚Üê
                </button>
            `;

            // Page numbers
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, currentPage + 2);

            if (startPage > 1) {
                paginationHTML += `<button class="pagination-btn" onclick="changePage(1)">1</button>`;
                if (startPage > 2) {
                    paginationHTML += `<span class="text-gray-400">...</span>`;
                }
            }

            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `
                    <button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">
                        ${i}
                    </button>
                `;
            }

            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    paginationHTML += `<span class="text-gray-400">...</span>`;
                }
                paginationHTML += `<button class="pagination-btn" onclick="changePage(${totalPages})">${totalPages}</button>`;
            }

            // Next button
            paginationHTML += `
                <button class="pagination-btn ${currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : ''}" 
                        onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
                    ‚Üí
                </button>
            `;

            paginationContainer.innerHTML = paginationHTML;
        }

        // Global functions for button clicks
        window.markAsWon = function(id) {
            const bet = bets.find(b => b.id === id);
            if (!bet) return;
            
            const expectedWin = bet.betAmount * bet.odds;
            bet.status = 'won';
            bet.winAmount = expectedWin;
            bet.profitLoss = expectedWin - bet.betAmount;
            
            saveData();
            updateStats();
            renderHistory();
            renderRecentBets();
            
            showNotification(`üéâ Tebrikler! +${bet.profitLoss.toFixed(2)} ‚Ç∫ kazandƒ±nƒ±z!`, 'success');
        };

        window.markAsLost = function(id) {
            const bet = bets.find(b => b.id === id);
            if (!bet) return;
            
            bet.status = 'lost';
            bet.winAmount = 0;
            bet.profitLoss = -bet.betAmount;
            
            saveData();
            updateStats();
            renderHistory();
            renderRecentBets();
            
            showNotification(`üòî Bahis kaybedildi: ${bet.profitLoss.toFixed(2)} ‚Ç∫`, 'error');
        };

        window.deleteBet = function(id) {
            if (confirm('Bu bahisi silmek istediƒüinizden emin misiniz?')) {
                bets = bets.filter(bet => bet.id !== id);
                saveData();
                updateStats();
                renderHistory();
                renderRecentBets();
                showNotification('üóëÔ∏è Bahis silindi', 'error');
            }
        };

        window.changePage = function(page) {
            const statusFilter = document.getElementById('status-filter');
            let filteredBets = bets;
            
            if (statusFilter && statusFilter.value !== 'all') {
                filteredBets = filteredBets.filter(bet => bet.status === statusFilter.value);
            }
            
            const totalPages = Math.ceil(filteredBets.length / itemsPerPage);
            
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                renderHistory();
            }
        };

        window.openEditModal = openEditModal;
        window.showImageModal = showImageModal;
        window.removeCustomPlatform = removeCustomPlatform;
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9755ad43737d1ece',t:'MTc1NjIzNTkyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
