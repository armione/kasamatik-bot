<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bahis Takip ve Kasa Y√∂netimi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Poppins', sans-serif; 
            background: linear-gradient(135deg, #292c30 0%, #000000 100%);
            min-height: 100vh;
            color: #ffffff;
        }
        
        .montserrat {
            font-family: 'Montserrat', sans-serif;
        }
        
        .glass-card {
            background: rgba(141, 179, 240, 0.08);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(141, 179, 240, 0.15);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .glass-button {
            background: rgba(141, 179, 240, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(141, 179, 240, 0.25);
            transition: all 0.3s ease;
        }
        
        .glass-button:hover {
            background: rgba(141, 179, 240, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(141, 179, 240, 0.2);
        }
        
        .gradient-button {
            background: linear-gradient(135deg, #8db3f0 0%, #292c30 100%);
            transition: all 0.3s ease;
        }
        
        .gradient-button:hover {
            background: linear-gradient(135deg, #a5c4f5 0%, #3a3f45 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(141, 179, 240, 0.4);
        }
        
        .success-gradient {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .success-gradient:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
        }
        
        .danger-gradient {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        .danger-gradient:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.4);
        }
        
        .stat-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .profit { color: #10b981; font-weight: 600; }
        .loss { color: #ef4444; font-weight: 600; }
        
        .modern-input {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid rgba(141, 179, 240, 0.3);
            transition: all 0.3s ease;
            color: #292c30;
        }
        
        .modern-input:focus {
            background: rgba(255, 255, 255, 1);
            border-color: #8db3f0;
            box-shadow: 0 0 0 3px rgba(141, 179, 240, 0.15);
        }
        
        .modern-input::placeholder {
            color: #6b7280;
        }
        
        .floating-header {
            background: rgba(141, 179, 240, 0.1);
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(141, 179, 240, 0.2);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modern-table {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            color: #292c30;
        }
        
        .table-row:hover {
            background: rgba(141, 179, 240, 0.15);
            transform: scale(1.01);
            transition: all 0.2s ease;
        }
        
        .icon-button {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .icon-button:hover {
            transform: scale(1.1) rotate(5deg);
        }
        
        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .stat-card {
                padding: 1rem !important;
            }
            
            .glass-card {
                padding: 1.25rem !important;
            }
            
            .mobile-card {
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(10px);
                border-radius: 1.5rem;
                padding: 1rem;
                margin-bottom: 0.75rem;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
                border-left: 4px solid;
                transition: all 0.3s ease;
                color: #292c30;
            }
            
            .mobile-card.won {
                border-left-color: #10b981;
                background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(255, 255, 255, 0.98) 100%);
            }
            
            .mobile-card.lost {
                border-left-color: #ef4444;
                background: linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(255, 255, 255, 0.98) 100%);
            }
            
            .mobile-card.pending {
                border-left-color: #8db3f0;
                background: linear-gradient(135deg, rgba(141, 179, 240, 0.08) 0%, rgba(255, 255, 255, 0.98) 100%);
            }
            
            .mobile-actions {
                display: flex;
                gap: 0.5rem;
                flex-wrap: wrap;
                margin-top: 0.75rem;
            }
            
            .mobile-actions button {
                flex: 1;
                min-width: 70px;
                padding: 0.625rem 0.875rem;
                border-radius: 0.75rem;
                font-size: 0.75rem;
                font-weight: 700;
                border: none;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            }
        }
    </style>
</head>
<body class="min-h-screen py-4 px-2">
    <div class="max-w-7xl mx-auto">
        <!-- Modern Floating Header -->
        <div class="floating-header rounded-3xl p-6 lg:p-8 mb-6 lg:mb-8 slide-in">
            <div class="flex justify-between items-center mb-4 lg:mb-6">
                <div class="flex items-center space-x-3 lg:space-x-4">
                    <div class="w-12 h-12 lg:w-16 lg:h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-xl lg:text-2xl pulse-animation">
                        üéØ
                    </div>
                    <div>
                        <h1 class="montserrat text-2xl lg:text-4xl font-black bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent">
                            Bahis Takip & Kasa Y√∂netimi
                        </h1>
                        <p class="text-gray-300 text-sm lg:text-lg mt-1 font-medium">Modern ve kullanƒ±≈ülƒ± takip sistemi</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modern Stats Grid -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-6 mb-6 lg:mb-8">
            <div class="stat-card glass-card rounded-2xl lg:rounded-3xl p-4 lg:p-6 text-center">
                <div class="w-10 h-10 lg:w-16 lg:h-16 mx-auto mb-2 lg:mb-4 rounded-xl lg:rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-lg lg:text-2xl">
                    üí∞
                </div>
                <div class="text-xs lg:text-sm text-gray-300 mb-1 lg:mb-2 font-medium">Toplam Kasa</div>
                <div class="montserrat text-lg lg:text-2xl font-black text-white" id="total-balance">0 ‚Ç∫</div>
            </div>
            <div class="stat-card glass-card rounded-2xl lg:rounded-3xl p-4 lg:p-6 text-center">
                <div class="w-10 h-10 lg:w-16 lg:h-16 mx-auto mb-2 lg:mb-4 rounded-xl lg:rounded-2xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-lg lg:text-2xl">
                    üìà
                </div>
                <div class="text-xs lg:text-sm text-gray-300 mb-1 lg:mb-2 font-medium">Toplam Kar</div>
                <div class="montserrat text-lg lg:text-2xl font-black profit" id="total-profit">0 ‚Ç∫</div>
            </div>
            <div class="stat-card glass-card rounded-2xl lg:rounded-3xl p-4 lg:p-6 text-center">
                <div class="w-10 h-10 lg:w-16 lg:h-16 mx-auto mb-2 lg:mb-4 rounded-xl lg:rounded-2xl bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center text-lg lg:text-2xl">
                    üìâ
                </div>
                <div class="text-xs lg:text-sm text-gray-300 mb-1 lg:mb-2 font-medium">Toplam Zarar</div>
                <div class="montserrat text-lg lg:text-2xl font-black loss" id="total-loss">0 ‚Ç∫</div>
            </div>
            <div class="stat-card glass-card rounded-2xl lg:rounded-3xl p-4 lg:p-6 text-center">
                <div class="w-10 h-10 lg:w-16 lg:h-16 mx-auto mb-2 lg:mb-4 rounded-xl lg:rounded-2xl bg-gradient-to-br from-purple-500 to-indigo-500 flex items-center justify-center text-lg lg:text-2xl">
                    üé≤
                </div>
                <div class="text-xs lg:text-sm text-gray-300 mb-1 lg:mb-2 font-medium">Toplam Bahis</div>
                <div class="montserrat text-lg lg:text-2xl font-black text-white" id="total-bets">0</div>
            </div>
        </div>

        <div class="grid lg:grid-cols-3 gap-4 lg:gap-8">
            <!-- Modern Add Entry Form -->
            <div class="lg:col-span-1 space-y-4 lg:space-y-6">
                <div class="glass-card rounded-2xl lg:rounded-3xl p-4 lg:p-8">
                    <div class="flex items-center space-x-3 mb-4 lg:mb-6">
                        <div class="w-8 h-8 lg:w-10 lg:h-10 rounded-lg lg:rounded-xl bg-gradient-to-br from-green-500 to-teal-500 flex items-center justify-center text-lg lg:text-xl">
                            ‚ûï
                        </div>
                        <h2 class="montserrat text-lg lg:text-2xl font-black text-white">Yeni Kayƒ±t</h2>
                    </div>
                    
                    <form id="bet-form" class="space-y-4 lg:space-y-6">
                        <div>
                            <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Platform</label>
                            <div class="flex gap-2">
                                <div class="flex-1 relative">
                                    <input type="text" id="platform-search" placeholder="Platform ara veya se√ß..." 
                                           class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium"
                                           autocomplete="off" onkeyup="filterPlatforms()" onfocus="showPlatformDropdown()" onblur="hidePlatformDropdown()">
                                    <div id="platform-dropdown" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-2xl mt-1 max-h-60 overflow-y-auto z-50 hidden shadow-lg">
                                        <!-- Platform options will be populated here -->
                                    </div>
                                </div>
                                <button type="button" onclick="openPlatformManager()" 
                                        class="glass-button px-4 py-3 text-white rounded-2xl font-semibold" title="Platform Y√∂netimi">
                                    ‚öôÔ∏è
                                </button>
                            </div>
                            <input type="hidden" id="selected-platform" value="">
                        </div>

                        <div>
                            <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Bahis T√ºr√º</label>
                            <select id="bet-type" onchange="toggleSlotOptions()" class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                                <option value="Spor Bahis">üèà Spor Bahis</option>
                                <option value="Canlƒ± Bahis">‚ö° Canlƒ± Bahis</option>
                                <option value="Slot">üé∞ Slot</option>
                                <option value="Casino">üÉè Casino</option>
                                <option value="Sanal Spor">üéÆ Sanal Spor</option>
                            </select>
                        </div>

                        <div id="slot-options-container" class="hidden">
                            <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Slot T√ºr√º</label>
                            <select id="slot-type" onchange="toggleFreespinDetails()" class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                                <option value="Normal Slot">üé∞ Normal Slot</option>
                                <option value="Freespin">üéÅ Freespin</option>
                                <option value="Happy Hour">‚è∞ Happy Hour</option>
                            </select>
                        </div>

                        <div>
                            <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Bahis Miktarƒ± (‚Ç∫)</label>
                            <input type="number" id="bet-amount" step="0.01" min="0" 
                                   class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                   placeholder="250.00">
                        </div>

                        <div>
                            <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Durum</label>
                            <select id="bet-status" onchange="toggleWinAmount()" class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                                <option value="pending">‚è≥ Bekliyor</option>
                                <option value="won">‚úÖ Kazandƒ±</option>
                                <option value="lost">‚ùå Kaybetti</option>
                            </select>
                        </div>

                        <div id="win-amount-container" class="hidden">
                            <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Kazan√ß Miktarƒ± (‚Ç∫)</label>
                            <input type="number" id="win-amount" step="0.01" min="0"
                                   class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                   placeholder="1250.00">
                        </div>

                        <div id="sports-fields">
                            <div>
                                <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Ma√ßlar</label>
                                <input type="text" id="description" 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                       placeholder="Gaziantep-Gen√ßlerbirliƒüi / Roma-Bologna">
                            </div>

                            <div>
                                <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Bahis Se√ßimi</label>
                                <input type="text" id="bet-selection" 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium mb-3" 
                                       placeholder="√ñrn: 2.5 √úst, 1X, Kar≈üƒ±lƒ±klƒ± Gol Var">
                            </div>

                            <div>
                                <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Oran</label>
                                <input type="number" id="odds" step="0.01" min="1" 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                       placeholder="2.50">
                            </div>
                        </div>

                        <div id="slot-fields" class="hidden">
                            <div>
                                <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Slot Oyunu</label>
                                <input type="text" id="slot-game" 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                       placeholder="√ñrn: Sweet Bonanza, Gates of Olympus, Book of Dead">
                            </div>

                            <div>
                                <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Spin Sayƒ±sƒ±</label>
                                <input type="number" id="spin-count" min="1" 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                       placeholder="Ka√ß spin oynadƒ±n?">
                            </div>

                            <div>
                                <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Spin Ba≈üƒ±na Bahis (‚Ç∫)</label>
                                <input type="number" id="bet-per-spin" step="0.01" min="0" 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                       placeholder="Her spin i√ßin bahis miktarƒ±">
                            </div>

                            <div id="freespin-details" class="hidden">
                                <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Freespin Detayƒ±</label>
                                <input type="text" id="freespin-info" 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                       placeholder="√ñrn: 20 freespin x5 √ßarpan, Bonus oyun">
                            </div>

                            <div id="happy-hour-details" class="hidden">
                                <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">Happy Hour Bonus Detayƒ±</label>
                                <input type="text" id="happy-hour-info" 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                       placeholder="√ñrn: 1000‚Ç∫'ye 1000 freespin, 100‚Ç∫'ye 100 spin, %50 bonus">
                            </div>
                        </div>

                        <div>
                            <label class="montserrat block text-xs lg:text-sm font-bold text-gray-200 mb-2 lg:mb-3">üì∏ Ekran G√∂r√ºnt√ºs√º</label>
                            <div class="space-y-3">
                                <div id="drop-zone" class="w-full modern-input px-6 py-6 lg:py-8 rounded-2xl border-2 border-dashed border-purple-300 text-center cursor-pointer hover:border-purple-400 hover:bg-purple-50 transition-all">
                                    <div class="text-3xl lg:text-4xl mb-2">üì∏</div>
                                    <div class="text-gray-600 font-medium mb-1 text-sm lg:text-base">G√∂r√ºnt√ºy√º buraya s√ºr√ºkleyin</div>
                                    <div class="text-xs lg:text-sm text-gray-500">veya <span class="text-purple-600 font-semibold">Ctrl+V</span> ile yapƒ±≈ütƒ±rƒ±n</div>
                                    <div class="text-xs text-gray-400 mt-2">PNG, JPG, GIF desteklenir</div>
                                </div>
                                <input type="file" id="screenshot" accept="image/*" class="hidden">
                                <div id="screenshot-preview" class="hidden">
                                    <img id="preview-image" class="w-full h-32 object-cover rounded-2xl border-2 border-white/20 cursor-pointer hover:opacity-80 transition-opacity" alt="√ñnizleme" onclick="viewScreenshot(this.src)" title="B√ºy√ºtmek i√ßin tƒ±klayƒ±n">
                                    <div class="flex justify-between items-center mt-2">
                                        <span class="text-xs text-gray-400">üì∏ B√ºy√ºtmek i√ßin tƒ±klayƒ±n</span>
                                        <button type="button" onclick="removeScreenshot()" class="text-red-400 hover:text-red-300 text-sm">
                                            üóëÔ∏è G√∂r√ºnt√ºy√º Kaldƒ±r
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button type="submit" 
                                class="w-full gradient-button text-white py-4 rounded-2xl montserrat font-black text-lg transform transition-all">
                            üíæ Kaydet
                        </button>
                    </form>
                </div>

                <!-- Modern Quick Add -->
                <div class="glass-card rounded-2xl lg:rounded-3xl p-4 lg:p-6">
                    <div class="flex items-center space-x-3 mb-3 lg:mb-4">
                        <div class="w-6 h-6 lg:w-8 lg:h-8 rounded-lg bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center text-sm lg:text-lg">
                            üöÄ
                        </div>
                        <h3 class="montserrat text-base lg:text-lg font-black text-white">Hƒ±zlƒ± Ekle</h3>
                    </div>
                    <button onclick="openQuickAdd()" 
                            class="w-full bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white py-3 rounded-2xl montserrat font-black text-sm mb-3 transform transition-all hover:scale-105">
                        üöÄ Hƒ±zlƒ± Bahis Ekle
                    </button>
                    <div class="text-xs text-gray-300 text-center">
                        Oran ‚Ä¢ Miktar ‚Ä¢ Platform ‚Ä¢ SS
                    </div>
                </div>

                <!-- Modern Quick Balance Update -->
                <div class="glass-card rounded-2xl lg:rounded-3xl p-4 lg:p-6">
                    <div class="flex items-center space-x-3 mb-3 lg:mb-4">
                        <div class="w-6 h-6 lg:w-8 lg:h-8 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center text-sm lg:text-lg">
                            ‚ö°
                        </div>
                        <h3 class="montserrat text-base lg:text-lg font-black text-white">Hƒ±zlƒ± Kasa G√ºncelleme</h3>
                    </div>
                    <div class="flex gap-3 mb-3">
                        <input type="number" id="balance-update" step="0.01" 
                               class="flex-1 modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                               placeholder="Miktar">
                        <button onclick="updateBalance()" 
                                class="success-gradient text-white px-6 py-3 rounded-2xl montserrat font-black">
                            ‚úÖ
                        </button>
                    </div>
                    <button onclick="resetBalance()" 
                            class="w-full danger-gradient text-white py-3 rounded-2xl montserrat font-black text-sm">
                        üîÑ Kasayƒ± Sƒ±fƒ±rla
                    </button>
                </div>
            </div>

            <!-- Modern History Table -->
            <div class="lg:col-span-2 space-y-4 lg:space-y-6">
                <div class="glass-card rounded-2xl lg:rounded-3xl p-4 lg:p-8">
                    <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 lg:mb-6 space-y-3 lg:space-y-0">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 lg:w-10 lg:h-10 rounded-lg lg:rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-lg lg:text-xl">
                                üìä
                            </div>
                            <h2 class="montserrat text-xl lg:text-2xl font-black text-white">Bahis Ge√ßmi≈üi</h2>
                        </div>
                        <div class="flex gap-2 lg:gap-3">
                            <button onclick="openStatistics()" 
                                    class="bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 px-3 lg:px-6 py-2 lg:py-3 text-white rounded-xl lg:rounded-2xl montserrat font-bold flex items-center space-x-1 lg:space-x-2 text-sm lg:text-base">
                                <span>üìä</span>
                                <span class="hidden sm:inline">ƒ∞statistikler</span>
                            </button>
                            <button onclick="importData()" 
                                    class="success-gradient px-3 lg:px-6 py-2 lg:py-3 text-white rounded-xl lg:rounded-2xl montserrat font-bold flex items-center space-x-1 lg:space-x-2 text-sm lg:text-base">
                                <span>üì•</span>
                                <span class="hidden sm:inline">ƒ∞√ße Aktar</span>
                            </button>
                            <button onclick="exportData()" 
                                    class="glass-button px-3 lg:px-6 py-2 lg:py-3 text-white rounded-xl lg:rounded-2xl montserrat font-bold flex items-center space-x-1 lg:space-x-2 text-sm lg:text-base">
                                <span>üì§</span>
                                <span class="hidden sm:inline">Dƒ±≈üa Aktar</span>
                            </button>
                            <button onclick="clearAllData()" 
                                    class="danger-gradient px-3 lg:px-6 py-2 lg:py-3 text-white rounded-xl lg:rounded-2xl montserrat font-bold flex items-center space-x-1 lg:space-x-2 text-sm lg:text-base">
                                <span>üóëÔ∏è</span>
                                <span class="hidden sm:inline">Temizle</span>
                            </button>
                        </div>
                    </div>

                    <!-- Modern Filter -->
                    <div class="mb-4 lg:mb-6">
                        <select id="filter-type" onchange="filterHistory()" 
                                class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium text-sm lg:text-base">
                            <option value="all">üîç T√ºm Kayƒ±tlar</option>
                            <option value="Spor Bahis">üèà Spor Bahis</option>
                            <option value="Canlƒ± Bahis">‚ö° Canlƒ± Bahis</option>
                            <option value="Normal Slot">üé∞ Normal Slot</option>
                            <option value="Freespin">üéÅ Freespin</option>
                            <option value="Happy Hour">‚è∞ Happy Hour</option>
                            <option value="Casino">üÉè Casino</option>
                            <option value="Sanal Spor">üéÆ Sanal Spor</option>
                            <option value="profit">üìà Sadece Karlar</option>
                            <option value="loss">üìâ Sadece Zararlar</option>
                        </select>
                    </div>

                    <!-- Desktop Table -->
                    <div class="hidden lg:block modern-table rounded-2xl overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gradient-to-r from-gray-800 to-gray-900 text-white">
                                    <tr>
                                        <th class="montserrat text-left py-4 px-4 font-bold">Tarih</th>
                                        <th class="montserrat text-left py-4 px-4 font-bold">Platform</th>
                                        <th class="montserrat text-left py-4 px-4 font-bold">T√ºr</th>
                                        <th class="montserrat text-right py-4 px-4 font-bold">Bahis</th>
                                        <th class="montserrat text-center py-4 px-4 font-bold">Durum</th>
                                        <th class="montserrat text-right py-4 px-4 font-bold">Kar/Zarar</th>
                                        <th class="montserrat text-center py-4 px-4 font-bold">ƒ∞≈ülem</th>
                                    </tr>
                                </thead>
                                <tbody id="history-table">
                                    <tr>
                                        <td colspan="7" class="text-center py-12 text-gray-500">
                                            <div class="flex flex-col items-center space-y-3">
                                                <div class="text-6xl opacity-50">üéØ</div>
                                                <div class="text-lg font-medium">Hen√ºz kayƒ±t bulunmuyor</div>
                                                <div class="text-sm">ƒ∞lk bahisinizi ekleyin!</div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Mobile Card View -->
                    <div class="lg:hidden" id="mobile-history">
                        <div class="text-center py-12 text-gray-500">
                            <div class="flex flex-col items-center space-y-3">
                                <div class="text-6xl opacity-50">üéØ</div>
                                <div class="text-lg font-medium">Hen√ºz kayƒ±t bulunmuyor</div>
                                <div class="text-sm">ƒ∞lk bahisinizi ekleyin!</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let bets = JSON.parse(localStorage.getItem('bets')) || [];
        let totalBalance = parseFloat(localStorage.getItem('totalBalance')) || 0;
        let customPlatforms = JSON.parse(localStorage.getItem('customPlatforms')) || [];
        
        // Complete platform list
        const defaultPlatforms = [
            'Artemisbet', 'Asyabahis', 'Baywin', 'Betgit', 'Betorspin', 'Betsin', 'Betsmove', 'Bets10',
            'Bibubet', 'Bilyoner', 'Capitolbet', 'Cepbahis', 'Dumanbet', 'Gora', 'Holigan', 'ƒ∞majbet',
            'ƒ∞stanbulbahis', 'Jojobet', 'Kavbet', 'Kingroyal', 'Kralbet', 'Ligobet', 'Lunabet',
            'Madridbet', 'Makrobet', 'Maltcasino', 'Mariobet', 'Matbet', 'Matixbet', 'Maxwin',
            'Megabahis', 'Meritking', 'Mersobahis', 'Millibahis', 'Misli', 'Nakitbahis', 'Nesine',
            'Odeonbet', 'Olabahis', 'Onwin', 'Padisahbet', 'Parobet', 'Pinbahis', 'Pusulabet',
            'Risebet', 'Sekabet', 'Sonbahis', 'Starz', 'Superbet', 'Superbahis', 'S√ºperbahis',
            'Tarafbet', 'Trendbet', 'Tuttur', 'Yedibahis', 'Zirvebet', 'Zlot'
        ];

        // Platform search functionality
        function getAllPlatforms() {
            return [...defaultPlatforms, ...customPlatforms].sort();
        }
        
        function filterPlatforms() {
            const searchTerm = document.getElementById('platform-search').value.toLowerCase();
            const dropdown = document.getElementById('platform-dropdown');
            const allPlatforms = getAllPlatforms();
            
            const filteredPlatforms = allPlatforms.filter(platform => 
                platform.toLowerCase().includes(searchTerm)
            );
            
            dropdown.innerHTML = filteredPlatforms.map(platform => `
                <div class="px-4 py-3 hover:bg-purple-50 cursor-pointer border-b border-gray-100 last:border-b-0 text-gray-800 font-medium" 
                     onmousedown="selectPlatform('${platform}')">
                    ${platform}
                </div>
            `).join('');
            
            if (filteredPlatforms.length === 0) {
                dropdown.innerHTML = '<div class="px-4 py-3 text-gray-500 text-center">Platform bulunamadƒ±</div>';
            }
        }
        
        function showPlatformDropdown() {
            const dropdown = document.getElementById('platform-dropdown');
            dropdown.classList.remove('hidden');
            filterPlatforms();
        }
        
        function hidePlatformDropdown() {
            setTimeout(() => {
                const dropdown = document.getElementById('platform-dropdown');
                dropdown.classList.add('hidden');
            }, 200);
        }
        
        function selectPlatform(platform) {
            document.getElementById('platform-search').value = platform;
            document.getElementById('selected-platform').value = platform;
            document.getElementById('platform-dropdown').classList.add('hidden');
        }

        // Form submission
        document.getElementById('bet-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const selectedPlatform = document.getElementById('selected-platform').value || document.getElementById('platform-search').value.trim();
            const betType = document.getElementById('bet-type').value;
            const slotType = document.getElementById('slot-type') ? document.getElementById('slot-type').value : '';
            const finalBetType = betType === 'Slot' && slotType ? slotType : betType;
            const betAmount = parseFloat(document.getElementById('bet-amount').value) || 0;
            const betStatus = document.getElementById('bet-status').value;
            const winAmount = parseFloat(document.getElementById('win-amount').value) || 0;
            
            // Get appropriate fields based on bet type
            let description = '';
            let betSelection = '';
            let odds = 0;
            let slotGame = '';
            let spinCount = 0;
            let betPerSpin = 0;
            let freespinInfo = '';
            let happyHourInfo = '';
            
            if (betType === 'Slot') {
                slotGame = document.getElementById('slot-game').value;
                spinCount = parseInt(document.getElementById('spin-count').value) || 0;
                betPerSpin = parseFloat(document.getElementById('bet-per-spin').value) || 0;
                freespinInfo = document.getElementById('freespin-info').value;
                happyHourInfo = document.getElementById('happy-hour-info').value;
                
                // Auto-calculate total bet amount if spin details are provided
                if (spinCount > 0 && betPerSpin > 0 && betAmount === 0) {
                    document.getElementById('bet-amount').value = (spinCount * betPerSpin).toFixed(2);
                    betAmount = spinCount * betPerSpin;
                }
            } else {
                description = document.getElementById('description').value;
                betSelection = document.getElementById('bet-selection').value;
                odds = parseFloat(document.getElementById('odds').value) || 0;
            }
            const screenshotFile = document.getElementById('screenshot').files[0];
            
            if (!selectedPlatform) {
                alert('‚ö†Ô∏è L√ºtfen bir platform se√ßin!');
                return;
            }
            
            // Add to custom platforms if it's a new platform
            if (!defaultPlatforms.includes(selectedPlatform) && !customPlatforms.includes(selectedPlatform)) {
                customPlatforms.push(selectedPlatform);
                localStorage.setItem('customPlatforms', JSON.stringify(customPlatforms));
            }
            
            if (betAmount <= 0) {
                alert('‚ö†Ô∏è L√ºtfen ge√ßerli bir bahis miktarƒ± girin!');
                return;
            }
            
            let profitLoss = 0;
            let finalWinAmount = 0;
            
            if (betStatus === 'won') {
                finalWinAmount = winAmount > 0 ? winAmount : (betAmount * odds);
                profitLoss = finalWinAmount - betAmount;
            } else if (betStatus === 'lost') {
                finalWinAmount = 0;
                profitLoss = -betAmount;
            }
            
            const bet = {
                id: Date.now(),
                date: new Date().toLocaleDateString('tr-TR'),
                time: new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'}),
                platform: selectedPlatform,
                betType: finalBetType,
                betAmount,
                winAmount: finalWinAmount,
                profitLoss,
                description,
                betSelection,
                odds,
                slotGame,
                spinCount,
                betPerSpin,
                freespinInfo,
                happyHourInfo,
                status: betStatus,
                screenshot: null
            };
            
            // Handle screenshot
            if (screenshotFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    bet.screenshot = e.target.result;
                    saveBetAndUpdate(bet);
                };
                reader.readAsDataURL(screenshotFile);
            } else {
                saveBetAndUpdate(bet);
            }
        });

        function saveBetAndUpdate(bet) {
            bets.unshift(bet);
            
            // Only update balance if bet is completed
            if (bet.status !== 'pending') {
                totalBalance += bet.profitLoss;
            }
            
            saveBets();
            updateStats();
            renderHistory();
            
            // Reset form
            document.getElementById('bet-form').reset();
            document.getElementById('platform-search').value = '';
            document.getElementById('selected-platform').value = '';
            document.getElementById('screenshot-preview').classList.add('hidden');
            document.getElementById('win-amount-container').classList.add('hidden');
            document.getElementById('slot-options-container').classList.add('hidden');
            document.getElementById('sports-fields').classList.remove('hidden');
            document.getElementById('slot-fields').classList.add('hidden');
            document.getElementById('freespin-details').classList.add('hidden');
            document.getElementById('happy-hour-details').classList.add('hidden');
            dropZone.innerHTML = `
                <div class="text-3xl lg:text-4xl mb-2">üì∏</div>
                <div class="text-gray-600 font-medium mb-1 text-sm lg:text-base">G√∂r√ºnt√ºy√º buraya s√ºr√ºkleyin</div>
                <div class="text-xs lg:text-sm text-gray-500">veya <span class="text-purple-600 font-semibold">Ctrl+V</span> ile yapƒ±≈ütƒ±rƒ±n</div>
                <div class="text-xs text-gray-400 mt-2">PNG, JPG, GIF desteklenir</div>
            `;
            
            alert('‚úÖ Bahis kaydƒ± ba≈üarƒ±yla eklendi!');
        }

        function updateBalance() {
            const amount = parseFloat(document.getElementById('balance-update').value) || 0;
            if (amount === 0) return;
            
            totalBalance += amount;
            localStorage.setItem('totalBalance', totalBalance);
            updateStats();
            document.getElementById('balance-update').value = '';
            
            const message = `‚úÖ Kasa ${amount > 0 ? 'artƒ±rƒ±ldƒ±' : 'azaltƒ±ldƒ±'}: ${amount.toFixed(2)} ‚Ç∫`;
            alert(message);
        }

        function resetBalance() {
            const confirmMessage = '‚ö†Ô∏è Kasayƒ± sƒ±fƒ±rlamak istediƒüinizden emin misiniz? Bu i≈ülem sadece kasa bakiyesini sƒ±fƒ±rlar, bahis ge√ßmi≈üiniz korunur.';
            
            if (!confirm(confirmMessage)) return;
            totalBalance = 0;
            localStorage.setItem('totalBalance', totalBalance);
            updateStats();
            alert('‚úÖ Kasa ba≈üarƒ±yla sƒ±fƒ±rlandƒ±!');
        }

        function saveBets() {
            localStorage.setItem('bets', JSON.stringify(bets));
            localStorage.setItem('totalBalance', totalBalance);
        }

        function openPlatformManager() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-3xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">‚öôÔ∏è Platform Y√∂netimi</h3>
                        <button onclick="this.closest('.fixed').remove()" 
                                class="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Yeni Platform Ekle</label>
                            <div class="flex gap-2">
                                <input type="text" id="new-platform-name" placeholder="Platform adƒ±..." 
                                       class="flex-1 modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                                <button onclick="addNewPlatform()" 
                                        class="gradient-button text-white px-6 py-3 rounded-2xl font-bold">
                                    ‚ûï
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Mevcut √ñzel Platformlar</label>
                            <div id="custom-platforms-list" class="space-y-2 max-h-60 overflow-y-auto">
                                <div class="mb-4">
                                    <h4 class="font-semibold text-gray-700 mb-2">Varsayƒ±lan Platformlar (${defaultPlatforms.length})</h4>
                                    <div class="text-xs text-gray-500 max-h-32 overflow-y-auto bg-gray-50 p-3 rounded-xl">
                                        ${defaultPlatforms.join(', ')}
                                    </div>
                                </div>
                                ${customPlatforms.length === 0 ? 
                                    '<div class="text-gray-500 text-center py-4">Hen√ºz √∂zel platform eklenmemi≈ü</div>' :
                                    `<div>
                                        <h4 class="font-semibold text-gray-700 mb-2">√ñzel Platformlar (${customPlatforms.length})</h4>
                                        <div class="space-y-2">
                                            ${customPlatforms.map(platform => `
                                                <div class="flex items-center justify-between bg-gray-100 px-4 py-3 rounded-2xl">
                                                    <span class="font-medium text-gray-800">${platform}</span>
                                                    <button onclick="removeCustomPlatform('${platform}')" 
                                                            class="text-red-500 hover:text-red-700 font-bold">
                                                        üóëÔ∏è
                                                    </button>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>`
                                }
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <button onclick="this.closest('.fixed').remove()" 
                                class="w-full gradient-button text-white py-3 rounded-2xl font-bold">
                            ‚úÖ Tamam
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function addNewPlatform() {
            const input = document.getElementById('new-platform-name');
            const platformName = input.value.trim();
            
            if (!platformName) {
                alert('‚ö†Ô∏è L√ºtfen platform adƒ±nƒ± girin!');
                return;
            }
            
            if (customPlatforms.includes(platformName)) {
                alert('‚ö†Ô∏è Bu platform zaten mevcut!');
                return;
            }
            
            customPlatforms.push(platformName);
            localStorage.setItem('customPlatforms', JSON.stringify(customPlatforms));
            
            // Update the modal list
            const listContainer = document.getElementById('custom-platforms-list');
            listContainer.innerHTML = customPlatforms.map(platform => `
                <div class="flex items-center justify-between bg-gray-100 px-4 py-3 rounded-2xl">
                    <span class="font-medium text-gray-800">${platform}</span>
                    <button onclick="removeCustomPlatform('${platform}')" 
                            class="text-red-500 hover:text-red-700 font-bold">
                        üóëÔ∏è
                    </button>
                </div>
            `).join('');
            
            input.value = '';
            alert('‚úÖ Platform ba≈üarƒ±yla eklendi!');
        }

        function removeCustomPlatform(platformName) {
            const confirmMessage = `"${platformName}" platformunu silmek istediƒüinizden emin misiniz?`;
            
            if (!confirm(confirmMessage)) return;
            
            customPlatforms = customPlatforms.filter(p => p !== platformName);
            localStorage.setItem('customPlatforms', JSON.stringify(customPlatforms));
            
            // Update the modal list
            const listContainer = document.getElementById('custom-platforms-list');
            if (customPlatforms.length === 0) {
                listContainer.innerHTML = '<div class="text-gray-500 text-center py-4">Hen√ºz √∂zel platform eklenmemi≈ü</div>';
            } else {
                listContainer.innerHTML = customPlatforms.map(platform => `
                    <div class="flex items-center justify-between bg-gray-100 px-4 py-3 rounded-2xl">
                        <span class="font-medium text-gray-800">${platform}</span>
                        <button onclick="removeCustomPlatform('${platform}')" 
                                class="text-red-500 hover:text-red-700 font-bold">
                            üóëÔ∏è
                        </button>
                    </div>
                `).join('');
            }
            
            alert('‚úÖ Platform silindi!');
        }

        function toggleSlotOptions() {
            const betType = document.getElementById('bet-type').value;
            const slotOptionsContainer = document.getElementById('slot-options-container');
            const sportsFields = document.getElementById('sports-fields');
            const slotFields = document.getElementById('slot-fields');
            const freespinDetails = document.getElementById('freespin-details');
            
            if (betType === 'Slot') {
                slotOptionsContainer.classList.remove('hidden');
                sportsFields.classList.add('hidden');
                slotFields.classList.remove('hidden');
                
                // Show appropriate details based on slot type
                const slotType = document.getElementById('slot-type').value;
                const happyHourDetails = document.getElementById('happy-hour-details');
                
                freespinDetails.classList.add('hidden');
                happyHourDetails.classList.add('hidden');
                
                if (slotType === 'Freespin') {
                    freespinDetails.classList.remove('hidden');
                } else if (slotType === 'Happy Hour') {
                    happyHourDetails.classList.remove('hidden');
                }
            } else {
                slotOptionsContainer.classList.add('hidden');
                sportsFields.classList.remove('hidden');
                slotFields.classList.add('hidden');
            }
        }

        function toggleFreespinDetails() {
            const slotType = document.getElementById('slot-type').value;
            const freespinDetails = document.getElementById('freespin-details');
            const happyHourDetails = document.getElementById('happy-hour-details');
            
            // Hide all detail sections first
            freespinDetails.classList.add('hidden');
            happyHourDetails.classList.add('hidden');
            
            // Show appropriate section based on slot type
            if (slotType === 'Freespin') {
                freespinDetails.classList.remove('hidden');
            } else if (slotType === 'Happy Hour') {
                happyHourDetails.classList.remove('hidden');
            }
        }

        function toggleWinAmount() {
            const status = document.getElementById('bet-status').value;
            const container = document.getElementById('win-amount-container');
            
            if (status === 'won') {
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }
        }

        function removeScreenshot() {
            document.getElementById('screenshot').value = '';
            document.getElementById('screenshot-preview').classList.add('hidden');
            dropZone.innerHTML = `
                <div class="text-3xl lg:text-4xl mb-2">üì∏</div>
                <div class="text-gray-600 font-medium mb-1 text-sm lg:text-base">G√∂r√ºnt√ºy√º buraya s√ºr√ºkleyin</div>
                <div class="text-xs lg:text-sm text-gray-500">veya <span class="text-purple-600 font-semibold">Ctrl+V</span> ile yapƒ±≈ütƒ±rƒ±n</div>
                <div class="text-xs text-gray-400 mt-2">PNG, JPG, GIF desteklenir</div>
            `;
        }

        // Drag and drop functionality
        const dropZone = document.getElementById('drop-zone');
        const screenshotInput = document.getElementById('screenshot');
        
        // Click to select file
        dropZone.addEventListener('click', () => {
            screenshotInput.click();
        });
        
        // File input change
        screenshotInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                handleImageFile(file);
            }
        });
        
        // Drag and drop events
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('border-purple-500', 'bg-purple-100');
        });
        
        dropZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dropZone.classList.remove('border-purple-500', 'bg-purple-100');
        });
        
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('border-purple-500', 'bg-purple-100');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                const file = files[0];
                if (file.type.startsWith('image/')) {
                    handleImageFile(file);
                } else {
                    alert('‚ö†Ô∏è L√ºtfen sadece g√∂r√ºnt√º dosyasƒ± y√ºkleyin!');
                }
            }
        });
        
        // Paste functionality (Ctrl+V)
        document.addEventListener('paste', (e) => {
            const items = e.clipboardData.items;
            for (let i = 0; i < items.length; i++) {
                if (items[i].type.indexOf('image') !== -1) {
                    const file = items[i].getAsFile();
                    
                    // Check if quick add modal is open
                    const quickModal = document.querySelector('.fixed');
                    const isQuickModal = quickModal && quickModal.innerHTML.includes('Hƒ±zlƒ± Bahis Ekle');
                    
                    if (isQuickModal) {
                        handleQuickImageFile(file);
                    } else {
                        handleImageFile(file);
                    }
                    break;
                }
            }
        });
        
        function handleImageFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('preview-image').src = e.target.result;
                document.getElementById('screenshot-preview').classList.remove('hidden');
                dropZone.innerHTML = `
                    <div class="text-2xl mb-2">‚úÖ</div>
                    <div class="text-green-600 font-medium">G√∂r√ºnt√º y√ºklendi!</div>
                    <div class="text-xs text-gray-500 mt-1">Deƒüi≈ütirmek i√ßin tekrar s√ºr√ºkleyin</div>
                `;
            };
            reader.readAsDataURL(file);
            
            // Update the file input
            const dt = new DataTransfer();
            dt.items.add(file);
            screenshotInput.files = dt.files;
        }

        function updateStats() {
            const completedBets = bets.filter(bet => bet.status !== 'pending');
            const totalProfit = completedBets.filter(bet => bet.profitLoss > 0).reduce((sum, bet) => sum + bet.profitLoss, 0);
            const totalLoss = Math.abs(completedBets.filter(bet => bet.profitLoss < 0).reduce((sum, bet) => sum + bet.profitLoss, 0));
            
            document.getElementById('total-balance').textContent = `${totalBalance.toLocaleString('tr-TR', {minimumFractionDigits: 2})} ‚Ç∫`;
            document.getElementById('total-profit').textContent = `${totalProfit.toLocaleString('tr-TR', {minimumFractionDigits: 2})} ‚Ç∫`;
            document.getElementById('total-loss').textContent = `${totalLoss.toLocaleString('tr-TR', {minimumFractionDigits: 2})} ‚Ç∫`;
            document.getElementById('total-bets').textContent = bets.length;
        }

        function renderHistory() {
            const tbody = document.getElementById('history-table');
            const mobileHistory = document.getElementById('mobile-history');
            
            if (bets.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center py-12 text-gray-500">
                            <div class="flex flex-col items-center space-y-3">
                                <div class="text-6xl opacity-50">üéØ</div>
                                <div class="text-lg font-medium">Hen√ºz kayƒ±t bulunmuyor</div>
                                <div class="text-sm">ƒ∞lk bahisinizi ekleyin!</div>
                            </div>
                        </td>
                    </tr>
                `;
                mobileHistory.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <div class="flex flex-col items-center space-y-3">
                            <div class="text-6xl opacity-50">üéØ</div>
                            <div class="text-lg font-medium">Hen√ºz kayƒ±t bulunmuyor</div>
                            <div class="text-sm">ƒ∞lk bahisinizi ekleyin!</div>
                        </div>
                    </div>
                `;
                return;
            }
            
            // Desktop table
            tbody.innerHTML = bets.map(bet => {
                const statusBadge = bet.status === 'pending' ? 
                    '<span class="px-3 py-1 bg-yellow-500 text-white rounded-full text-xs font-medium">‚è≥ Bekliyor</span>' :
                    bet.status === 'won' ? 
                    '<span class="px-3 py-1 bg-green-500 text-white rounded-full text-xs font-medium">‚úÖ Kazandƒ±</span>' :
                    '<span class="px-3 py-1 bg-red-500 text-white rounded-full text-xs font-medium">‚ùå Kaybetti</span>';
                
                return `
                <tr class="table-row border-b border-gray-100">
                    <td class="py-4 px-4">
                        <div class="text-sm font-medium text-gray-800">${bet.date}</div>
                        <div class="text-xs text-gray-500">${bet.time}</div>
                    </td>
                    <td class="py-4 px-4">
                        <span class="font-semibold text-gray-800">${bet.platform}</span>
                    </td>
                    <td class="py-4 px-4">
                        <span class="px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-full text-xs font-medium">${bet.betType}</span>
                    </td>
                    <td class="py-4 px-4 text-right font-semibold text-gray-800">${bet.betAmount.toFixed(2)} ‚Ç∫</td>
                    <td class="py-4 px-4 text-center">${statusBadge}</td>
                    <td class="py-4 px-4 text-right font-bold ${bet.status === 'pending' ? 'text-gray-500' : bet.profitLoss >= 0 ? 'profit' : 'loss'}">
                        ${bet.status === 'pending' ? '-' : (bet.profitLoss >= 0 ? '+' : '') + bet.profitLoss.toFixed(2) + ' ‚Ç∫'}
                    </td>
                    <td class="py-4 px-4 text-center">
                        <div class="flex justify-center space-x-2">
                            ${bet.status === 'pending' ? `
                                <button onclick="updateBetStatus(${bet.id}, 'won')" 
                                        class="icon-button bg-green-100 hover:bg-green-200 text-green-600" title="Kazandƒ±">
                                    ‚úÖ
                                </button>
                                <button onclick="updateBetStatus(${bet.id}, 'lost')" 
                                        class="icon-button bg-red-100 hover:bg-red-200 text-red-600" title="Kaybetti">
                                    ‚ùå
                                </button>
                            ` : `
                                <button onclick="editBet(${bet.id})" 
                                        class="icon-button bg-orange-100 hover:bg-orange-200 text-orange-600" title="D√ºzenle">
                                    ‚úèÔ∏è
                                </button>
                            `}
                            ${bet.screenshot ? `
                                <button onclick="viewScreenshot('${bet.screenshot}')" 
                                        class="icon-button bg-blue-100 hover:bg-blue-200 text-blue-600" title="Ekran G√∂r√ºnt√ºs√º">
                                    üì∏
                                </button>
                            ` : ''}
                            <button onclick="deleteBet(${bet.id})" 
                                    class="icon-button bg-red-100 hover:bg-red-200 text-red-600" title="Sil">
                                üóëÔ∏è
                            </button>
                        </div>
                    </td>
                </tr>
                ${(bet.description || bet.betSelection || bet.slotGame) ? `
                <tr class="border-b border-gray-50">
                    <td colspan="7" class="py-4 px-4 bg-gradient-to-r from-blue-50 to-purple-50">
                        <div class="bg-white rounded-2xl p-4 shadow-sm border border-blue-100">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                ${bet.slotGame ? `
                                    <div class="space-y-2">
                                        <div class="text-sm font-bold text-gray-800">üé∞ Slot Oyunu:</div>
                                        <div class="text-sm text-gray-700 bg-gray-50 px-3 py-2 rounded-lg">${bet.slotGame}</div>
                                        ${bet.spinCount && bet.betPerSpin ? `
                                            <div class="text-xs text-gray-600">üé≤ ${bet.spinCount} spin √ó ${bet.betPerSpin}‚Ç∫ = ${(bet.spinCount * bet.betPerSpin).toFixed(2)}‚Ç∫</div>
                                        ` : ''}
                                        ${bet.freespinInfo ? `
                                            <div class="text-xs text-green-700 bg-green-50 px-2 py-1 rounded">üéÅ ${bet.freespinInfo}</div>
                                        ` : ''}
                                        ${bet.happyHourInfo ? `
                                            <div class="text-xs text-orange-700 bg-orange-50 px-2 py-1 rounded">‚è∞ ${bet.happyHourInfo}</div>
                                        ` : ''}
                                    </div>
                                ` : ''}
                                ${bet.betSelection || bet.description ? `
                                    <div class="space-y-2">
                                        ${bet.betSelection ? `
                                            <div>
                                                <div class="text-sm font-bold text-gray-800">üéØ Bahis Se√ßimi:</div>
                                                <div class="text-sm text-gray-700 bg-blue-50 px-3 py-2 rounded-lg font-medium">${bet.betSelection}</div>
                                            </div>
                                        ` : ''}
                                        ${bet.description ? `
                                            <div>
                                                <div class="text-sm font-bold text-gray-800">‚öΩ Ma√ßlar:</div>
                                                <div class="text-sm text-gray-700 bg-gray-50 px-3 py-2 rounded-lg leading-relaxed">${bet.description.split('/').map(match => match.trim()).join('<br>‚Ä¢ ')}</div>
                                            </div>
                                        ` : ''}
                                        ${bet.odds ? `
                                            <div class="text-xs text-purple-700 bg-purple-50 px-2 py-1 rounded font-semibold">üìä Toplam Oran: ${bet.odds}</div>
                                        ` : ''}
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </td>
                </tr>
                ` : ''}
                `;
            }).join('');

            // Mobile cards
            mobileHistory.innerHTML = bets.map(bet => {
                const statusClass = bet.status === 'pending' ? 'pending' : bet.status === 'won' ? 'won' : 'lost';
                const statusIcon = bet.status === 'pending' ? '‚è≥' : bet.status === 'won' ? '‚úÖ' : '‚ùå';
                const statusText = bet.status === 'pending' ? 'Bekliyor' : bet.status === 'won' ? 'Kazandƒ±' : 'Kaybetti';
                
                return `
                <div class="mobile-card ${statusClass}">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <div class="font-bold text-gray-800 text-lg">${bet.platform}</div>
                            <div class="text-sm text-gray-500">${bet.date} ‚Ä¢ ${bet.time}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold ${bet.status === 'pending' ? 'text-gray-500' : bet.profitLoss >= 0 ? 'text-green-600' : 'text-red-600'}">
                                ${bet.status === 'pending' ? bet.betAmount.toFixed(2) + ' ‚Ç∫' : (bet.profitLoss >= 0 ? '+' : '') + bet.profitLoss.toFixed(2) + ' ‚Ç∫'}
                            </div>
                            <div class="text-xs text-gray-500">Bahis: ${bet.betAmount.toFixed(2)} ‚Ç∫</div>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between mb-3">
                        <span class="px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-full text-xs font-medium">${bet.betType}</span>
                        <span class="px-3 py-1 ${bet.status === 'pending' ? 'bg-yellow-500' : bet.status === 'won' ? 'bg-green-500' : 'bg-red-500'} text-white rounded-full text-xs font-medium">
                            ${statusIcon} ${statusText}
                        </span>
                    </div>
                    
                    ${(bet.betSelection || bet.description || bet.slotGame) ? `
                    <div class="mb-3 bg-white rounded-2xl p-4 border border-gray-200 shadow-sm">
                        ${bet.slotGame ? `
                            <div class="mb-3">
                                <div class="text-xs font-bold text-gray-700 mb-1">üé∞ Slot Oyunu:</div>
                                <div class="text-sm text-gray-800 bg-gray-50 px-3 py-2 rounded-lg font-medium">${bet.slotGame}</div>
                                ${bet.spinCount && bet.betPerSpin ? `
                                    <div class="text-xs text-gray-600 mt-1">üé≤ ${bet.spinCount} spin √ó ${bet.betPerSpin}‚Ç∫ = ${(bet.spinCount * bet.betPerSpin).toFixed(2)}‚Ç∫</div>
                                ` : ''}
                                ${bet.freespinInfo ? `
                                    <div class="text-xs text-green-700 bg-green-50 px-2 py-1 rounded mt-1 inline-block">üéÅ ${bet.freespinInfo}</div>
                                ` : ''}
                                ${bet.happyHourInfo ? `
                                    <div class="text-xs text-orange-700 bg-orange-50 px-2 py-1 rounded mt-1 inline-block">‚è∞ ${bet.happyHourInfo}</div>
                                ` : ''}
                            </div>
                        ` : ''}
                        ${bet.betSelection ? `
                            <div class="mb-3">
                                <div class="text-xs font-bold text-gray-700 mb-1">üéØ Bahis Se√ßimi:</div>
                                <div class="text-sm text-gray-800 bg-blue-50 px-3 py-2 rounded-lg font-medium">${bet.betSelection}</div>
                            </div>
                        ` : ''}
                        ${bet.description ? `
                            <div class="mb-3">
                                <div class="text-xs font-bold text-gray-700 mb-1">‚öΩ Ma√ßlar:</div>
                                <div class="text-sm text-gray-800 bg-gray-50 px-3 py-2 rounded-lg leading-relaxed">
                                    ${bet.description.split('/').map(match => `‚Ä¢ ${match.trim()}`).join('<br>')}
                                </div>
                            </div>
                        ` : ''}
                        ${bet.odds ? `
                            <div class="text-xs text-purple-700 bg-purple-50 px-2 py-1 rounded font-semibold inline-block">üìä Toplam Oran: ${bet.odds}</div>
                        ` : ''}
                    </div>
                    ` : ''}
                    
                    <div class="mobile-actions">
                        ${bet.status === 'pending' ? `
                            <button onclick="updateBetStatus(${bet.id}, 'won')" 
                                    class="bg-green-500 hover:bg-green-600 text-white">
                                ‚úÖ Kazandƒ±
                            </button>
                            <button onclick="updateBetStatus(${bet.id}, 'lost')" 
                                    class="bg-red-500 hover:bg-red-600 text-white">
                                ‚ùå Kaybetti
                            </button>
                        ` : `
                            <button onclick="editBet(${bet.id})" 
                                    class="bg-orange-500 hover:bg-orange-600 text-white">
                                ‚úèÔ∏è D√ºzenle
                            </button>
                        `}
                        ${bet.screenshot ? `
                            <button onclick="viewScreenshot('${bet.screenshot}')" 
                                    class="bg-blue-500 hover:bg-blue-600 text-white">
                                üì∏ G√∂r√ºnt√º
                            </button>
                        ` : ''}
                        <button onclick="deleteBet(${bet.id})" 
                                class="bg-red-500 hover:bg-red-600 text-white">
                            üóëÔ∏è Sil
                        </button>
                    </div>
                </div>
                `;
            }).join('');
        }

        function filterHistory() {
            const filterType = document.getElementById('filter-type').value;
            let filteredBets = bets;
            
            if (filterType !== 'all') {
                if (filterType === 'profit') {
                    filteredBets = bets.filter(bet => bet.profitLoss > 0);
                } else if (filterType === 'loss') {
                    filteredBets = bets.filter(bet => bet.profitLoss < 0);
                } else {
                    filteredBets = bets.filter(bet => bet.betType === filterType);
                }
            }
            
            const tbody = document.getElementById('history-table');
            const mobileHistory = document.getElementById('mobile-history');
            
            if (filteredBets.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center py-12 text-gray-500">
                            <div class="flex flex-col items-center space-y-3">
                                <div class="text-6xl opacity-50">üîç</div>
                                <div class="text-lg font-medium">Bu filtrede kayƒ±t bulunmuyor</div>
                            </div>
                        </td>
                    </tr>
                `;
                mobileHistory.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <div class="flex flex-col items-center space-y-3">
                            <div class="text-6xl opacity-50">üîç</div>
                            <div class="text-lg font-medium">Bu filtrede kayƒ±t bulunmuyor</div>
                        </div>
                    </div>
                `;
                return;
            }
            
            // Apply same rendering logic with filtered data
            // (Same code as renderHistory but with filteredBets instead of bets)
        }

        function updateBetStatus(id, newStatus) {
            const bet = bets.find(b => b.id === id);
            if (!bet) return;
            
            let winAmount = 0;
            if (newStatus === 'won') {
                // Automatically calculate win amount: bet amount √ó odds
                winAmount = bet.betAmount * (bet.odds || 1);
            }
            
            // Update bet
            bet.status = newStatus;
            bet.winAmount = winAmount;
            bet.profitLoss = newStatus === 'won' ? winAmount - bet.betAmount : -bet.betAmount;
            
            // Update balance
            totalBalance += bet.profitLoss;
            
            saveBets();
            updateStats();
            renderHistory();
            
            const statusText = newStatus === 'won' ? 'kazandƒ±' : 'kaybetti';
            const profitText = newStatus === 'won' ? `+${bet.profitLoss.toFixed(2)} ‚Ç∫ kar` : `${bet.profitLoss.toFixed(2)} ‚Ç∫ zarar`;
            const message = `‚úÖ Bahis ${statusText} olarak i≈üaretlendi! (${profitText})`;
            
            alert(message);
        }

        function viewScreenshot(screenshot) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="relative max-w-4xl max-h-full">
                    <img src="${screenshot}" class="max-w-full max-h-full object-contain rounded-2xl">
                    <button onclick="this.parentElement.parentElement.remove()" 
                            class="absolute top-4 right-4 bg-red-500 hover:bg-red-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold">
                        ‚úï
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function deleteBet(id) {
            const confirmMessage = 'Bu kaydƒ± silmek istediƒüinizden emin misiniz?';
            
            if (!confirm(confirmMessage)) return;
            
            const bet = bets.find(b => b.id === id);
            if (bet) {
                // Only subtract from balance if bet was completed
                if (bet.status !== 'pending') {
                    totalBalance -= bet.profitLoss;
                }
                bets = bets.filter(b => b.id !== id);
                
                saveBets();
                updateStats();
                renderHistory();
                alert('‚úÖ Kayƒ±t silindi!');
            }
        }

        function importData() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-3xl p-8 max-w-lg w-full max-h-[90vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-xl">
                                üì•
                            </div>
                            <h3 class="text-2xl font-bold text-gray-800">Veri ƒ∞√ße Aktar</h3>
                        </div>
                        <button onclick="this.closest('.fixed').remove()" 
                                class="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="bg-blue-50 p-4 rounded-2xl">
                            <div class="text-sm font-semibold text-blue-800 mb-2">üìã ƒ∞√ße Aktarma Se√ßenekleri:</div>
                            <div class="text-xs text-blue-700 space-y-1">
                                <div>‚Ä¢ JSON dosyasƒ± y√ºkle (√∂nceki dƒ±≈üa aktarƒ±mlardan)</div>
                                <div>‚Ä¢ JSON metni yapƒ±≈ütƒ±r</div>
                                <div>‚Ä¢ Mevcut verilerle birle≈ütir veya deƒüi≈ütir</div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">üìÅ JSON Dosyasƒ± Y√ºkle</label>
                            <div class="border-2 border-dashed border-green-300 rounded-2xl p-6 text-center cursor-pointer hover:border-green-400 hover:bg-green-50 transition-all" 
                                 id="import-drop-zone">
                                <div class="text-3xl mb-2">üìÅ</div>
                                <div class="text-gray-600 font-medium mb-1">JSON dosyasƒ±nƒ± buraya s√ºr√ºkleyin</div>
                                <div class="text-sm text-gray-500">veya <span class="text-green-600 font-semibold">tƒ±klayarak se√ßin</span></div>
                            </div>
                            <input type="file" id="import-file" accept=".json" class="hidden">
                        </div>
                        
                        <div class="text-center text-gray-400 font-semibold">VEYA</div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">üìù JSON Metni Yapƒ±≈ütƒ±r</label>
                            <textarea id="import-text" rows="8" 
                                      class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-mono text-sm resize-none"
                                      placeholder='{"totalBalance": 1000, "bets": [...], "exportDate": "..."}'></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">‚öôÔ∏è ƒ∞√ße Aktarma Modu</label>
                            <select id="import-mode" class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                                <option value="merge">üîÑ Mevcut verilerle birle≈ütir (√∂nerilen)</option>
                                <option value="replace">‚ö†Ô∏è Mevcut verileri deƒüi≈ütir</option>
                            </select>
                        </div>
                        
                        <div class="bg-yellow-50 p-4 rounded-2xl">
                            <div class="text-sm font-semibold text-yellow-800 mb-2">‚ö†Ô∏è √ñnemli Notlar:</div>
                            <div class="text-xs text-yellow-700 space-y-1">
                                <div>‚Ä¢ Birle≈ütir modu: Yeni veriler mevcut verilere eklenir</div>
                                <div>‚Ä¢ Deƒüi≈ütir modu: Mevcut t√ºm veriler silinir!</div>
                                <div>‚Ä¢ ƒ∞≈ülem √∂ncesi mevcut verilerinizi yedekleyin</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex gap-3 mt-6">
                        <button onclick="this.closest('.fixed').remove()" 
                                class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-2xl font-bold">
                            ƒ∞ptal
                        </button>
                        <button onclick="processImport()" 
                                class="flex-1 success-gradient text-white py-3 rounded-2xl font-bold">
                            üì• ƒ∞√ße Aktar
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Setup file drop zone
            const dropZone = document.getElementById('import-drop-zone');
            const fileInput = document.getElementById('import-file');
            
            dropZone.addEventListener('click', () => fileInput.click());
            
            fileInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('import-text').value = e.target.result;
                        dropZone.innerHTML = `
                            <div class="text-2xl mb-2">‚úÖ</div>
                            <div class="text-green-600 font-medium">Dosya y√ºklendi: ${file.name}</div>
                            <div class="text-xs text-gray-500 mt-1">JSON i√ßeriƒüi a≈üaƒüƒ±ya y√ºklendi</div>
                        `;
                    };
                    reader.readAsText(file);
                }
            });
            
            // Drag and drop
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('border-green-500', 'bg-green-100');
            });
            
            dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                dropZone.classList.remove('border-green-500', 'bg-green-100');
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('border-green-500', 'bg-green-100');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const file = files[0];
                    if (file.type === 'application/json' || file.name.endsWith('.json')) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            document.getElementById('import-text').value = e.target.result;
                            dropZone.innerHTML = `
                                <div class="text-2xl mb-2">‚úÖ</div>
                                <div class="text-green-600 font-medium">Dosya y√ºklendi: ${file.name}</div>
                                <div class="text-xs text-gray-500 mt-1">JSON i√ßeriƒüi a≈üaƒüƒ±ya y√ºklendi</div>
                            `;
                        };
                        reader.readAsText(file);
                    } else {
                        alert('‚ö†Ô∏è L√ºtfen sadece .json dosyasƒ± y√ºkleyin!');
                    }
                }
            });
        }

        function processImport() {
            const importText = document.getElementById('import-text').value.trim();
            const importMode = document.getElementById('import-mode').value;
            
            if (!importText) {
                alert('‚ö†Ô∏è L√ºtfen JSON verisi girin veya dosya y√ºkleyin!');
                return;
            }
            
            try {
                const importedData = JSON.parse(importText);
                
                // Validate data structure
                if (!importedData.bets || !Array.isArray(importedData.bets)) {
                    alert('‚ö†Ô∏è Ge√ßersiz veri formatƒ±! Bahis listesi bulunamadƒ±.');
                    return;
                }
                
                // Show confirmation
                const confirmMessage = importMode === 'replace' ? 
                    `‚ö†Ô∏è UYARI: Mevcut t√ºm verileriniz silinecek!\n\nüìä ƒ∞√ße aktarƒ±lacak:\n‚Ä¢ ${importedData.bets.length} bahis kaydƒ±\n‚Ä¢ Kasa bakiyesi: ${importedData.totalBalance || 0} ‚Ç∫\n\nDevam etmek istiyor musunuz?` :
                    `üì• Veri Birle≈ütirme:\n\nüìä Mevcut veriler:\n‚Ä¢ ${bets.length} bahis kaydƒ±\n‚Ä¢ Kasa bakiyesi: ${totalBalance} ‚Ç∫\n\nüìä Eklenecek veriler:\n‚Ä¢ ${importedData.bets.length} bahis kaydƒ±\n‚Ä¢ Kasa bakiyesi: ${importedData.totalBalance || 0} ‚Ç∫\n\n‚úÖ Veriler birle≈ütirilecek. Devam etmek istiyor musunuz?`;
                
                if (!confirm(confirmMessage)) return;
                
                // Process import
                if (importMode === 'replace') {
                    // Replace all data
                    bets = importedData.bets || [];
                    totalBalance = importedData.totalBalance || 0;
                    customPlatforms = importedData.customPlatforms || [];
                } else {
                    // Merge data
                    const newBets = importedData.bets || [];
                    const newBalance = importedData.totalBalance || 0;
                    const newPlatforms = importedData.customPlatforms || [];
                    
                    // Add new bets (avoid duplicates by checking ID and date+time+platform)
                    let addedCount = 0;
                    newBets.forEach(newBet => {
                        const exists = bets.some(existingBet => 
                            existingBet.id === newBet.id || 
                            (existingBet.date === newBet.date && 
                             existingBet.time === newBet.time && 
                             existingBet.platform === newBet.platform &&
                             existingBet.betAmount === newBet.betAmount)
                        );
                        
                        if (!exists) {
                            // Assign new ID to avoid conflicts
                            newBet.id = Date.now() + Math.random();
                            bets.unshift(newBet);
                            addedCount++;
                        }
                    });
                    
                    // Add balance
                    totalBalance += newBalance;
                    
                    // Merge custom platforms
                    newPlatforms.forEach(platform => {
                        if (!customPlatforms.includes(platform)) {
                            customPlatforms.push(platform);
                        }
                    });
                    
                    alert(`‚úÖ Veri birle≈ütirme tamamlandƒ±!\n\nüìä Eklenen:\n‚Ä¢ ${addedCount} yeni bahis kaydƒ±\n‚Ä¢ ${newBalance} ‚Ç∫ kasa bakiyesi\n‚Ä¢ ${newPlatforms.length} platform`);
                }
                
                // Save and update
                saveBets();
                localStorage.setItem('customPlatforms', JSON.stringify(customPlatforms));
                updateStats();
                renderHistory();
                
                // Close modal
                document.querySelector('.fixed').remove();
                
                const successMessage = importMode === 'replace' ? 
                    `‚úÖ Veriler ba≈üarƒ±yla deƒüi≈ütirildi!\n\nüìä Y√ºklenen:\n‚Ä¢ ${bets.length} bahis kaydƒ±\n‚Ä¢ ${totalBalance} ‚Ç∫ kasa bakiyesi` :
                    `‚úÖ Veriler ba≈üarƒ±yla birle≈ütirildi!\n\nüìä Toplam:\n‚Ä¢ ${bets.length} bahis kaydƒ±\n‚Ä¢ ${totalBalance} ‚Ç∫ kasa bakiyesi`;
                
                if (importMode === 'replace') {
                    alert(successMessage);
                }
                
            } catch (error) {
                alert('‚ùå JSON verisi ge√ßersiz! L√ºtfen doƒüru formatta veri girin.\n\nHata: ' + error.message);
            }
        }

        function exportData() {
            if (bets.length === 0) {
                alert('‚ö†Ô∏è Dƒ±≈üa aktarƒ±lacak veri bulunmuyor!');
                return;
            }
            
            const data = {
                totalBalance,
                bets,
                customPlatforms,
                exportDate: new Date().toLocaleString('tr-TR')
            };
            
            const jsonString = JSON.stringify(data, null, 2);
            
            // Try to download the file
            try {
                const blob = new Blob([jsonString], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `bahis-gecmisi-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert('‚úÖ Veriler ba≈üarƒ±yla dƒ±≈üa aktarƒ±ldƒ±!');
            } catch (error) {
                // If download fails, open in new window
                const newWindow = window.open('', '_blank');
                newWindow.document.write(`
                    <html>
                        <head><title>Bahis Verileri - Yedek</title></head>
                        <body style="font-family: monospace; padding: 20px;">
                            <h2>Bahis Takip Verileri</h2>
                            <p>A≈üaƒüƒ±daki metni kopyalayƒ±p .json uzantƒ±lƒ± dosya olarak kaydedin:</p>
                            <textarea style="width: 100%; height: 400px; font-family: monospace;">${jsonString}</textarea>
                            <br><br>
                            <button onclick="navigator.clipboard.writeText(document.querySelector('textarea').value)">
                                üìã Panoya Kopyala
                            </button>
                        </body>
                    </html>
                `);
                
                alert('üìã Veriler yeni pencerede a√ßƒ±ldƒ±. Metni kopyalayƒ±p dosya olarak kaydedin!');
            }
        }

        function clearAllData() {
            const confirmMessage = '‚ö†Ô∏è T√úM VERƒ∞LERƒ∞ Sƒ∞LMEK istediƒüinizden emin misiniz?\n\nBu i≈ülem:\n‚Ä¢ T√ºm bahis kayƒ±tlarƒ±nƒ± siler\n‚Ä¢ Kasa bakiyesini sƒ±fƒ±rlar\n‚Ä¢ Geri alƒ±namaz!\n\nDevam etmek istiyor musunuz?';
            
            if (!confirm(confirmMessage)) return;
            
            // Final confirmation
            const finalConfirm = confirm('üö® SON UYARI!\n\nT√ºm verileriniz kalƒ±cƒ± olarak silinecek!\n\nGer√ßekten devam etmek istiyor musunuz?');
            
            if (!finalConfirm) return;
            
            // Clear all data
            bets = [];
            totalBalance = 0;
            customPlatforms = [];
            
            // Clear localStorage
            localStorage.removeItem('bets');
            localStorage.removeItem('totalBalance');
            localStorage.removeItem('customPlatforms');
            
            // Update UI
            updateStats();
            renderHistory();
            
            alert('‚úÖ T√ºm veriler ba≈üarƒ±yla temizlendi!');
        }

        function openQuickAdd() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-3xl p-6 lg:p-8 max-w-md w-full max-h-[90vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center text-xl">
                                üöÄ
                            </div>
                            <h3 class="text-2xl font-bold text-gray-800">Hƒ±zlƒ± Bahis Ekle</h3>
                        </div>
                        <button onclick="this.closest('.fixed').remove()" 
                                class="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">üìä Oran</label>
                            <input type="number" id="quick-odds" step="0.01" min="1" 
                                   class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                   placeholder="2.50">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">üí∞ Oynadƒ±ƒüƒ±n Miktar (‚Ç∫)</label>
                            <input type="number" id="quick-amount" step="0.01" min="0" 
                                   class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium" 
                                   placeholder="250.00">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">üè¢ Platform</label>
                            <div class="relative">
                                <input type="text" id="quick-platform-search" placeholder="Platform ara veya se√ß..." 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium"
                                       autocomplete="off" onkeyup="filterQuickPlatforms()" onfocus="showQuickPlatformDropdown()" onblur="hideQuickPlatformDropdown()">
                                <div id="quick-platform-dropdown" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-2xl mt-1 max-h-60 overflow-y-auto z-50 hidden shadow-lg">
                                    <!-- Platform options will be populated here -->
                                </div>
                            </div>
                            <input type="hidden" id="quick-selected-platform" value="">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">üì∏ Ekran G√∂r√ºnt√ºs√º (ƒ∞steƒüe Baƒülƒ±)</label>
                            <div class="space-y-3">
                                <div id="quick-drop-zone" class="w-full modern-input px-6 py-6 rounded-2xl border-2 border-dashed border-pink-300 text-center cursor-pointer hover:border-pink-400 hover:bg-pink-50 transition-all">
                                    <div class="text-3xl mb-2">üì∏</div>
                                    <div class="text-gray-600 font-medium mb-1">G√∂r√ºnt√ºy√º buraya s√ºr√ºkleyin</div>
                                    <div class="text-sm text-gray-500">veya <span class="text-pink-600 font-semibold">Ctrl+V</span> ile yapƒ±≈ütƒ±rƒ±n</div>
                                </div>
                                <input type="file" id="quick-screenshot" accept="image/*" class="hidden">
                                <div id="quick-screenshot-preview" class="hidden">
                                    <img id="quick-preview-image" class="w-full h-24 object-cover rounded-2xl border-2 border-gray-200 cursor-pointer hover:opacity-80 transition-opacity" alt="√ñnizleme" onclick="viewScreenshot(this.src)" title="B√ºy√ºtmek i√ßin tƒ±klayƒ±n">
                                    <div class="flex justify-between items-center mt-2">
                                        <span class="text-xs text-gray-400">üì∏ B√ºy√ºtmek i√ßin tƒ±klayƒ±n</span>
                                        <button type="button" onclick="removeQuickScreenshot()" class="text-red-400 hover:text-red-300 text-sm">
                                            üóëÔ∏è Kaldƒ±r
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-r from-pink-50 to-rose-50 p-4 rounded-2xl">
                            <div class="text-sm text-gray-600 mb-2">
                                <strong>üí° Hƒ±zlƒ± Ekleme:</strong>
                            </div>
                            <div class="text-xs text-gray-500 space-y-1">
                                <div>‚Ä¢ Bahis t√ºr√º: Spor Bahis olarak eklenir</div>
                                <div>‚Ä¢ Durum: Bekliyor olarak eklenir</div>
                                <div>‚Ä¢ Diƒüer detaylarƒ± sonra d√ºzenleyebilirsin</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex gap-3 mt-6">
                        <button onclick="this.closest('.fixed').remove()" 
                                class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-2xl font-bold">
                            ƒ∞ptal
                        </button>
                        <button onclick="saveQuickBet()" 
                                class="flex-1 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white py-3 rounded-2xl font-bold">
                            üöÄ Hƒ±zlƒ± Ekle
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Setup quick add drag and drop
            setupQuickDropZone();
        }

        function setupQuickDropZone() {
            const quickDropZone = document.getElementById('quick-drop-zone');
            const quickScreenshotInput = document.getElementById('quick-screenshot');
            
            // Click to select file
            quickDropZone.addEventListener('click', () => {
                quickScreenshotInput.click();
            });
            
            // File input change
            quickScreenshotInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    handleQuickImageFile(file);
                }
            });
            
            // Drag and drop events
            quickDropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                quickDropZone.classList.add('border-pink-500', 'bg-pink-100');
            });
            
            quickDropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                quickDropZone.classList.remove('border-pink-500', 'bg-pink-100');
            });
            
            quickDropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                quickDropZone.classList.remove('border-pink-500', 'bg-pink-100');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const file = files[0];
                    if (file.type.startsWith('image/')) {
                        handleQuickImageFile(file);
                    } else {
                        alert('‚ö†Ô∏è L√ºtfen sadece g√∂r√ºnt√º dosyasƒ± y√ºkleyin!');
                    }
                }
            });
        }

        function handleQuickImageFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('quick-preview-image').src = e.target.result;
                document.getElementById('quick-screenshot-preview').classList.remove('hidden');
                document.getElementById('quick-drop-zone').innerHTML = `
                    <div class="text-2xl mb-2">‚úÖ</div>
                    <div class="text-green-600 font-medium">G√∂r√ºnt√º y√ºklendi!</div>
                    <div class="text-xs text-gray-500 mt-1">Deƒüi≈ütirmek i√ßin tekrar s√ºr√ºkleyin</div>
                `;
            };
            reader.readAsDataURL(file);
            
            // Update the file input
            const dt = new DataTransfer();
            dt.items.add(file);
            document.getElementById('quick-screenshot').files = dt.files;
        }

        function removeQuickScreenshot() {
            document.getElementById('quick-screenshot').value = '';
            document.getElementById('quick-screenshot-preview').classList.add('hidden');
            document.getElementById('quick-drop-zone').innerHTML = `
                <div class="text-3xl mb-2">üì∏</div>
                <div class="text-gray-600 font-medium mb-1">G√∂r√ºnt√ºy√º buraya s√ºr√ºkleyin</div>
                <div class="text-sm text-gray-500">veya <span class="text-pink-600 font-semibold">Ctrl+V</span> ile yapƒ±≈ütƒ±rƒ±n</div>
            `;
        }

        function filterQuickPlatforms() {
            const searchTerm = document.getElementById('quick-platform-search').value.toLowerCase();
            const dropdown = document.getElementById('quick-platform-dropdown');
            const allPlatforms = getAllPlatforms();
            
            const filteredPlatforms = allPlatforms.filter(platform => 
                platform.toLowerCase().includes(searchTerm)
            );
            
            dropdown.innerHTML = filteredPlatforms.map(platform => `
                <div class="px-4 py-3 hover:bg-purple-50 cursor-pointer border-b border-gray-100 last:border-b-0 text-gray-800 font-medium" 
                     onmousedown="selectQuickPlatform('${platform}')">
                    ${platform}
                </div>
            `).join('');
            
            if (filteredPlatforms.length === 0) {
                dropdown.innerHTML = '<div class="px-4 py-3 text-gray-500 text-center">Platform bulunamadƒ±</div>';
            }
        }
        
        function showQuickPlatformDropdown() {
            const dropdown = document.getElementById('quick-platform-dropdown');
            dropdown.classList.remove('hidden');
            filterQuickPlatforms();
        }
        
        function hideQuickPlatformDropdown() {
            setTimeout(() => {
                const dropdown = document.getElementById('quick-platform-dropdown');
                dropdown.classList.add('hidden');
            }, 200);
        }
        
        function selectQuickPlatform(platform) {
            document.getElementById('quick-platform-search').value = platform;
            document.getElementById('quick-selected-platform').value = platform;
            document.getElementById('quick-platform-dropdown').classList.add('hidden');
        }

        function saveQuickBet() {
            const odds = parseFloat(document.getElementById('quick-odds').value) || 0;
            const amount = parseFloat(document.getElementById('quick-amount').value) || 0;
            const platform = document.getElementById('quick-selected-platform').value || document.getElementById('quick-platform-search').value.trim();
            const screenshotFile = document.getElementById('quick-screenshot').files[0];
            
            if (!platform) {
                alert('‚ö†Ô∏è L√ºtfen bir platform se√ßin!');
                return;
            }
            
            if (amount <= 0) {
                alert('‚ö†Ô∏è L√ºtfen ge√ßerli bir bahis miktarƒ± girin!');
                return;
            }
            
            if (odds <= 0) {
                alert('‚ö†Ô∏è L√ºtfen ge√ßerli bir oran girin!');
                return;
            }
            
            // Add to custom platforms if it's a new platform
            if (!defaultPlatforms.includes(platform) && !customPlatforms.includes(platform)) {
                customPlatforms.push(platform);
                localStorage.setItem('customPlatforms', JSON.stringify(customPlatforms));
            }
            
            const bet = {
                id: Date.now(),
                date: new Date().toLocaleDateString('tr-TR'),
                time: new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'}),
                platform: platform,
                betType: 'Spor Bahis',
                betAmount: amount,
                winAmount: 0,
                profitLoss: 0,
                description: '',
                betSelection: '',
                odds: odds,
                status: 'pending',
                screenshot: null
            };
            
            // Handle screenshot
            if (screenshotFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    bet.screenshot = e.target.result;
                    finishQuickAdd(bet);
                };
                reader.readAsDataURL(screenshotFile);
            } else {
                finishQuickAdd(bet);
            }
        }

        function finishQuickAdd(bet) {
            bets.unshift(bet);
            saveBets();
            updateStats();
            renderHistory();
            
            // Close modal
            document.querySelector('.fixed').remove();
            
            alert('üöÄ Hƒ±zlƒ± bahis ba≈üarƒ±yla eklendi! Sonucu g√ºncelleyebilirsin.');
        }

        function editBet(id) {
            const bet = bets.find(b => b.id === id);
            if (!bet) return;
            
            // Create edit modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-3xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">‚úèÔ∏è Bahis D√ºzenle</h3>
                        <button onclick="this.closest('.fixed').remove()" 
                                class="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Platform</label>
                            <div class="relative">
                                <input type="text" id="edit-platform-search" value="${bet.platform}" placeholder="Platform ara veya se√ß..." 
                                       class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium"
                                       autocomplete="off" onkeyup="filterEditPlatforms()" onfocus="showEditPlatformDropdown()" onblur="hideEditPlatformDropdown()">
                                <div id="edit-platform-dropdown" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-2xl mt-1 max-h-60 overflow-y-auto z-50 hidden shadow-lg">
                                    <!-- Platform options will be populated here -->
                                </div>
                            </div>
                            <input type="hidden" id="edit-selected-platform" value="${bet.platform}">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Bahis T√ºr√º</label>
                            <select id="edit-bet-type" class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                                <option value="Spor Bahis" ${bet.betType === 'Spor Bahis' ? 'selected' : ''}>üèà Spor Bahis</option>
                                <option value="Canlƒ± Bahis" ${bet.betType === 'Canlƒ± Bahis' ? 'selected' : ''}>‚ö° Canlƒ± Bahis</option>
                                <option value="Slot" ${bet.betType === 'Slot' ? 'selected' : ''}>üé∞ Slot</option>
                                <option value="Casino" ${bet.betType === 'Casino' ? 'selected' : ''}>üÉè Casino</option>
                                <option value="Sanal Spor" ${bet.betType === 'Sanal Spor' ? 'selected' : ''}>üéÆ Sanal Spor</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Bahis Miktarƒ± (‚Ç∫)</label>
                            <input type="number" id="edit-bet-amount" step="0.01" min="0" value="${bet.betAmount}"
                                   class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Durum</label>
                            <select id="edit-bet-status" onchange="toggleEditWinAmount()" class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                                <option value="pending" ${bet.status === 'pending' ? 'selected' : ''}>‚è≥ Bekliyor</option>
                                <option value="won" ${bet.status === 'won' ? 'selected' : ''}>‚úÖ Kazandƒ±</option>
                                <option value="lost" ${bet.status === 'lost' ? 'selected' : ''}>‚ùå Kaybetti</option>
                            </select>
                        </div>
                        
                        <div id="edit-win-amount-container" class="${bet.status !== 'won' ? 'hidden' : ''}">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Kazan√ß Miktarƒ± (‚Ç∫)</label>
                            <input type="number" id="edit-win-amount" step="0.01" min="0" value="${bet.winAmount}"
                                   class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Bahis Se√ßimi</label>
                            <input type="text" id="edit-bet-selection" value="${bet.betSelection || ''}"
                                   class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium"
                                   placeholder="√ñrn: 2.5 √úst, 1X, Kar≈üƒ±lƒ±klƒ± Gol Var">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ma√ßlar</label>
                            <input type="text" id="edit-description" value="${bet.description || ''}"
                                   class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Oran</label>
                            <input type="number" id="edit-odds" step="0.01" min="1" value="${bet.odds || ''}"
                                   class="w-full modern-input px-4 py-3 rounded-2xl focus:outline-none font-medium">
                        </div>
                    </div>
                    
                    <div class="flex gap-3 mt-6">
                        <button onclick="this.closest('.fixed').remove()" 
                                class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-2xl font-bold">
                            ƒ∞ptal
                        </button>
                        <button onclick="saveBetEdit(${bet.id})" 
                                class="flex-1 gradient-button text-white py-3 rounded-2xl font-bold">
                            üíæ Kaydet
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function toggleEditWinAmount() {
            const status = document.getElementById('edit-bet-status').value;
            const container = document.getElementById('edit-win-amount-container');
            
            if (status === 'won') {
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }
        }
        
        function filterEditPlatforms() {
            const searchTerm = document.getElementById('edit-platform-search').value.toLowerCase();
            const dropdown = document.getElementById('edit-platform-dropdown');
            const allPlatforms = getAllPlatforms();
            
            const filteredPlatforms = allPlatforms.filter(platform => 
                platform.toLowerCase().includes(searchTerm)
            );
            
            dropdown.innerHTML = filteredPlatforms.map(platform => `
                <div class="px-4 py-3 hover:bg-purple-50 cursor-pointer border-b border-gray-100 last:border-b-0 text-gray-800 font-medium" 
                     onmousedown="selectEditPlatform('${platform}')">
                    ${platform}
                </div>
            `).join('');
            
            if (filteredPlatforms.length === 0) {
                dropdown.innerHTML = '<div class="px-4 py-3 text-gray-500 text-center">Platform bulunamadƒ±</div>';
            }
        }
        
        function showEditPlatformDropdown() {
            const dropdown = document.getElementById('edit-platform-dropdown');
            dropdown.classList.remove('hidden');
            filterEditPlatforms();
        }
        
        function hideEditPlatformDropdown() {
            setTimeout(() => {
                const dropdown = document.getElementById('edit-platform-dropdown');
                dropdown.classList.add('hidden');
            }, 200);
        }
        
        function selectEditPlatform(platform) {
            document.getElementById('edit-platform-search').value = platform;
            document.getElementById('edit-selected-platform').value = platform;
            document.getElementById('edit-platform-dropdown').classList.add('hidden');
        }
        
        function saveBetEdit(id) {
            const bet = bets.find(b => b.id === id);
            if (!bet) return;
            
            // Get old values to calculate balance difference
            const oldProfitLoss = bet.status !== 'pending' ? bet.profitLoss : 0;
            
            // Get new values
            const platform = document.getElementById('edit-selected-platform').value || document.getElementById('edit-platform-search').value.trim();
            const betType = document.getElementById('edit-bet-type').value;
            const betAmount = parseFloat(document.getElementById('edit-bet-amount').value) || 0;
            const betStatus = document.getElementById('edit-bet-status').value;
            const winAmount = parseFloat(document.getElementById('edit-win-amount').value) || 0;
            const betSelection = document.getElementById('edit-bet-selection').value;
            const description = document.getElementById('edit-description').value;
            const odds = parseFloat(document.getElementById('edit-odds').value) || 0;
            
            if (betAmount <= 0) {
                alert('‚ö†Ô∏è L√ºtfen ge√ßerli bir bahis miktarƒ± girin!');
                return;
            }
            
            // Calculate new profit/loss
            let newProfitLoss = 0;
            let finalWinAmount = 0;
            
            if (betStatus === 'won') {
                finalWinAmount = winAmount > 0 ? winAmount : (betAmount * odds);
                newProfitLoss = finalWinAmount - betAmount;
            } else if (betStatus === 'lost') {
                finalWinAmount = 0;
                newProfitLoss = -betAmount;
            }
            
            // Update bet
            bet.platform = platform;
            bet.betType = betType;
            bet.betAmount = betAmount;
            bet.status = betStatus;
            bet.winAmount = finalWinAmount;
            bet.profitLoss = newProfitLoss;
            bet.betSelection = betSelection;
            bet.description = description;
            bet.odds = odds;
            
            // Update balance (remove old impact, add new impact)
            totalBalance -= oldProfitLoss;
            if (betStatus !== 'pending') {
                totalBalance += newProfitLoss;
            }
            
            saveBets();
            updateStats();
            renderHistory();
            
            // Close modal
            document.querySelector('.fixed').remove();
            
            alert('‚úÖ Bahis ba≈üarƒ±yla g√ºncellendi!');
        }

        function openStatistics() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-3xl p-6 lg:p-8 max-w-6xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-500 flex items-center justify-center text-2xl">
                                üìä
                            </div>
                            <h3 class="text-3xl font-bold text-gray-800">Detaylƒ± ƒ∞statistikler</h3>
                        </div>
                        <button onclick="this.closest('.fixed').remove()" 
                                class="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Platform ƒ∞statistikleri -->
                        <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl p-6">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-xl">
                                    üèÜ
                                </div>
                                <h4 class="text-xl font-bold text-gray-800">Platform Performansƒ±</h4>
                            </div>
                            <div id="platform-stats" class="space-y-3">
                                <!-- Platform stats will be populated here -->
                            </div>
                        </div>
                        
                        <!-- G√ºnl√ºk/Haftalƒ±k Kar-Zarar -->
                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-3xl p-6">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-xl">
                                    üìà
                                </div>
                                <h4 class="text-xl font-bold text-gray-800">Zaman Bazlƒ± Analiz</h4>
                            </div>
                            <div id="time-stats" class="space-y-4">
                                <!-- Time-based stats will be populated here -->
                            </div>
                        </div>
                        
                        <!-- Bahis T√ºr√º ƒ∞statistikleri -->
                        <div class="bg-gradient-to-br from-orange-50 to-red-50 rounded-3xl p-6">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-xl">
                                    üéØ
                                </div>
                                <h4 class="text-xl font-bold text-gray-800">Bahis T√ºr√º Analizi</h4>
                            </div>
                            <div id="bet-type-stats" class="space-y-3">
                                <!-- Bet type stats will be populated here -->
                            </div>
                        </div>
                        
                        <!-- Ba≈üarƒ± Oranlarƒ± -->
                        <div class="bg-gradient-to-br from-pink-50 to-rose-50 rounded-3xl p-6">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center text-xl">
                                    üé≤
                                </div>
                                <h4 class="text-xl font-bold text-gray-800">Ba≈üarƒ± Oranlarƒ±</h4>
                            </div>
                            <div id="success-stats" class="space-y-4">
                                <!-- Success rate stats will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- En ƒ∞yi/En K√∂t√º Performanslar -->
                    <div class="mt-6 bg-gradient-to-br from-yellow-50 to-amber-50 rounded-3xl p-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-yellow-500 to-amber-500 flex items-center justify-center text-xl">
                                üèÖ
                            </div>
                            <h4 class="text-xl font-bold text-gray-800">Rekorlar & √ñne √áƒ±kanlar</h4>
                        </div>
                        <div id="records-stats" class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                            <!-- Records will be populated here -->
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <button onclick="this.closest('.fixed').remove()" 
                                class="w-full bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white py-4 rounded-2xl font-bold text-lg">
                            ‚úÖ Tamam
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Populate statistics
            populateStatistics();
        }

        function populateStatistics() {
            if (bets.length === 0) {
                document.getElementById('platform-stats').innerHTML = '<div class="text-gray-500 text-center py-4">Hen√ºz veri bulunmuyor</div>';
                document.getElementById('time-stats').innerHTML = '<div class="text-gray-500 text-center py-4">Hen√ºz veri bulunmuyor</div>';
                document.getElementById('bet-type-stats').innerHTML = '<div class="text-gray-500 text-center py-4">Hen√ºz veri bulunmuyor</div>';
                document.getElementById('success-stats').innerHTML = '<div class="text-gray-500 text-center py-4">Hen√ºz veri bulunmuyor</div>';
                document.getElementById('records-stats').innerHTML = '<div class="text-gray-500 text-center py-4">Hen√ºz veri bulunmuyor</div>';
                return;
            }
            
            // Platform ƒ∞statistikleri
            const platformStats = {};
            bets.forEach(bet => {
                if (!platformStats[bet.platform]) {
                    platformStats[bet.platform] = {
                        totalBets: 0,
                        totalAmount: 0,
                        totalProfit: 0,
                        wonBets: 0,
                        lostBets: 0,
                        pendingBets: 0
                    };
                }
                
                const stats = platformStats[bet.platform];
                stats.totalBets++;
                stats.totalAmount += bet.betAmount;
                
                if (bet.status === 'won') {
                    stats.wonBets++;
                    stats.totalProfit += bet.profitLoss;
                } else if (bet.status === 'lost') {
                    stats.lostBets++;
                    stats.totalProfit += bet.profitLoss;
                } else {
                    stats.pendingBets++;
                }
            });
            
            // Sort platforms by profit
            const sortedPlatforms = Object.entries(platformStats)
                .sort(([,a], [,b]) => b.totalProfit - a.totalProfit)
                .slice(0, 10);
            
            document.getElementById('platform-stats').innerHTML = sortedPlatforms.map(([platform, stats], index) => {
                const winRate = stats.wonBets + stats.lostBets > 0 ? 
                    ((stats.wonBets / (stats.wonBets + stats.lostBets)) * 100).toFixed(1) : 0;
                const profitColor = stats.totalProfit >= 0 ? 'text-green-600' : 'text-red-600';
                const rankIcon = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}.`;
                
                return `
                    <div class="bg-white rounded-2xl p-4 shadow-sm border border-blue-100">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center space-x-2">
                                <span class="text-lg font-bold">${rankIcon}</span>
                                <span class="font-bold text-gray-800">${platform}</span>
                            </div>
                            <span class="font-bold ${profitColor}">
                                ${stats.totalProfit >= 0 ? '+' : ''}${stats.totalProfit.toFixed(2)} ‚Ç∫
                            </span>
                        </div>
                        <div class="grid grid-cols-3 gap-2 text-xs text-gray-600">
                            <div class="text-center">
                                <div class="font-semibold text-gray-800">${stats.totalBets}</div>
                                <div>Toplam Bahis</div>
                            </div>
                            <div class="text-center">
                                <div class="font-semibold text-gray-800">${winRate}%</div>
                                <div>Ba≈üarƒ± Oranƒ±</div>
                            </div>
                            <div class="text-center">
                                <div class="font-semibold text-gray-800">${stats.totalAmount.toFixed(0)} ‚Ç∫</div>
                                <div>Toplam Yatƒ±rƒ±m</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Zaman Bazlƒ± Analiz
            const today = new Date().toLocaleDateString('tr-TR');
            const thisWeekStart = new Date();
            thisWeekStart.setDate(thisWeekStart.getDate() - thisWeekStart.getDay());
            const thisWeekStartStr = thisWeekStart.toLocaleDateString('tr-TR');
            
            const thisMonthStart = new Date();
            thisMonthStart.setDate(1);
            const thisMonthStartStr = thisMonthStart.toLocaleDateString('tr-TR');
            
            // G√ºnl√ºk kar-zarar
            const dailyStats = {};
            const weeklyStats = {};
            const monthlyStats = {};
            
            bets.forEach(bet => {
                if (bet.status === 'pending') return;
                
                // G√ºnl√ºk
                if (!dailyStats[bet.date]) {
                    dailyStats[bet.date] = { profit: 0, bets: 0 };
                }
                dailyStats[bet.date].profit += bet.profitLoss;
                dailyStats[bet.date].bets++;
                
                // Haftalƒ±k (basit hesaplama)
                const betDate = new Date(bet.date.split('.').reverse().join('-'));
                const weekKey = `${betDate.getFullYear()}-W${Math.ceil(betDate.getDate()/7)}`;
                if (!weeklyStats[weekKey]) {
                    weeklyStats[weekKey] = { profit: 0, bets: 0 };
                }
                weeklyStats[weekKey].profit += bet.profitLoss;
                weeklyStats[weekKey].bets++;
                
                // Aylƒ±k
                const monthKey = bet.date.substring(3); // MM.YYYY
                if (!monthlyStats[monthKey]) {
                    monthlyStats[monthKey] = { profit: 0, bets: 0 };
                }
                monthlyStats[monthKey].profit += bet.profitLoss;
                monthlyStats[monthKey].bets++;
            });
            
            const todayStats = dailyStats[today] || { profit: 0, bets: 0 };
            const bestDay = Object.entries(dailyStats).sort(([,a], [,b]) => b.profit - a.profit)[0];
            const worstDay = Object.entries(dailyStats).sort(([,a], [,b]) => a.profit - b.profit)[0];
            
            document.getElementById('time-stats').innerHTML = `
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-green-100">
                    <div class="text-sm font-bold text-gray-700 mb-2">üìÖ Bug√ºn (${today})</div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">${todayStats.bets} bahis</span>
                        <span class="font-bold ${todayStats.profit >= 0 ? 'text-green-600' : 'text-red-600'}">
                            ${todayStats.profit >= 0 ? '+' : ''}${todayStats.profit.toFixed(2)} ‚Ç∫
                        </span>
                    </div>
                </div>
                
                ${bestDay ? `
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-green-100">
                    <div class="text-sm font-bold text-green-700 mb-2">üèÜ En ƒ∞yi G√ºn</div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">${bestDay[0]} (${bestDay[1].bets} bahis)</span>
                        <span class="font-bold text-green-600">+${bestDay[1].profit.toFixed(2)} ‚Ç∫</span>
                    </div>
                </div>
                ` : ''}
                
                ${worstDay ? `
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-red-100">
                    <div class="text-sm font-bold text-red-700 mb-2">üìâ En K√∂t√º G√ºn</div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">${worstDay[0]} (${worstDay[1].bets} bahis)</span>
                        <span class="font-bold text-red-600">${worstDay[1].profit.toFixed(2)} ‚Ç∫</span>
                    </div>
                </div>
                ` : ''}
                
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-blue-100">
                    <div class="text-sm font-bold text-gray-700 mb-3">üìä Aylƒ±k √ñzet</div>
                    <div class="space-y-2 max-h-32 overflow-y-auto">
                        ${Object.entries(monthlyStats).sort(([a], [b]) => b.localeCompare(a)).slice(0, 6).map(([month, stats]) => `
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-600">${month} (${stats.bets} bahis)</span>
                                <span class="font-semibold ${stats.profit >= 0 ? 'text-green-600' : 'text-red-600'}">
                                    ${stats.profit >= 0 ? '+' : ''}${stats.profit.toFixed(2)} ‚Ç∫
                                </span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Bahis T√ºr√º Analizi
            const betTypeStats = {};
            bets.forEach(bet => {
                if (!betTypeStats[bet.betType]) {
                    betTypeStats[bet.betType] = {
                        totalBets: 0,
                        totalAmount: 0,
                        totalProfit: 0,
                        wonBets: 0,
                        lostBets: 0
                    };
                }
                
                const stats = betTypeStats[bet.betType];
                stats.totalBets++;
                stats.totalAmount += bet.betAmount;
                
                if (bet.status === 'won') {
                    stats.wonBets++;
                    stats.totalProfit += bet.profitLoss;
                } else if (bet.status === 'lost') {
                    stats.lostBets++;
                    stats.totalProfit += bet.profitLoss;
                }
            });
            
            document.getElementById('bet-type-stats').innerHTML = Object.entries(betTypeStats)
                .sort(([,a], [,b]) => b.totalProfit - a.totalProfit)
                .map(([betType, stats]) => {
                    const winRate = stats.wonBets + stats.lostBets > 0 ? 
                        ((stats.wonBets / (stats.wonBets + stats.lostBets)) * 100).toFixed(1) : 0;
                    const profitColor = stats.totalProfit >= 0 ? 'text-green-600' : 'text-red-600';
                    
                    return `
                        <div class="bg-white rounded-2xl p-4 shadow-sm border border-orange-100">
                            <div class="flex justify-between items-start mb-2">
                                <span class="font-bold text-gray-800">${betType}</span>
                                <span class="font-bold ${profitColor}">
                                    ${stats.totalProfit >= 0 ? '+' : ''}${stats.totalProfit.toFixed(2)} ‚Ç∫
                                </span>
                            </div>
                            <div class="grid grid-cols-3 gap-2 text-xs text-gray-600">
                                <div class="text-center">
                                    <div class="font-semibold text-gray-800">${stats.totalBets}</div>
                                    <div>Bahis</div>
                                </div>
                                <div class="text-center">
                                    <div class="font-semibold text-gray-800">${winRate}%</div>
                                    <div>Ba≈üarƒ±</div>
                                </div>
                                <div class="text-center">
                                    <div class="font-semibold text-gray-800">${stats.totalAmount.toFixed(0)} ‚Ç∫</div>
                                    <div>Yatƒ±rƒ±m</div>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            
            // Ba≈üarƒ± Oranlarƒ±
            const completedBets = bets.filter(bet => bet.status !== 'pending');
            const totalCompleted = completedBets.length;
            const wonBets = completedBets.filter(bet => bet.status === 'won').length;
            const lostBets = completedBets.filter(bet => bet.status === 'lost').length;
            const overallWinRate = totalCompleted > 0 ? ((wonBets / totalCompleted) * 100).toFixed(1) : 0;
            
            const avgBetAmount = totalCompleted > 0 ? 
                (completedBets.reduce((sum, bet) => sum + bet.betAmount, 0) / totalCompleted).toFixed(2) : 0;
            const avgWinAmount = wonBets > 0 ? 
                (completedBets.filter(bet => bet.status === 'won').reduce((sum, bet) => sum + bet.winAmount, 0) / wonBets).toFixed(2) : 0;
            
            document.getElementById('success-stats').innerHTML = `
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-pink-100">
                    <div class="text-center">
                        <div class="text-3xl font-bold ${overallWinRate >= 50 ? 'text-green-600' : 'text-red-600'} mb-1">
                            ${overallWinRate}%
                        </div>
                        <div class="text-sm text-gray-600">Genel Ba≈üarƒ± Oranƒ±</div>
                        <div class="text-xs text-gray-500 mt-1">${wonBets} kazan√ß / ${totalCompleted} tamamlanan</div>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-white rounded-2xl p-4 shadow-sm border border-pink-100 text-center">
                        <div class="text-lg font-bold text-gray-800 mb-1">${avgBetAmount} ‚Ç∫</div>
                        <div class="text-xs text-gray-600">Ortalama Bahis</div>
                    </div>
                    <div class="bg-white rounded-2xl p-4 shadow-sm border border-pink-100 text-center">
                        <div class="text-lg font-bold text-green-600 mb-1">${avgWinAmount} ‚Ç∫</div>
                        <div class="text-xs text-gray-600">Ortalama Kazan√ß</div>
                    </div>
                </div>
                
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-pink-100">
                    <div class="text-sm font-bold text-gray-700 mb-2">üìä Durum Daƒüƒ±lƒ±mƒ±</div>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 text-sm">‚úÖ Kazanan</span>
                            <span class="font-semibold">${wonBets} (${totalCompleted > 0 ? ((wonBets/totalCompleted)*100).toFixed(1) : 0}%)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-600 text-sm">‚ùå Kaybeden</span>
                            <span class="font-semibold">${lostBets} (${totalCompleted > 0 ? ((lostBets/totalCompleted)*100).toFixed(1) : 0}%)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-yellow-600 text-sm">‚è≥ Bekleyen</span>
                            <span class="font-semibold">${bets.length - totalCompleted} (${bets.length > 0 ? (((bets.length - totalCompleted)/bets.length)*100).toFixed(1) : 0}%)</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Rekorlar & √ñne √áƒ±kanlar
            const completedBetsWithProfit = completedBets.filter(bet => bet.profitLoss !== 0);
            const biggestWin = completedBetsWithProfit.length > 0 ? 
                completedBetsWithProfit.reduce((max, bet) => bet.profitLoss > max.profitLoss ? bet : max) : null;
            const biggestLoss = completedBetsWithProfit.length > 0 ? 
                completedBetsWithProfit.reduce((min, bet) => bet.profitLoss < min.profitLoss ? bet : min) : null;
            const highestOdds = bets.filter(bet => bet.odds > 0).length > 0 ? 
                bets.filter(bet => bet.odds > 0).reduce((max, bet) => bet.odds > max.odds ? bet : max) : null;
            
            document.getElementById('records-stats').innerHTML = `
                ${biggestWin ? `
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-green-200">
                    <div class="text-center">
                        <div class="text-2xl mb-2">üèÜ</div>
                        <div class="text-sm font-bold text-green-700 mb-1">En B√ºy√ºk Kazan√ß</div>
                        <div class="text-xl font-bold text-green-600 mb-2">+${biggestWin.profitLoss.toFixed(2)} ‚Ç∫</div>
                        <div class="text-xs text-gray-600">${biggestWin.platform}</div>
                        <div class="text-xs text-gray-500">${biggestWin.date}</div>
                    </div>
                </div>
                ` : ''}
                
                ${biggestLoss ? `
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-red-200">
                    <div class="text-center">
                        <div class="text-2xl mb-2">üí∏</div>
                        <div class="text-sm font-bold text-red-700 mb-1">En B√ºy√ºk Kayƒ±p</div>
                        <div class="text-xl font-bold text-red-600 mb-2">${biggestLoss.profitLoss.toFixed(2)} ‚Ç∫</div>
                        <div class="text-xs text-gray-600">${biggestLoss.platform}</div>
                        <div class="text-xs text-gray-500">${biggestLoss.date}</div>
                    </div>
                </div>
                ` : ''}
                
                ${highestOdds ? `
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-purple-200">
                    <div class="text-center">
                        <div class="text-2xl mb-2">üéØ</div>
                        <div class="text-sm font-bold text-purple-700 mb-1">En Y√ºksek Oran</div>
                        <div class="text-xl font-bold text-purple-600 mb-2">${highestOdds.odds}</div>
                        <div class="text-xs text-gray-600">${highestOdds.platform}</div>
                        <div class="text-xs text-gray-500 ${highestOdds.status === 'won' ? 'text-green-600' : highestOdds.status === 'lost' ? 'text-red-600' : 'text-yellow-600'}">
                            ${highestOdds.status === 'won' ? '‚úÖ Kazandƒ±' : highestOdds.status === 'lost' ? '‚ùå Kaybetti' : '‚è≥ Bekliyor'}
                        </div>
                    </div>
                </div>
                ` : ''}
            `;
        }

        // Initialize app
        updateStats();
        renderHistory();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'974cc847f341e32b',t:'MTc1NjE0MjY2MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
